function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(),function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",(function(){i=!0}));return setTimeout((function(){i||e(n).trigger(e.support.transition.end)}),t),this},e((function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})}))}(jQuery),function(e){"use strict";var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var o=e(this),s=o.attr("data-target");s||(s=(s=o.attr("href"))&&s.replace(/.*(?=#[^\s]*$)/,""));var a=e(s);t&&t.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var n=e.fn.alert;e.fn.alert=function(t){return this.each((function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof t&&o[t].call(n)}))},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.bs.alert.data-api",t,i.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each((function(){var n=e(this),o=n.data("bs.button"),s="object"==_typeof(t)&&t;o||n.data("bs.button",o=new i(this,s)),"toggle"==t?o.toggle():t&&o.setState(t)}))}var i=function t(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",s=n.data();t+="Text",null==s.resetText&&n.data("resetText",n[o]()),setTimeout(e.proxy((function(){n[o](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))}),this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(i){var n=e(i.target);n.hasClass("btn")||(n=n.closest(".btn")),t.call(n,"toggle"),e(i.target).is('input[type="radio"]')||e(i.target).is('input[type="checkbox"]')||i.preventDefault()})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))}))}(jQuery),function(e){"use strict";function t(t){return this.each((function(){var n=e(this),o=n.data("bs.carousel"),s=e.extend({},i.DEFAULTS,n.data(),"object"==_typeof(t)&&t),a="string"==typeof t?t:s.slide;o||n.data("bs.carousel",o=new i(this,s)),"number"==typeof t?o.to(t):a?o[a]():s.interval&&o.pause().cycle()}))}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n=(i+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",(function(){t.to(e)})):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,n){var o=this.$element.find(".item.active"),s=n||this.getItemForDirection(t,o),a=this.interval,r="next"==t?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var c=s[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,o.addClass(r),s.addClass(r),o.one("bsTransitionEnd",(function(){s.removeClass([t,r].join(" ")).addClass("active"),o.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout((function(){l.$element.trigger(h)}),0)})).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var o=function(i){var n,o=e(this),s=e(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=e.extend({},s.data(),o.data()),r=o.attr("data-slide-to");r&&(a.interval=!1),t.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",(function(){e('[data-ride="carousel"]').each((function(){var i=e(this);t.call(i,i.data())}))}))}(jQuery),function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each((function(){var i=e(this),o=i.data("bs.collapse"),s=e.extend({},n.DEFAULTS,i.data(),"object"==_typeof(t)&&t);!o&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),o||i.data("bs.collapse",o=new n(this,s)),"string"==typeof t&&o[t]()}))}var n=function t(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),t||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return r.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[a](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy((function(i,n){var o=e(n);this.addAriaAndCollapsedClass(t(o),o)}),this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(n){var o=e(this);o.attr("data-target")||n.preventDefault();var s=t(o),a=s.data("bs.collapse")?"toggle":o.data();i.call(s,a)}))}(jQuery),function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=(i=t.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(n).remove(),e(o).each((function(){var n=e(this),o=t(n),s={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(o[0],i.target)||(o.trigger(i=e.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",s))))})))}var n=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.5",s.prototype.toggle=function(n){var o=e(this);if(!o.is(".disabled, :disabled")){var s=t(o),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(n=e.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},s.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var s=t(n),a=s.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&s.find(o).trigger("focus"),n.trigger("click");var r=s.find(".dropdown-menu li:not(.disabled):visible a");if(r.length){var l=r.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<r.length-1&&l++,~l||(l=0),r.eq(l).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each((function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)}))},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,n){return this.each((function(){var o=e(this),s=o.data("bs.modal"),a=e.extend({},i.DEFAULTS,o.data(),"object"==_typeof(t)&&t);s||o.data("bs.modal",s=new i(this,a)),"string"==typeof t?s[t](n):a.show&&s.show(n)}))}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){n.$element.one("mouseup.dismiss.bs.modal",(function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var o=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});o?n.$dialog.one("bsTransitionEnd",(function(){n.$element.trigger("focus").trigger(s)})).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)})))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy((function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")}),this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")}))},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy((function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))}),this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(i){var n=e(this),o=n.attr("href"),s=e(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&i.preventDefault(),s.one("show.bs.modal",(function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",(function(){n.is(":visible")&&n.trigger("focus")}))})),t.call(s,a,this)}))}(jQuery),function(e){"use strict";var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.5",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var a=o[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,(function(e,n){i[e]!=n&&(t[e]=n)})),t},t.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)):i.show())},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)):i.hide())},t.prototype.show=function(){var i=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(r);c&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=s[0].offsetWidth,h=s[0].offsetHeight;if(c){var p=r,f=this.getPosition(this.$viewport);r="bottom"==r&&u.bottom+h>f.bottom?"top":"top"==r&&u.top-h<f.top?"bottom":"right"==r&&u.right+d>f.width?"left":"left"==r&&u.left-d<f.left?"right":r,s.removeClass(p).addClass(r)}var m=this.getCalculatedOffset(r,u,d,h);this.applyPlacement(m,r);var g=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),t.top+=a,t.left+=r,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=s&&(t.top=t.top+s-c);var u=this.getViewportAdjustedDelta(i,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(i),h=d?2*u.left-o+l:2*u.top-s+c,p=d?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][p],d)},t.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(i){function n(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),i&&i()}var o=this,s=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(t.TRANSITION_DURATION):n(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var i=(t=t||this.$element)[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=n?{top:0,left:0}:t.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},r=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,a,r,s)},t.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var r=t.top-s-a.scroll,l=t.top+s-a.scroll+n;r<a.top?o.top=a.top-r:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var c=t.left-s,u=t.left+s+i;c<a.left?o.left=a.left-c:u>a.right&&(o.left=a.left+a.width-u)}return o},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide((function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null}))};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each((function(){var n=e(this),o=n.data("bs.tooltip"),s="object"==_typeof(i)&&i;(o||!/destroy|hide/.test(i))&&(o||n.data("bs.tooltip",o=new t(this,s)),"string"==typeof i&&o[i]())}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.5",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=function(i){return this.each((function(){var n=e(this),o=n.data("bs.popover"),s="object"==_typeof(i)&&i;(o||!/destroy|hide/.test(i))&&(o||n.data("bs.popover",o=new t(this,s)),"string"==typeof i&&o[i]())}))},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each((function(){var n=e(this),o=n.data("bs.scrollspy"),s="object"==_typeof(i)&&i;o||n.data("bs.scrollspy",o=new t(this,s)),"string"==typeof i&&o[i]()}))}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var t=e(this),o=t.data("target")||t.attr("href"),s=/^#./.test(o)&&e(o);return s&&s.length&&s.is(":visible")&&[[s[i]().top+n,o]]||null})).sort((function(e,t){return e[0]-t[0]})).each((function(){t.offsets.push(this[0]),t.targets.push(this[1])}))},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return a!=(e=s[s.length-1])&&this.activate(e);if(a&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)a!=s[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",(function(){e('[data-spy="scroll"]').each((function(){var t=e(this);i.call(t,t.data())}))}))}(jQuery),function(e){"use strict";function t(t){return this.each((function(){var n=e(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof t&&o[t]()}))}var i=function(t){this.element=e(t)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=i.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),t.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=e(n);this.activate(t.closest("li"),i),this.activate(r,r.parent(),(function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})}))}}},i.prototype.activate=function(t,n,o){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=n.find("> .active"),r=o&&e.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var o=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(e){"use strict";function t(t){return this.each((function(){var n=e(this),o=n.data("bs.affix"),s="object"==_typeof(t)&&t;o||n.data("bs.affix",o=new i(this,s)),"string"==typeof t&&o[t]()}))}var i=function t(i,n){this.options=e.extend({},t.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(i),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var o=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>o&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=s.top)&&"bottom":!(e-n>=o+a)&&"bottom";var r=null==this.affixed,l=r?o:s.top;return null!=i&&i>=o?"top":null!=n&&l+(r?a:t)>=e-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,o=n.top,s=n.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=_typeof(n)&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var r=this.getState(a,t,o,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-t-s})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",(function(){e('[data-spy="affix"]').each((function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)}))}))}(jQuery),function(e,t){"use strict";"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t(require("moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,(function(e){"use strict";var t,i={},n={},o={},s={};e&&"string"==typeof e.version||E("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var a=e.version.split("."),r=+a[0],l=+a[1];function c(e){return e>96?e-87:e>64?e-29:e-48}function u(e){var t=0,i=e.split("."),n=i[0],o=i[1]||"",s=1,a=0,r=1;for(45===e.charCodeAt(0)&&(t=1,r=-1);t<n.length;t++)a=60*a+c(n.charCodeAt(t));for(t=0;t<o.length;t++)s/=60,a+=c(o.charCodeAt(t))*s;return a*r}function d(e){for(var t=0;t<e.length;t++)e[t]=u(e[t])}function h(e,t){var i,n=[];for(i=0;i<t.length;i++)n[i]=e[t[i]];return n}function p(e){var t=e.split("|"),i=t[2].split(" "),n=t[3].split(""),o=t[4].split(" ");return d(i),d(n),d(o),function(e,t){for(var i=0;i<t;i++)e[i]=Math.round((e[i-1]||0)+6e4*e[i]);e[t-1]=1/0}(o,n.length),{name:t[0],abbrs:h(t[1].split(" "),n),offsets:h(i,n),untils:o,population:0|t[5]}}function f(e){e&&this._set(p(e))}function m(e){var t=e.toTimeString(),i=t.match(/\([a-z ]+\)/i);"GMT"===(i=i&&i[0]?(i=i[0].match(/[A-Z]/g))?i.join(""):void 0:(i=t.match(/[A-Z]{3,5}/g))?i[0]:void 0)&&(i=void 0),this.at=+e,this.abbr=i,this.offset=e.getTimezoneOffset()}function g(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function v(e,t){for(var i,n;n=6e4*((t.at-e.at)/12e4|0);)(i=new m(new Date(e.at+n))).offset===e.offset?e=i:t=i;return e}function b(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function y(e,t){var i,n;for(d(t),i=0;i<t.length;i++)n=t[i],s[n]=s[n]||{},s[n][e]=!0}function w(e){var t,i,n,a=e.length,r={},l=[];for(t=0;t<a;t++)for(i in n=s[e[t].offset]||{})n.hasOwnProperty(i)&&(r[i]=!0);for(t in r)r.hasOwnProperty(t)&&l.push(o[t]);return l}function _(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=o[C(e)];if(t)return t;E("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var i,n,s,a=function(){var e,t,i,n=(new Date).getFullYear()-2,o=new m(new Date(n,0,1)),s=[o];for(i=1;i<48;i++)(t=new m(new Date(n,i,1))).offset!==o.offset&&(e=v(o,t),s.push(e),s.push(new m(new Date(e.at+6e4)))),o=t;for(i=0;i<4;i++)s.push(new m(new Date(n+i,0,1))),s.push(new m(new Date(n+i,6,1)));return s}(),r=a.length,l=w(a),c=[];for(n=0;n<l.length;n++){for(i=new g(S(l[n]),r),s=0;s<r;s++)i.scoreOffsetAt(a[s]);c.push(i)}return c.sort(b),c.length>0?c[0].zone.name:void 0}function C(e){return(e||"").toLowerCase().replace(/\//g,"_")}function x(e){var t,n,s,a;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)a=C(n=(s=e[t].split("|"))[0]),i[a]=e[t],o[a]=n,y(a,s[2].split(" "))}function S(e,t){e=C(e);var s,a=i[e];return a instanceof f?a:"string"==typeof a?(a=new f(a),i[e]=a,a):n[e]&&t!==S&&(s=S(n[e],S))?((a=i[e]=new f)._set(s),a.name=o[e],a):null}function k(e){var t,i,s,a;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)s=C((i=e[t].split("|"))[0]),a=C(i[1]),n[s]=a,o[s]=i[0],n[a]=s,o[a]=i[1]}function T(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function E(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function $(t){var i=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],o=S(n),s=e.utc.apply(null,i);return o&&!e.isMoment(t)&&T(s)&&s.add(o.parse(s),"minutes"),s.tz(n),s}(r<2||2===r&&l<6)&&E("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),f.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,i=+e,n=this.untils;for(t=0;t<n.length;t++)if(i<n[t])return t},parse:function(e){var t,i,n,o,s=+e,a=this.offsets,r=this.untils,l=r.length-1;for(o=0;o<l;o++)if(t=a[o],i=a[o+1],n=a[o?o-1:o],t<i&&$.moveAmbiguousForward?t=i:t>n&&$.moveInvalidForward&&(t=n),s<r[o]-6e4*t)return a[o];return a[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return E("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},g.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},$.version="0.5.25",$.dataVersion="",$._zones=i,$._links=n,$._names=o,$.add=x,$.link=k,$.load=function(e){x(e.zones),k(e.links),$.dataVersion=e.version},$.zone=S,$.zoneExists=function e(t){return e.didShowError||(e.didShowError=!0,E("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!S(t)},$.guess=function(e){return t&&!e||(t=_()),t},$.names=function(){var e,t=[];for(e in o)o.hasOwnProperty(e)&&(i[e]||i[n[e]])&&o[e]&&t.push(o[e]);return t.sort()},$.Zone=f,$.unpack=p,$.unpackBase60=u,$.needsOffset=T,$.moveInvalidForward=!0,$.moveAmbiguousForward=!1;var D,A=e.fn;function I(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function O(e){return function(){return this._z=null,e.apply(this,arguments)}}e.tz=$,e.defaultZone=null,e.updateOffset=function(t,i){var n,o=e.defaultZone;if(void 0===t._z&&(o&&T(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(o.parse(t),"minutes")),t._z=o),t._z)if(n=t._z.utcOffset(t),Math.abs(n)<16&&(n/=60),void 0!==t.utcOffset){var s=t._z;t.utcOffset(-n,i),t._z=s}else t.zone(n,i)},A.tz=function(t,i){if(t){if("string"!=typeof t)throw new Error("Time zone name must be a string, got "+t+" ["+_typeof(t)+"]");return this._z=S(t),this._z?e.updateOffset(this,i):E("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},A.zoneName=I(A.zoneName),A.zoneAbbr=I(A.zoneAbbr),A.utc=O(A.utc),A.local=O(A.local),A.utcOffset=(D=A.utcOffset,function(){return arguments.length>0&&(this._z=null),D.apply(this,arguments)}),e.tz.setDefault=function(t){return(r<2||2===r&&l<9)&&E("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?S(t):null,e};var R=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(R)?(R.push("_z"),R.push("_a")):R&&(R._z=null),e})),function(e,t,i,n){"use strict";e.isFunction=e.isFunction||function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.calendar=function(t){var o,s=e(this),a=s.selector||"",r=moment().valueOf(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1),h={5:{row:4,column:3},10:{row:3,column:2},15:{row:2,column:2},20:{row:3,column:1},30:{row:2,column:1}};return s.each((function(){var s,p,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.calendar.settings,t):e.extend({},e.fn.calendar.settings),m=f.className,g=f.namespace,v=f.selector,b=f.formatter,y=f.parser,w=f.metadata,_=h[f.minTimeGap],C=f.error,x="."+g,S="module-"+g,k=e(this),T=k.find(v.input),E=k.find(v.popup),$=k.find(v.activator),D=this,A=k.data(S),I=!1,O=!1;p={initialize:function(){p.debug("Initializing calendar for",D,k),s=p.get.isTouch(),p.setup.config(),p.setup.popup(),p.setup.inline(),p.setup.input(),p.setup.date(),p.create.calendar(),p.bind.events(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of calendar"),A=p,k.data(S,A)},destroy:function(){p.verbose("Destroying previous calendar for",D),k.removeData(S),p.unbind.events()},setup:{config:function(){null!==p.get.minDate()&&p.set.minDate(k.data(w.minDate)),null!==p.get.maxDate()&&p.set.maxDate(k.data(w.maxDate)),p.setting("type",p.get.type())},popup:function(){if(!f.inline&&($.length||($=k.children().first()).length))if(e.fn.popup!==n){if(!E.length){var t=$.parent(),i=0!==t.closest(v.append).length?"appendTo":"prependTo";E=e("<div/>").addClass(m.popup)[i](t)}E.addClass(m.calendar);var o=f.onVisible,s=f.onHidden;T.length||(E.attr("tabindex","0"),o=function(){return p.focus(),f.onVisible.apply(E,arguments)},s=function(){return p.blur(),f.onHidden.apply(E,arguments)});var a=f.on||(T.length?"focus":"click"),r=e.extend({},f.popupOptions,{popup:E,on:a,hoverable:"hover"===a,onShow:function(){return p.set.focusDate(p.get.date()),p.set.mode(f.startMode),f.onShow.apply(E,arguments)},onVisible:o,onHide:f.onHide,onHidden:s});p.popup(r)}else p.error(C.popup)},inline:function(){$.length&&!f.inline||(E=e("<div/>").addClass(m.calendar).appendTo(k),T.length||E.attr("tabindex","0"))},input:function(){f.touchReadonly&&T.length&&s&&T.prop("readonly",!0)},date:function(){var e;f.initialDate?e=y.date(f.initialDate,f):k.data(w.date)!==n?e=y.date(k.data(w.date),f):T.length&&(e=y.date(T.val(),f)),p.set.date(e,f.formatInput,!1)}},create:{calendar:function(){var t,i,o,s,a,r,l,c=p.get.mode(),u=moment(),d=p.get.date(),h=p.get.focusDate(),g=h||d||f.initialDate||u;g=p.helper.dateInRange(g),h||(h=g,p.set.focusDate(h,!1,!1));var v="year"===c,y="month"===c,C="day"===c,x="hour"===c,S="minute"===c,k="time"===f.type,T=Math.max(f.multiMonth,1),$=C?p.get.monthOffset():0,D=g.minutes(),A=g.hours(),I=g.date(),O=g.month()+$,R=g.year(),P=C?f.showWeekNumbers?8:7:x?4:_.column,z=C||x?6:_.row,L=C?T:1,M=E,N=M.hasClass("left")?"right center":"left center";for(M.empty(),L>1&&(l=e("<div/>").addClass(m.grid).appendTo(M)),s=0;s<L;s++){if(L>1)M=e("<div/>").addClass(m.column).appendTo(l);var j=O+s,q=(moment([R,j,1]).day()-f.firstDayOfWeek%7+7)%7;if(!f.constantHeight&&C){var F=moment([R,j+1,0]).date()+q;z=Math.ceil(F/7)}var H=v?10:y?1:0,U=C?1:0,B=x||S?1:0,W=x||S?I:1,V=moment([R-H,j-U,W-B,A]),G=moment([R+H,j+U,W+B,A]),Q=v?moment([10*Math.ceil(R/10)-9,0,0]):y?moment([R,0,0]):C?moment([R,j,0]):moment([R,j,I,-1]),X=v?moment([10*Math.ceil(R/10)+1,0,1]):y?moment([R+1,0,1]):C?moment([R,j+1,1]):moment([R,j,I+1]),Y=c;C&&f.showWeekNumbers&&(Y+=" andweek");var K=e("<table/>").addClass(m.table).addClass(Y).appendTo(M),J=P;if(!k){var Z=e("<thead/>").appendTo(K);a=e("<tr/>").appendTo(Z),r=e("<th/>").attr("colspan",""+P).appendTo(a);var ee=v||y?moment([R,0,1]):C?moment([R,j,1]):moment([R,j,I,A,D]),te=e("<span/>").addClass(m.link).appendTo(r);te.text(b.header(ee,c,f));var ie=y?f.disableYear?"day":"year":C?f.disableMonth?"year":"month":"day";if(te.data(w.mode,ie),f.allowArrowsOnlyOnDays!==n&&f.allowArrowsOnlyOnDays){if(C&&0===s)(ne=e("<span/>").addClass(m.prev).appendTo(r)).data(w.focusDate,V),ne.toggleClass(m.disabledCell,!p.helper.isDateInRange(Q,c)),e("<i/>").addClass(m.prevIcon).appendTo(ne);if(C&&s===L-1)(oe=e("<span/>").addClass(m.next).appendTo(r)).data(w.focusDate,G),oe.toggleClass(m.disabledCell,!p.helper.isDateInRange(X,c)),e("<i/>").addClass(m.nextIcon).appendTo(oe)}else{var ne,oe;if(0===s)(ne=e("<span/>").addClass(m.prev).appendTo(r)).data(w.focusDate,V),ne.toggleClass(m.disabledCell,!p.helper.isDateInRange(Q,c)),e("<i/>").addClass(m.prevIcon).appendTo(ne);if(s===L-1)(oe=e("<span/>").addClass(m.next).appendTo(r)).data(w.focusDate,G),oe.toggleClass(m.disabledCell,!p.helper.isDateInRange(X,c)),e("<i/>").addClass(m.nextIcon).appendTo(oe)}if(C)for(a=e("<tr/>").appendTo(Z),f.showWeekNumbers&&((r=e("<th/>").appendTo(a)).text(f.text.weekNo),r.addClass(m.weekCell),J--),t=0;t<J;t++)(r=e("<th/>").appendTo(a)).text(b.dayColumnHeader((t+f.firstDayOfWeek)%7,f))}var se=e("<tbody/>").appendTo(K);for(t=v?10*Math.ceil(R/10)-9:C?1-q:0,i=0;i<z;i++)for(a=e("<tr/>").appendTo(se),C&&f.showWeekNumbers&&((r=e("<th/>").appendTo(a)).text(p.get.weekOfYear(R,j,t+1-f.firstDayOfWeek)),r.addClass(m.weekCell)),o=0;o<J;o++,t++){var ae=v?moment([t,j,1,A,D]):y?moment([R,t,1,A,D]):C?moment([R,j,t,A,D]):x?moment([R,j,I,t]):moment([R,j,I,A,t*f.minTimeGap]),re=v?t:y?f.text.monthsShort[t]:C?ae.date():b.time(ae,f,!0);(r=e("<td/>").addClass(m.cell).appendTo(a)).text(re),r.data(w.date,ae);var le=C&&ae.month()!==(j+12)%12,ce=!f.selectAdjacentDays&&le||!p.helper.isDateInRange(ae,c)||f.isDisabled(ae,c)||p.helper.isDisabled(ae,c)||!p.helper.isEnabled(ae,c);if(ce){var ue=p.helper.findDayAsObject(ae,c,f.disabledDates);null!==ue&&ue[w.message]&&(r.attr("data-tooltip",ue[w.message]),r.attr("data-position",N))}else{var de=p.helper.findDayAsObject(ae,c,f.eventDates);null!==de&&(r.addClass(de[w.class]||f.eventClass),de[w.message]&&(r.attr("data-tooltip",de[w.message]),r.attr("data-position",N)))}var he=p.helper.dateEqual(ae,d,c),pe=p.helper.dateEqual(ae,u,c);r.toggleClass(m.adjacentCell,le),r.toggleClass(m.disabledCell,ce),r.toggleClass(m.activeCell,he&&!le),x||S||r.toggleClass(m.todayCell,!le&&pe);var fe={mode:c,adjacent:le,disabled:ce,active:he,today:pe};b.cell(r,ae,fe),p.helper.dateEqual(ae,h,c)&&p.set.focusDate(ae,!1,!1)}if(f.today){var me=e("<tr/>").appendTo(se),ge=e("<td/>").attr("colspan",""+P).addClass(m.today).appendTo(me);ge.text(b.today(f)),ge.data(w.date,u)}p.update.focus(!1,K)}}},update:{focus:function(t,i){i=i||E;var n=p.get.mode(),o=p.get.date(),a=p.get.focusDate(),r=p.get.startDate(),l=p.get.endDate(),c=(t?a:null)||o||(s?null:a);i.find("td").each((function(){var t=e(this),i=t.data(w.date);if(i){var o=t.hasClass(m.disabledCell),u=t.hasClass(m.activeCell),d=t.hasClass(m.adjacentCell),h=p.helper.dateEqual(i,a,n),g=!!c&&(!!r&&p.helper.isDateInRange(i,n,r,c)||!!l&&p.helper.isDateInRange(i,n,c,l));t.toggleClass(m.focusCell,h&&(!s||I)&&(!d||f.selectAdjacentDays&&d)&&!o),p.helper.isTodayButton(t)||t.toggleClass(m.rangeCell,g&&!u&&!o)}}))}},refresh:function(){p.create.calendar()},bind:{events:function(){p.debug("Binding events"),E.on("mousedown"+x,p.event.mousedown),E.on("touchstart"+x,p.event.mousedown),E.on("mouseup"+x,p.event.mouseup),E.on("touchend"+x,p.event.mouseup),E.on("mouseover"+x,p.event.mouseover),T.length?(T.on("input"+x,p.event.inputChange),T.on("focus"+x,p.event.inputFocus),T.on("blur"+x,p.event.inputBlur),T.on("click"+x,p.event.inputClick),T.on("keydown"+x,p.event.keydown)):E.on("keydown"+x,p.event.keydown)}},unbind:{events:function(){p.debug("Unbinding events"),E.off(x),T.length&&T.off(x)}},event:{mouseover:function(t){var i=e(t.target).data(w.date),n=1===t.buttons;i&&p.set.focusDate(i,!1,!0,n)},mousedown:function(t){T.length&&t.preventDefault(),I=t.type.indexOf("touch")>=0;var i=e(t.target).data(w.date);i&&p.set.focusDate(i,!1,!0,!0)},mouseup:function(t){p.focus(),t.preventDefault(),t.stopPropagation(),I=!1;var i=e(t.target);if(!i.hasClass("disabled")){var n=i.parent();(n.data(w.date)||n.data(w.focusDate)||n.data(w.mode))&&(i=n);var o=i.data(w.date),s=i.data(w.focusDate),a=i.data(w.mode);if(o&&!1!==f.onSelect.call(D,o,p.get.mode())){var r=i.hasClass(m.today);p.selectDate(o,r)}else s?p.set.focusDate(s):a&&p.set.mode(a)}},keydown:function(e){var t=e.which;if(27!==t&&9!==t||p.popup("hide"),p.popup("is visible"))if(f.allowArrowsOnlyOnDays!==n&&f.allowArrowsOnlyOnDays||37!==t&&38!==t&&39!==t&&40!==t){if(13===t){o=p.get.mode();var i=p.get.focusDate();i&&!f.isDisabled(i,o)&&!p.helper.isDisabled(i,o)&&p.helper.isEnabled(i,o)&&p.selectDate(i),e.preventDefault(),e.stopPropagation()}}else{var o,s="day"===(o=p.get.mode())?7:"hour"===o?4:"minute"===o?_.column:3,a=37===t?-1:38===t?-s:39==t?1:s;a*="minute"===o?f.minTimeGap:1;var r=p.get.focusDate()||p.get.date()||moment(),l=r.year()+("year"===o?a:0),c=r.month()+("month"===o?a:0),u=r.date()+("day"===o?a:0),d=r.hours()+("hour"===o?a:0),h=r.minutes()+("minute"===o?a:0),m=moment([l,c,u,d,h]);"time"===f.type&&(m=p.helper.mergeDateTime(r,m)),p.helper.isDateInRange(m,o)&&p.set.focusDate(m)}38!==t&&40!==t||(e.preventDefault(),p.popup("show"))},inputChange:function(){var e=T.val(),t=y.date(e,f);p.set.date(t,!1)},inputFocus:function(){E.addClass(m.active)},inputBlur:function(){if(E.removeClass(m.active),f.formatInput){var e=p.get.date(),t=b.datetime(e,f);T.val(t)}},inputClick:function(){p.popup("show")}},get:{weekOfYear:function(e,t,i){var n,o,s,a=864e5,r=7*a;return n=Date.UTC(e,t,i+3)/a,o=Math.floor(n/7),s=new Date(o*r).getUTCFullYear(),o-Math.floor(Date.UTC(s,0,7)/r)+1},date:function(){return p.helper.sanitiseDate(k.data(w.date))||null},inputDate:function(){return T.val()},focusDate:function(){return k.data(w.focusDate)||null},startDate:function(){var e=p.get.calendarModule(f.startCalendar);return(e?e.get.date():k.data(w.startDate))||null},endDate:function(){var e=p.get.calendarModule(f.endCalendar);return(e?e.get.date():k.data(w.endDate))||null},minDate:function(){return k.data(w.minDate)||null},maxDate:function(){return k.data(w.maxDate)||null},monthOffset:function(){return k.data(w.monthOffset)||0},mode:function(){var t=k.data(w.mode)||f.startMode,i=p.get.validModes();return e.inArray(t,i)>=0?t:"time"===f.type?"hour":"month"===f.type?"month":"year"===f.type?"year":"day"},type:function(){return k.data(w.type)||f.type},validModes:function(){var e=[];return"time"!==f.type&&(f.disableYear&&"year"!==f.type||e.push("year"),(!f.disableMonth&&"year"!==f.type||"month"===f.type)&&e.push("month"),f.type.indexOf("date")>=0&&e.push("day")),f.type.indexOf("time")>=0&&(e.push("hour"),f.disableMinute||e.push("minute")),e},isTouch:function(){try{return i.createEvent("TouchEvent"),!0}catch(e){return!1}},calendarModule:function(t){return t?(t instanceof e||(t=e(t).first()),t.data(S)):null}},set:{date:function(e,t,i){t=!1!==t,i=!1!==i,e=p.helper.sanitiseDate(e),e=p.helper.dateInRange(e);var o=p.get.mode(),s=b.datetime(e,f);if(i&&!1===f.onBeforeChange.call(D,e,s,o))return!1;if(p.set.focusDate(e),f.isDisabled(e,o))return!1;var a=p.get.endDate();a&&e&&e>a&&p.set.endDate(n),p.set.dataKeyValue(w.date,e),t&&T.length&&T.val(s),i&&f.onChange.call(D,e,s,o)},startDate:function(e,t){e=p.helper.sanitiseDate(e);var i=p.get.calendarModule(f.startCalendar);i&&i.set.date(e),p.set.dataKeyValue(w.startDate,e,t)},endDate:function(e,t){e=p.helper.sanitiseDate(e);var i=p.get.calendarModule(f.endCalendar);i&&i.set.date(e),p.set.dataKeyValue(w.endDate,e,t)},focusDate:function(e,t,i,n){e=p.helper.sanitiseDate(e),e=p.helper.dateInRange(e);var o="day"===p.get.mode(),s=p.get.focusDate();if(o&&e&&s){var a=12*(e.year()-s.year())+e.month()-s.month();if(a){var r=p.get.monthOffset()-a;p.set.monthOffset(r,!1)}}var l=p.set.dataKeyValue(w.focusDate,e,t);i=!1!==i&&l&&!1===t||O!=n,O=n,i&&p.update.focus(n)},minDate:function(e){e=p.helper.sanitiseDate(e),null!==f.maxDate&&f.maxDate<=e?p.verbose("Unable to set minDate variable bigger that maxDate variable",e,f.maxDate):(p.setting("minDate",e),p.set.dataKeyValue(w.minDate,e))},maxDate:function(e){e=p.helper.sanitiseDate(e),null!==f.minDate&&f.minDate>=e?p.verbose("Unable to set maxDate variable lower that minDate variable",e,f.minDate):(p.setting("maxDate",e),p.set.dataKeyValue(w.maxDate,e))},monthOffset:function(e,t){var i=Math.max(f.multiMonth,1);e=Math.max(1-i,Math.min(0,e)),p.set.dataKeyValue(w.monthOffset,e,t)},mode:function(e,t){p.set.dataKeyValue(w.mode,e,t)},dataKeyValue:function(e,t,i){var n=k.data(e),o=n===t||n<=t&&n>=t;return t?k.data(e,t):k.removeData(e),(i=!1!==i&&!o)&&p.refresh(),!o}},selectDate:function(e,t){p.verbose("New date selection",e);var i=p.get.mode();if(t||"minute"===i||f.disableMinute&&"hour"===i||"date"===f.type&&"day"===i||"month"===f.type&&"month"===i||"year"===f.type&&"year"===i){if(!(!1===p.set.date(e))&&f.closable){p.popup("hide");var o=p.get.calendarModule(f.endCalendar);o&&(o.popup("show"),o.focus())}}else{var s="year"===i?f.disableMonth?"day":"month":"month"===i?"day":"day"===i?"hour":"minute";p.set.mode(s),f.setInputValueOnMode!==n?i===f.setInputValueOnMode?p.set.date(e):p.set.focusDate(e):"hour"===i||"day"===i&&p.get.date()?p.set.date(e):p.set.focusDate(e)}},changeDate:function(e){p.set.date(e)},clear:function(){p.set.date(n)},popup:function(){return $.popup.apply($,arguments)},focus:function(){T.length?T.focus():E.focus()},blur:function(){T.length?T.blur():E.blur()},helper:{isDisabled:function(e,t){return"day"===t&&(-1!==f.disabledDaysOfWeek.indexOf(e.day())||f.disabledDates.some((function(i){return"string"==typeof i&&(i=p.helper.sanitiseDate(i)),i instanceof Object?p.helper.dateEqual(e,i,t):null!==i&&"object"===_typeof(i)&&i[w.date]?p.helper.dateEqual(e,p.helper.sanitiseDate(i[w.date]),t):void 0})))},isEnabled:function(e,t){return"day"===t?0===f.enabledDates.length||f.enabledDates.some((function(i){return"string"==typeof i&&(i=p.helper.sanitiseDate(i)),i instanceof Object?p.helper.dateEqual(e,i,t):null!==i&&"object"===_typeof(i)&&i[w.date]?p.helper.dateEqual(e,p.helper.sanitiseDate(i[w.date]),t):void 0})):"hour"===t&&"function"==typeof f.enabledHours?f.enabledHours(e):"minute"!==t||"function"!=typeof f.enabledMinutes||f.enabledMinutes(e)},findDayAsObject:function(e,t,i){if("day"===t)for(var n,o=0,s=i.length;o<s;o++){if("string"==typeof(n=i[o])&&(n=p.helper.sanitiseDate(n)),n instanceof Object&&p.helper.dateEqual(e,n,t)){var a={};return a[w.date]=n,a}if(null!==n&&"object"===_typeof(n)&&n[w.date]&&p.helper.dateEqual(e,p.helper.sanitiseDate(n[w.date]),t))return n}return null},sanitiseDate:function(e){return e?(e instanceof Object||(e=y.date(""+e,f)),!e||null===e||isNaN(e.valueOf())?n:e):n},dateDiff:function(e,t,i){i=i||"day";var n="time"===f.type,o="year"===i,s=o||"month"===i,a="minute"===i,r=a||"hour"===i;return e=moment([n?2e3:e.year(),n||o?0:e.month(),n||s?1:e.date(),r?e.hours():0,a?f.minTimeGap*Math.floor(e.minutes()/f.minTimeGap):0]),(t=moment([n?2e3:t.year(),n||o?0:t.month(),n||s?1:t.date(),r?t.hours():0,a?f.minTimeGap*Math.floor(t.minutes()/f.minTimeGap):0])).valueOf()-e.valueOf()},dateEqual:function(e,t,i){return!!e&&!!t&&0===p.helper.dateDiff(e,t,i)},isDateInRange:function(e,t,i,n){if(!i&&!n){var o=p.get.startDate();i=o&&f.minDate?moment([Math.max(o,f.minDate)]):o||f.minDate,n=f.maxDate}return i=i&&moment([i.year(),i.month(),i.date(),i.hours(),f.minTimeGap*Math.ceil(i.minutes()/f.minTimeGap)]),!(!e||i&&p.helper.dateDiff(e,i,t)>0||n&&p.helper.dateDiff(n,e,t)>0)},dateInRange:function(e,t,i){if(!t&&!i){var n=p.get.startDate();t=n&&f.minDate?moment([Math.max(n,f.minDate)]):n||f.minDate,i=f.maxDate}t=t&&moment([t.year(),t.month(),t.date(),t.hours(),f.minTimeGap*Math.ceil(t.minutes()/f.minTimeGap)]);var o="time"===f.type;return e?t&&p.helper.dateDiff(e,t,"minute")>0?o?p.helper.mergeDateTime(e,t):t:i&&p.helper.dateDiff(i,e,"minute")>0?o?p.helper.mergeDateTime(e,i):i:e:e},mergeDateTime:function(e,t){return e&&t?moment([e.year(),e.month(),e.date(),t.hours(),t.minutes()]):t},isTodayButton:function(e){return e.text()===f.text.today}},setting:function(t,i){if(p.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,f,t);else{if(i===n)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],i):f[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(i===n)return p[t];p[t]=i}},debug:function(){!f.silent&&f.debug&&(f.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,f.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),p.verbose.apply(console,arguments)))},error:function(){f.silent||(p.error=Function.prototype.bind.call(console.error,console,f.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i;f.performance&&(i=(t=moment().valueOf())-(r||t),r=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:D,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=f.name+":",i=0;r=!1,clearTimeout(p.performance.timer),e.each(l,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(t,i,s){var a,r,l,c=A;return i=i||d,s=D||s,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,(function(i,o){var s=i!=a?o+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[s])&&i!=a)c=c[s];else{if(c[s]!==n)return r=c[s],!1;if(!e.isPlainObject(c[o])||i==a)return c[o]!==n?(r=c[o],!1):(p.error(C.method,t),!1);c=c[o]}}))),e.isFunction(r)?l=r.apply(s,i):r!==n&&(l=r),Array.isArray(o)?o.push(l):o!==n?o=[o,l]:l!==n&&(o=l),r}},u?(A===n&&p.initialize(),p.invoke(c)):(A!==n&&A.invoke("destroy"),p.initialize())})),o!==n?o:this},e.fn.calendar.settings={name:"Calendar",namespace:"calendar",silent:!1,debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,multiMonth:1,minTimeGap:5,showWeekNumbers:null,disabledDates:[],disabledDaysOfWeek:[],enabledDates:[],eventDates:[],centuryBreak:60,currentCentury:2e3,selectAdjacentDays:!1,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM",weekNo:"Week"},formatter:{header:function(e,t,i){return"year"===t?i.formatter.yearHeader(e,i):"month"===t?i.formatter.monthHeader(e,i):"day"===t?i.formatter.dayHeader(e,i):"hour"===t?i.formatter.hourHeader(e,i):i.formatter.minuteHeader(e,i)},yearHeader:function(e,t){var i=10*Math.ceil(e.year()/10);return i-9+" - "+(i+2)},monthHeader:function(e,t){return e.year()},dayHeader:function(e,t){return t.text.months[e.month()]+" "+e.year()},hourHeader:function(e,t){return t.formatter.date(e,t)},minuteHeader:function(e,t){return t.formatter.date(e,t)},dayColumnHeader:function(e,t){return t.text.days[e]},datetime:function(e,t){if(!e)return"";var i="time"===t.type?"":t.formatter.date(e,t),n=t.type.indexOf("time")<0?"":t.formatter.time(e,t,!1);return i+("datetime"===t.type?" ":"")+n},date:function(e,t){if(!e)return"";var i=e.date(),n=t.text.months[e.month()],o=e.year();return"year"===t.type?o:"month"===t.type?n+" "+o:(t.monthFirst?n+" "+i:i+" "+n)+", "+o},time:function(e,t,i){if(!e)return"";var n=e.hours(),o=e.minutes(),s="";return t.ampm&&(s=" "+(n<12?t.text.am:t.text.pm),n=0===n?12:n>12?n-12:n),n+":"+(o<10?"0":"")+o+s},today:function(e){return"date"===e.type?e.text.today:e.text.now},cell:function(e,t,i){}},parser:{date:function(t,i){if(t instanceof Object)return t;if(!t)return null;if(0===(t=(""+t).trim().toLowerCase()).length)return null;t=i.monthFirst?t:t.replace(/[\/\-\.]/g,"/").replace(/([0-9]+)\/([0-9]+)/,"$2/$1");var o,s,a,r=moment(t);if(!isNaN(r.date()))return r;var l,c,u,d=-1,h=-1,p=-1,f=-1,m=-1,g=n,v="time"===i.type,b=i.type.indexOf("time")<0,y=t.split(i.regExp.dateWords),w=t.split(i.regExp.dateNumbers);if(!b)for(g=e.inArray(i.text.am.toLowerCase(),y)>=0||!(e.inArray(i.text.pm.toLowerCase(),y)>=0)&&n,o=0;o<w.length;o++)if((c=w[o]).indexOf(":")>=0){if(h<0||d<0)for(u=c.split(":"),a=0;a<Math.min(2,u.length);a++)s=parseInt(u[a]),isNaN(s)&&(s=0),0===a?h=s%24:d=s%60;w.splice(o,1)}if(!v){for(o=0;o<y.length;o++)if(!((l=y[o]).length<=0)){for(s=0;s<i.text.months.length;s++)if(i.text.months[s].substring(0,l.length).toLowerCase()===l){f=s+1;break}if(f>=0)break}for(o=0;o<w.length;o++)if(s=parseInt(w[o]),!isNaN(s)&&s>=i.centuryBreak&&o===w.length-1){s<=99&&(s+=i.currentCentury-100),m=s,w.splice(o,1);break}if(f<0)for(o=0;o<w.length;o++)if(a=o>1||i.monthFirst?o:1===o?0:1,s=parseInt(w[a]),!isNaN(s)&&1<=s&&s<=12){f=s,w.splice(a,1);break}for(o=0;o<w.length;o++)if(s=parseInt(w[o]),!isNaN(s)&&1<=s&&s<=31){p=s,w.splice(o,1);break}if(m<0)for(o=w.length-1;o>=0;o--)if(s=parseInt(w[o]),!isNaN(s)){s<=99&&(s+=i.currentCentury),m=s,w.splice(o,1);break}}if(!b){if(h<0)for(o=0;o<w.length;o++)if(s=parseInt(w[o]),!isNaN(s)&&0<=s&&s<=23){h=s,w.splice(o,1);break}if(d<0)for(o=0;o<w.length;o++)if(s=parseInt(w[o]),!isNaN(s)&&0<=s&&s<=59){d=s,w.splice(o,1);break}}if(d<0&&h<0&&p<0&&f<0&&m<0)return null;d<0&&(d=0),h<0&&(h=0),p<0&&(p=1),f<0&&(f=1),m<0&&(m=moment().year()),g!==n&&(g?12===h&&(h=0):h<12&&(h+=12));var _=moment([m,f-1,p,h,d]);return _.month()===f-1&&_.year()===m||(_=moment([m,f,0,h,d])),isNaN(_.valueOf())?null:_}},onBeforeChange:function(e,t,i){return!0},onChange:function(e,t,i){},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},onSelect:function(e,t){},isDisabled:function(e,t){return!1},selector:{popup:".ui.popup",input:"input",activator:"input",append:".inline.field,.inline.fields"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",grid:"ui equal width grid",column:"column",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",weekCell:"disabled",adjacentCell:"adjacent",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",minDate:"minDate",maxDate:"maxDate",mode:"mode",type:"type",monthOffset:"monthOffset",message:"message",class:"class"},eventClass:"blue"}}(jQuery,window,document),function(e,t,i,n){"use strict";e.isFunction=e.isFunction||function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.popup=function(o){var s,a=e(this),r=e(i),l=e(t),c=e("body"),u=a.selector||"",d="ontouchstart"in i.documentElement?"touchstart":"click",h=(new Date).getTime(),p=[],f=o,m="string"==typeof f,g=[].slice.call(arguments,1);return a.each((function(){var a,v,b,y,w,_,C=e.isPlainObject(o)?e.extend(!0,{},e.fn.popup.settings,o):e.extend({},e.fn.popup.settings),x=C.selector,S=C.className,k=C.error,T=C.metadata,E=C.namespace,$="."+C.namespace,D="module-"+E,A=e(this),I=e(C.context),O=e(C.scrollContext),R=e(C.boundary),P=C.target?e(C.target):A,z=0,L=!1,M=!1,N=this,j=A.data(D);_={initialize:function(){_.debug("Initializing",A),_.createID(),_.bind.events(),!_.exists()&&C.preserve&&_.create(),C.observeChanges&&_.observeChanges(),_.instantiate()},instantiate:function(){_.verbose("Storing instance",_),j=_,A.data(D,j)},observeChanges:function(){"MutationObserver"in t&&((b=new MutationObserver(_.event.documentChanged)).observe(i,{childList:!0,subtree:!0}),_.debug("Setting up mutation observer",b))},refresh:function(){C.popup?a=e(C.popup).eq(0):C.inline&&(a=P.nextAll(x.popup).eq(0),C.popup=a),C.popup?(a.addClass(S.loading),v=_.get.offsetParent(),a.removeClass(S.loading),C.movePopup&&_.has.popup()&&_.get.offsetParent(a)[0]!==v[0]&&(_.debug("Moving popup to the same offset parent as target"),a.detach().appendTo(v))):v=C.inline?_.get.offsetParent(P):_.has.popup()?_.get.offsetParent(a):c,v.is("html")&&v[0]!==c[0]&&(_.debug("Setting page as offset parent"),v=c),_.get.variation()&&_.set.variation()},reposition:function(){_.refresh(),_.set.position()},destroy:function(){_.debug("Destroying previous module"),b&&b.disconnect(),a&&!C.preserve&&_.removePopup(),clearTimeout(_.hideTimer),clearTimeout(_.showTimer),_.unbind.close(),_.unbind.events(),A.removeData(D)},event:{start:function(t){var i=e.isPlainObject(C.delay)?C.delay.show:C.delay;clearTimeout(_.hideTimer),(!M||M&&C.addTouchEvents)&&(_.showTimer=setTimeout(_.show,i))},end:function(){var t=e.isPlainObject(C.delay)?C.delay.hide:C.delay;clearTimeout(_.showTimer),_.hideTimer=setTimeout(_.hide,t)},touchstart:function(e){M=!0,C.addTouchEvents&&_.show()},resize:function(){_.is.visible()&&_.set.position()},documentChanged:function(t){[].forEach.call(t,(function(t){t.removedNodes&&[].forEach.call(t.removedNodes,(function(t){(t==N||0<e(t).find(N).length)&&(_.debug("Element removed from DOM, tearing down events"),_.destroy())}))}))},hideGracefully:function(t){var n=e(t.target),o=e.contains(i.documentElement,t.target),s=0<n.closest(x.popup).length;t&&!s&&o?(_.debug("Click occurred outside popup hiding popup"),_.hide()):_.debug("Click was inside popup, keeping popup open")}},create:function(){var t=_.get.html(),i=_.get.title(),n=_.get.content();t||n||i?(_.debug("Creating pop-up html"),t=t||C.templates.popup({title:i,content:n}),a=e("<div/>").addClass(S.popup).data(T.activator,A).html(t),C.inline?(_.verbose("Inserting popup element inline",a),a.insertAfter(A)):(_.verbose("Appending popup element to body",a),a.appendTo(I)),_.refresh(),_.set.variation(),C.hoverable&&_.bind.popup(),C.onCreate.call(a,N)):C.popup?(e(C.popup).data(T.activator,A),_.verbose("Used popup specified in settings"),_.refresh(),C.hoverable&&_.bind.popup()):0!==P.next(x.popup).length?(_.verbose("Pre-existing popup found"),C.inline=!0,C.popup=P.next(x.popup).data(T.activator,A),_.refresh(),C.hoverable&&_.bind.popup()):_.debug("No content specified skipping display",N)},createID:function(){w=(Math.random().toString(16)+"000000000").substr(2,8),y="."+w,_.verbose("Creating unique id for element",w)},toggle:function(){_.debug("Toggling pop-up"),_.is.hidden()?(_.debug("Popup is hidden, showing pop-up"),_.unbind.close(),_.show()):(_.debug("Popup is visible, hiding pop-up"),_.hide())},show:function(e){if(e=e||function(){},_.debug("Showing pop-up",C.transition),_.is.hidden()&&(!_.is.active()||!_.is.dropdown())){if(_.exists()||_.create(),!1===C.onShow.call(a,N))return void _.debug("onShow callback returned false, cancelling popup animation");C.preserve||C.popup||_.refresh(),a&&_.set.position()&&(_.save.conditions(),C.exclusive&&_.hideAll(),_.animate.show(e))}},hide:function(e){if(e=e||function(){},_.is.visible()||_.is.animating()){if(!1===C.onHide.call(a,N))return void _.debug("onHide callback returned false, cancelling popup animation");_.remove.visible(),_.unbind.close(),_.restore.conditions(),_.animate.hide(e)}},hideAll:function(){e(x.popup).filter("."+S.popupVisible).each((function(){e(this).data(T.activator).popup("hide")}))},exists:function(){return!!a&&(C.inline||C.popup?_.has.popup():1<=a.closest(I).length)},removePopup:function(){_.has.popup()&&!C.popup&&(_.debug("Removing popup",a),a.remove(),a=n,C.onRemove.call(a,N))},save:{conditions:function(){_.cache={title:A.attr("title")},_.cache.title&&A.removeAttr("title"),_.verbose("Saving original attributes",_.cache.title)}},restore:{conditions:function(){return _.cache&&_.cache.title&&(A.attr("title",_.cache.title),_.verbose("Restoring original attributes",_.cache.title)),!0}},supports:{svg:function(){return"undefined"!=typeof SVGGraphicsElement}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},C.transition&&e.fn.transition!==n&&A.transition("is supported")?(_.set.visible(),a.transition({animation:C.transition+" in",queue:!1,debug:C.debug,verbose:C.verbose,duration:C.duration,onComplete:function(){_.bind.close(),t.call(a,N),C.onVisible.call(a,N)}})):_.error(k.noTransition)},hide:function(t){t=e.isFunction(t)?t:function(){},_.debug("Hiding pop-up"),C.transition&&e.fn.transition!==n&&A.transition("is supported")?a.transition({animation:C.transition+" out",queue:!1,duration:C.duration,debug:C.debug,verbose:C.verbose,onComplete:function(){_.reset(),t.call(a,N),C.onHidden.call(a,N)}}):_.error(k.noTransition)}},change:{content:function(e){a.html(e)}},get:{html:function(){return A.removeData(T.html),A.data(T.html)||C.html},title:function(){return A.removeData(T.title),A.data(T.title)||C.title},content:function(){return A.removeData(T.content),A.data(T.content)||C.content||A.attr("title")},variation:function(){return A.removeData(T.variation),A.data(T.variation)||C.variation},popup:function(){return a},popupOffset:function(){return a.offset()},calculations:function(){var e,i=_.get.offsetParent(a),n=P[0],o=R[0]==t,s=C.inline||C.popup&&C.movePopup?P.position():P.offset(),r=o?{top:0,left:0}:R.offset(),c={},u=o?{top:l.scrollTop(),left:l.scrollLeft()}:{top:0,left:0};if(c={target:{element:P[0],width:P.outerWidth(),height:P.outerHeight(),top:s.top,left:s.left,margin:{}},popup:{width:a.outerWidth(),height:a.outerHeight()},parent:{width:v.outerWidth(),height:v.outerHeight()},screen:{top:r.top,left:r.left,scroll:{top:u.top,left:u.left},width:R.width(),height:R.height()}},i.get(0)!==v.get(0)){var d=i.offset();c.target.top-=d.top,c.target.left-=d.left,c.parent.width=i.outerWidth(),c.parent.height=i.outerHeight()}return C.setFluidWidth&&_.is.fluid()&&(c.container={width:a.parent().outerWidth()},c.popup.width=c.container.width),c.target.margin.top=C.inline?parseInt(t.getComputedStyle(n).getPropertyValue("margin-top"),10):0,c.target.margin.left=C.inline?_.is.rtl()?parseInt(t.getComputedStyle(n).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(n).getPropertyValue("margin-left"),10):0,e=c.screen,c.boundary={top:e.top+e.scroll.top,bottom:e.top+e.scroll.top+e.height,left:e.left+e.scroll.left,right:e.left+e.scroll.left+e.width},c},id:function(){return w},startEvent:function(){return"hover"==C.on?"mouseenter":"focus"==C.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==C.on?"mouseleave":"focus"==C.on&&"blur"},distanceFromBoundary:function(e,t){var i,n,o={};return i=(t=t||_.get.calculations()).popup,n=t.boundary,e&&(o={top:e.top-n.top,left:e.left-n.left,right:n.right-(e.left+i.width),bottom:n.bottom-(e.top+i.height)},_.verbose("Distance from boundaries determined",e,o)),o},offsetParent:function(t){var i=(t!==n?t[0]:P[0]).parentNode,o=e(i);if(i)for(var s="none"===o.css("transform"),a="static"===o.css("position"),r=o.is("body");i&&!r&&a&&s;)i=i.parentNode,s="none"===(o=e(i)).css("transform"),a="static"===o.css("position"),r=o.is("body");return o&&0<o.length?o:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),i=t[0],n=t[1],o="top"==i||"bottom"==i,s=!1,a=!1,r=!1;return L||(_.verbose("All available positions available"),L=_.get.positions()),_.debug("Recording last position tried",e),L[e]=!0,"opposite"===C.prefer&&(r=(r=[{top:"bottom",bottom:"top",left:"right",right:"left"}[i],n]).join(" "),s=!0===L[r],_.debug("Trying opposite strategy",r)),"adjacent"===C.prefer&&o&&(r=(r=[i,{left:"center",center:"right",right:"left"}[n]]).join(" "),a=!0===L[r],_.debug("Trying adjacent strategy",r)),(a||s)&&(_.debug("Using backup position",r),r={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"}[e]),r}},set:{position:function(e,t){if(0!==P.length&&0!==a.length){var i,o,s,r,l,c,u,d;if(t=t||_.get.calculations(),e=e||A.data(T.position)||C.position,i=A.data(T.offset)||C.offset,o=C.distanceAway,s=t.target,r=t.popup,l=t.parent,_.should.centerArrow(t)&&(_.verbose("Adjusting offset to center arrow on small target element"),"top left"!=e&&"bottom left"!=e||(i+=s.width/2,i-=C.arrowPixelsFromEdge),"top right"!=e&&"bottom right"!=e||(i-=s.width/2,i+=C.arrowPixelsFromEdge)),0===s.width&&0===s.height&&!_.is.svg(s.element))return _.debug("Popup target is hidden, no action taken"),!1;switch(C.inline&&(_.debug("Adding margin to calculation",s.margin),"left center"==e||"right center"==e?(i+=s.margin.top,o+=-s.margin.left):"top left"==e||"top center"==e||"top right"==e?(i+=s.margin.left,o-=s.margin.top):(i+=s.margin.left,o+=s.margin.top)),_.debug("Determining popup position from calculations",e,t),_.is.rtl()&&(e=e.replace(/left|right/g,(function(e){return"left"==e?"right":"left"})),_.debug("RTL: Popup position updated",e)),z==C.maxSearchDepth&&"string"==typeof C.lastResort&&(e=C.lastResort),e){case"top left":c={top:"auto",bottom:l.height-s.top+o,left:s.left+i,right:"auto"};break;case"top center":c={bottom:l.height-s.top+o,left:s.left+s.width/2-r.width/2+i,top:"auto",right:"auto"};break;case"top right":c={bottom:l.height-s.top+o,right:l.width-s.left-s.width-i,top:"auto",left:"auto"};break;case"left center":c={top:s.top+s.height/2-r.height/2+i,right:l.width-s.left+o,left:"auto",bottom:"auto"};break;case"right center":c={top:s.top+s.height/2-r.height/2+i,left:s.left+s.width+o,bottom:"auto",right:"auto"};break;case"bottom left":c={top:s.top+s.height+o,left:s.left+i,bottom:"auto",right:"auto"};break;case"bottom center":c={top:s.top+s.height+o,left:s.left+s.width/2-r.width/2+i,bottom:"auto",right:"auto"};break;case"bottom right":c={top:s.top+s.height+o,right:l.width-s.left-s.width-i,left:"auto",bottom:"auto"}}if(c===n&&_.error(k.invalidPosition,e),_.debug("Calculated popup positioning values",c),a.css(c).removeClass(S.position).addClass(e).addClass(S.loading),u=_.get.popupOffset(),d=_.get.distanceFromBoundary(u,t),!C.forcePosition&&_.is.offstage(d,e)){if(_.debug("Position is outside viewport",e),z<C.maxSearchDepth)return z++,e=_.get.nextPosition(e),_.debug("Trying new position",e),!!a&&_.set.position(e,t);if(!C.lastResort)return _.debug("Popup could not find a position to display",a),_.error(k.cannotPlace,N),_.remove.attempts(),_.remove.loading(),_.reset(),C.onUnplaceable.call(a,N),!1;_.debug("No position found, showing with last position")}return _.debug("Position is on stage",e),_.remove.attempts(),_.remove.loading(),C.setFluidWidth&&_.is.fluid()&&_.set.fluidWidth(t),!0}_.error(k.notFound)},fluidWidth:function(e){e=e||_.get.calculations(),_.debug("Automatically setting element width to parent width",e.parent.width),a.css("width",e.container.width)},variation:function(e){(e=e||_.get.variation())&&_.has.popup()&&(_.verbose("Adding variation to popup",e),a.addClass(e))},visible:function(){A.addClass(S.visible)}},remove:{loading:function(){a.removeClass(S.loading)},variation:function(e){(e=e||_.get.variation())&&(_.verbose("Removing variation",e),a.removeClass(e))},visible:function(){A.removeClass(S.visible)},attempts:function(){_.verbose("Resetting all searched positions"),z=0,L=!1}},bind:{events:function(){_.debug("Binding popup events to module"),"click"==C.on&&A.on(d+$,_.toggle),"hover"==C.on&&A.on("touchstart"+$,_.event.touchstart),_.get.startEvent()&&A.on(_.get.startEvent()+$,_.event.start).on(_.get.endEvent()+$,_.event.end),C.target&&_.debug("Target set to element",P),l.on("resize"+y,_.event.resize)},popup:function(){_.verbose("Allowing hover events on popup to prevent closing"),a&&_.has.popup()&&a.on("mouseenter"+$,_.event.start).on("mouseleave"+$,_.event.end)},close:function(){(!0===C.hideOnScroll||"auto"==C.hideOnScroll&&"click"!=C.on)&&_.bind.closeOnScroll(),_.is.closable()?_.bind.clickaway():"hover"==C.on&&M&&_.bind.touchClose()},closeOnScroll:function(){_.verbose("Binding scroll close event to document"),O.one(_.get.scrollEvent()+y,_.event.hideGracefully)},touchClose:function(){_.verbose("Binding popup touchclose event to document"),r.on("touchstart"+y,(function(e){_.verbose("Touched away from popup"),_.event.hideGracefully.call(N,e)}))},clickaway:function(){_.verbose("Binding popup close event to document"),r.on(d+y,(function(e){_.verbose("Clicked away from popup"),_.event.hideGracefully.call(N,e)}))}},unbind:{events:function(){l.off(y),A.off($)},close:function(){r.off(y),O.off(y)}},has:{popup:function(){return a&&0<a.length}},should:{centerArrow:function(e){return!_.is.basic()&&e.target.width<=2*C.arrowPixelsFromEdge}},is:{closable:function(){return"auto"==C.closable?"hover"!=C.on:C.closable},offstage:function(t,i){var n=[];return e.each(t,(function(e,t){t<-C.jitter&&(_.debug("Position exceeds allowable distance from edge",e,t,i),n.push(e))})),0<n.length},svg:function(e){return _.supports.svg()&&e instanceof SVGGraphicsElement},basic:function(){return A.hasClass(S.basic)},active:function(){return A.hasClass(S.active)},animating:function(){return a!==n&&a.hasClass(S.animating)},fluid:function(){return a!==n&&a.hasClass(S.fluid)},visible:function(){return a!==n&&a.hasClass(S.popupVisible)},dropdown:function(){return A.hasClass(S.dropdown)},hidden:function(){return!_.is.visible()},rtl:function(){return"rtl"===A.attr("dir")||"rtl"===A.css("direction")}},reset:function(){_.remove.visible(),C.preserve?e.fn.transition!==n&&a.transition("remove transition"):_.removePopup()},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,C,t);else{if(i===n)return C[t];C[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,_,t);else{if(i===n)return _[t];_[t]=i}},debug:function(){!C.silent&&C.debug&&(C.performance?_.performance.log(arguments):(_.debug=Function.prototype.bind.call(console.info,console,C.name+":"),_.debug.apply(console,arguments)))},verbose:function(){!C.silent&&C.verbose&&C.debug&&(C.performance?_.performance.log(arguments):(_.verbose=Function.prototype.bind.call(console.info,console,C.name+":"),_.verbose.apply(console,arguments)))},error:function(){C.silent||(_.error=Function.prototype.bind.call(console.error,console,C.name+":"),_.error.apply(console,arguments))},performance:{log:function(e){var t,i;C.performance&&(i=(t=(new Date).getTime())-(h||t),h=t,p.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:N,"Execution Time":i})),clearTimeout(_.performance.timer),_.performance.timer=setTimeout(_.performance.display,500)},display:function(){var t=C.name+":",i=0;h=!1,clearTimeout(_.performance.timer),e.each(p,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",u&&(t+=" '"+u+"'"),(console.group!==n||console.table!==n)&&0<p.length&&(console.groupCollapsed(t),console.table?console.table(p):e.each(p,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),p=[]}},invoke:function(t,i,o){var a,r,l,c=j;return i=i||g,o=N||o,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,(function(i,o){var s=i!=a?o+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[s])&&i!=a)c=c[s];else{if(c[s]!==n)return r=c[s],!1;if(!e.isPlainObject(c[o])||i==a)return c[o]!==n&&(r=c[o]),!1;c=c[o]}}))),e.isFunction(r)?l=r.apply(o,i):r!==n&&(l=r),Array.isArray(s)?s.push(l):s!==n?s=[s,l]:l!==n&&(s=l),r}},m?(j===n&&_.initialize(),_.invoke(f)):(j!==n&&j.invoke("destroy"),_.initialize())})),s!==n?s:this},e.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:t,addTouchEvents:!0,position:"top left",forcePosition:!1,variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:t,prefer:"opposite",lastResort:!1,arrowPixelsFromEdge:20,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",basic:"basic",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible",popupVisible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,(function(e){return t[e]})):e},popup:function(t){var i="",o=e.fn.popup.settings.templates.escape;return _typeof(t)!==n&&(_typeof(t.title)!==n&&t.title&&(t.title=o(t.title),i+='<div class="header">'+t.title+"</div>"),_typeof(t.content)!==n&&t.content&&(t.content=o(t.content),i+='<div class="content">'+t.content+"</div>")),i}}}}(jQuery,window,document),function(e,t,i,n){"use strict";e.isFunction=e.isFunction||function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.transition=function(){var t,o=e(this),s=o.selector||"",a=(new Date).getTime(),r=[],l=arguments,c=l[0],u=[].slice.call(arguments,1),d="string"==typeof c;return o.each((function(h){var p,f,m,g,v,b,y,w,_,C=e(this),x=this;(_={initialize:function(){p=_.get.settings.apply(x,l),g=p.className,m=p.error,v=p.metadata,w="."+p.namespace,y="module-"+p.namespace,f=C.data(y)||_,b=_.get.animationEndEvent(),!1===(d=d&&_.invoke(c))&&(_.verbose("Converted arguments into settings object",p),p.interval?_.delay(p.animate):_.animate(),_.instantiate())},instantiate:function(){_.verbose("Storing instance of module",_),f=_,C.data(y,f)},destroy:function(){_.verbose("Destroying previous module for",x),C.removeData(y)},refresh:function(){_.verbose("Refreshing display type on next animation"),delete _.displayType},forceRepaint:function(){_.verbose("Forcing element repaint");var e=C.parent(),t=C.next();0===t.length?C.detach().appendTo(e):C.detach().insertBefore(t)},repaint:function(){_.verbose("Repainting element"),x.offsetWidth},delay:function(e){var t,i=_.get.animationDirection();i=i||(_.can.transition()?_.get.direction():"static"),e=e!==n?e:p.interval,t="auto"==p.reverse&&i==g.outward||1==p.reverse?(o.length-h)*p.interval:h*p.interval,_.debug("Delaying animation by",t),setTimeout(_.animate,t)},animate:function(e){if(p=e||p,!_.is.supported())return _.error(m.support),!1;if(_.debug("Preparing animation",p.animation),_.is.animating()){if(p.queue)return!p.allowRepeats&&_.has.direction()&&_.is.occurring()&&!0!==_.queuing?_.debug("Animation is currently occurring, preventing queueing same animation",p.animation):_.queue(p.animation),!1;if(!p.allowRepeats&&_.is.occurring())return _.debug("Animation is already occurring, will not execute repeated animation",p.animation),!1;_.debug("New animation started, completing previous early",p.animation),f.complete()}_.can.animate()?_.set.animating(p.animation):_.error(m.noAnimation,p.animation,x)},reset:function(){_.debug("Resetting animation to beginning conditions"),_.remove.animationCallbacks(),_.restore.conditions(),_.remove.animating()},queue:function(e){_.debug("Queueing animation of",e),_.queuing=!0,C.one(b+".queue"+w,(function(){_.queuing=!1,_.repaint(),_.animate.apply(this,p)}))},complete:function(e){e&&e.target===x&&e.stopPropagation(),_.debug("Animation complete",p.animation),_.remove.completeCallback(),_.remove.failSafe(),_.is.looping()||(_.is.outward()?(_.verbose("Animation is outward, hiding element"),_.restore.conditions(),_.hide()):_.is.inward()?(_.verbose("Animation is outward, showing element"),_.restore.conditions(),_.show()):(_.verbose("Static animation completed"),_.restore.conditions(),p.onComplete.call(x)))},force:{visible:function(){var e=C.attr("style"),t=_.get.userStyle(e),i=_.get.displayType(),n=t+"display: "+i+" !important;",o=C[0].style.display;return!i||"none"===o&&p.skipInlineHidden||C[0].tagName.match(/(script|link|style)/i)?(_.remove.transition(),!1):(_.verbose("Overriding default display to show element",i),C.attr("style",n),!0)},hidden:function(){var e=C.attr("style"),t=C.css("display"),i=e===n||""===e;"none"===t||_.is.hidden()?i&&C.removeAttr("style"):(_.verbose("Overriding default display to hide element"),C.css("display","none"))}},has:{direction:function(t){var i=!1;return"string"==typeof(t=t||p.animation)&&(t=t.split(" "),e.each(t,(function(e,t){t!==g.inward&&t!==g.outward||(i=!0)}))),i},inlineDisplay:function(){var e=C.attr("style")||"";return Array.isArray(e.match(/display.*?;/,""))}},set:{animating:function(e){_.remove.completeCallback(),e=e||p.animation;var t=_.get.animationClass(e);_.save.animation(t),_.force.visible()&&(_.remove.hidden(),_.remove.direction(),_.start.animation(t))},duration:function(e,t){!(t="number"==typeof(t=t||p.duration)?t+"ms":t)&&0!==t||(_.verbose("Setting animation duration",t),C.css({"animation-duration":t}))},direction:function(e){(e=e||_.get.direction())==g.inward?_.set.inward():_.set.outward()},looping:function(){_.debug("Transition set to loop"),C.addClass(g.looping)},hidden:function(){C.addClass(g.transition).addClass(g.hidden)},inward:function(){_.debug("Setting direction to inward"),C.removeClass(g.outward).addClass(g.inward)},outward:function(){_.debug("Setting direction to outward"),C.removeClass(g.inward).addClass(g.outward)},visible:function(){C.addClass(g.transition).addClass(g.visible)}},start:{animation:function(e){e=e||_.get.animationClass(),_.debug("Starting tween",e),C.addClass(e).one(b+".complete"+w,_.complete),p.useFailSafe&&_.add.failSafe(),_.set.duration(p.duration),p.onStart.call(x)}},save:{animation:function(e){_.cache||(_.cache={}),_.cache.animation=e},displayType:function(e){"none"!==e&&C.data(v.displayType,e)},transitionExists:function(t,i){e.fn.transition.exists[t]=i,_.verbose("Saving existence of transition",t,i)}},restore:{conditions:function(){var e=_.get.currentAnimation();e&&(C.removeClass(e),_.verbose("Removing animation class",_.cache)),_.remove.duration()}},add:{failSafe:function(){var e=_.get.duration();_.timer=setTimeout((function(){C.triggerHandler(b)}),e+p.failSafeDelay),_.verbose("Adding fail safe timer",_.timer)}},remove:{animating:function(){C.removeClass(g.animating)},animationCallbacks:function(){_.remove.queueCallback(),_.remove.completeCallback()},queueCallback:function(){C.off(".queue"+w)},completeCallback:function(){C.off(".complete"+w)},display:function(){C.css("display","")},direction:function(){C.removeClass(g.inward).removeClass(g.outward)},duration:function(){C.css("animation-duration","")},failSafe:function(){_.verbose("Removing fail safe timer",_.timer),_.timer&&clearTimeout(_.timer)},hidden:function(){C.removeClass(g.hidden)},visible:function(){C.removeClass(g.visible)},looping:function(){_.debug("Transitions are no longer looping"),_.is.looping()&&(_.reset(),C.removeClass(g.looping))},transition:function(){C.removeClass(g.transition).removeClass(g.visible).removeClass(g.hidden)}},get:{settings:function(t,i,n){return"object"==_typeof(t)?e.extend(!0,{},e.fn.transition.settings,t):"function"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,onComplete:n,duration:i}):"string"==typeof i||"number"==typeof i?e.extend({},e.fn.transition.settings,{animation:t,duration:i}):"object"==_typeof(i)?e.extend({},e.fn.transition.settings,i,{animation:t}):"function"==typeof i?e.extend({},e.fn.transition.settings,{animation:t,onComplete:i}):e.extend({},e.fn.transition.settings,{animation:t})},animationClass:function(e){var t=e||p.animation,i=_.can.transition()&&!_.has.direction()?_.get.direction()+" ":"";return g.animating+" "+g.transition+" "+i+t},currentAnimation:function(){return!(!_.cache||_.cache.animation===n)&&_.cache.animation},currentDirection:function(){return _.is.inward()?g.inward:g.outward},direction:function(){return _.is.hidden()||!_.is.visible()?g.inward:g.outward},animationDirection:function(t){var i;return"string"==typeof(t=t||p.animation)&&(t=t.split(" "),e.each(t,(function(e,t){t===g.inward?i=g.inward:t===g.outward&&(i=g.outward)}))),i||!1},duration:function(e){return!1===(e=e||p.duration)&&(e=C.css("animation-duration")||0),"string"==typeof e?-1<e.indexOf("ms")?parseFloat(e):1e3*parseFloat(e):e},displayType:function(e){if(e=e===n||e,p.displayType)return p.displayType;if(e&&C.data(v.displayType)===n){var t=C.css("display");""===t||"none"===t?_.can.transition(!0):_.save.displayType(t)}return C.data(v.displayType)},userStyle:function(e){return(e=e||C.attr("style")||"").replace(/display.*?;/,"")},transitionExists:function(t){return e.fn.transition.exists[t]},animationStartEvent:function(){var e,t=i.createElement("div"),o={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in o)if(t.style[e]!==n)return o[e];return!1},animationEndEvent:function(){var e,t=i.createElement("div"),o={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in o)if(t.style[e]!==n)return o[e];return!1}},can:{transition:function(t){var i,o,s,a,r,l,c=p.animation,u=_.get.transitionExists(c),d=_.get.displayType(!1);if(u===n||t){if(_.verbose("Determining whether animation exists"),i=C.attr("class"),o=C.prop("tagName"),a=(s=e("<"+o+" />").addClass(i).insertAfter(C)).addClass(c).removeClass(g.inward).removeClass(g.outward).addClass(g.animating).addClass(g.transition).css("animationName"),r=s.addClass(g.inward).css("animationName"),d||(d=s.attr("class",i).removeAttr("style").removeClass(g.hidden).removeClass(g.visible).show().css("display"),_.verbose("Determining final display state",d),_.save.displayType(d)),s.remove(),a!=r)_.debug("Direction exists for animation",c),l=!0;else{if("none"==a||!a)return void _.debug("No animation defined in css",c);_.debug("Static animation found",c,d),l=!1}_.save.transitionExists(c,l)}return u!==n?u:l},animate:function(){return _.can.transition()!==n}},is:{animating:function(){return C.hasClass(g.animating)},inward:function(){return C.hasClass(g.inward)},outward:function(){return C.hasClass(g.outward)},looping:function(){return C.hasClass(g.looping)},occurring:function(e){return e="."+(e=e||p.animation).replace(" ","."),0<C.filter(e).length},visible:function(){return C.is(":visible")},hidden:function(){return"hidden"===C.css("visibility")},supported:function(){return!1!==b}},hide:function(){_.verbose("Hiding element"),_.is.animating()&&_.reset(),x.blur(),_.remove.display(),_.remove.visible(),e.isFunction(p.onBeforeHide)?p.onBeforeHide.call(x,(function(){_.hideNow()})):_.hideNow()},hideNow:function(){_.set.hidden(),_.force.hidden(),p.onHide.call(x),p.onComplete.call(x)},show:function(e){_.verbose("Showing element",e),_.force.visible()&&(_.remove.hidden(),_.set.visible(),p.onShow.call(x),p.onComplete.call(x))},toggle:function(){_.is.visible()?_.hide():_.show()},stop:function(){_.debug("Stopping current animation"),C.triggerHandler(b)},stopAll:function(){_.debug("Stopping all animation"),_.remove.queueCallback(),C.triggerHandler(b)},clear:{queue:function(){_.debug("Clearing animation queue"),_.remove.queueCallback()}},enable:function(){_.verbose("Starting animation"),C.removeClass(g.disabled)},disable:function(){_.debug("Stopping animation"),C.addClass(g.disabled)},setting:function(t,i){if(_.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(i===n)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,_,t);else{if(i===n)return _[t];_[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?_.performance.log(arguments):(_.debug=Function.prototype.bind.call(console.info,console,p.name+":"),_.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?_.performance.log(arguments):(_.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),_.verbose.apply(console,arguments)))},error:function(){p.silent||(_.error=Function.prototype.bind.call(console.error,console,p.name+":"),_.error.apply(console,arguments))},performance:{log:function(e){var t,i;p.performance&&(i=(t=(new Date).getTime())-(a||t),a=t,r.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:x,"Execution Time":i})),clearTimeout(_.performance.timer),_.performance.timer=setTimeout(_.performance.display,500)},display:function(){var t=p.name+":",i=0;a=!1,clearTimeout(_.performance.timer),e.each(r,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",s&&(t+=" '"+s+"'"),1<o.length&&(t+=" ("+o.length+")"),(console.group!==n||console.table!==n)&&0<r.length&&(console.groupCollapsed(t),console.table?console.table(r):e.each(r,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),r=[]}},invoke:function(i,o,s){var a,r,l,c=f;return o=o||u,s=x||s,"string"==typeof i&&c!==n&&(i=i.split(/[\. ]/),a=i.length-1,e.each(i,(function(t,o){var s=t!=a?o+i[t+1].charAt(0).toUpperCase()+i[t+1].slice(1):i;if(e.isPlainObject(c[s])&&t!=a)c=c[s];else{if(c[s]!==n)return r=c[s],!1;if(!e.isPlainObject(c[o])||t==a)return c[o]!==n&&(r=c[o]),!1;c=c[o]}}))),e.isFunction(r)?l=r.apply(s,o):r!==n&&(l=r),Array.isArray(t)?t.push(l):t!==n?t=[t,l]:l!==n&&(t=l),r!==n&&r}}).initialize()})),t!==n?t:this},e.fn.transition.exists={},e.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,skipInlineHidden:!1,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dropdown=function(o){var s,a=e(this),r=e(i),l=a.selector||"",c="ontouchstart"in i.documentElement,u=(new Date).getTime(),d=[],h=o,p="string"==typeof h,f=[].slice.call(arguments,1);return a.each((function(m){var g,v,b,y,w,_,C,x,S=e.isPlainObject(o)?e.extend(!0,{},e.fn.dropdown.settings,o):e.extend({},e.fn.dropdown.settings),k=S.className,T=S.message,E=S.fields,$=S.keys,D=S.metadata,A=S.namespace,I=S.regExp,O=S.selector,R=S.error,P=S.templates,z="."+A,L="module-"+A,M=e(this),N=e(S.context),j=M.find(O.text),q=M.find(O.search),F=M.find(O.sizer),H=M.find(O.input),U=M.find(O.icon),B=0<M.prev().find(O.text).length?M.prev().find(O.text):M.prev(),W=M.children(O.menu),V=W.find(O.item),G=!1,Q=!1,X=!1,Y=this,K=M.data(L);x={initialize:function(){x.debug("Initializing dropdown",S),x.is.alreadySetup()?x.setup.reference():(x.setup.layout(),S.values&&x.change.values(S.values),x.refreshData(),x.save.defaults(),x.restore.selected(),x.create.id(),x.bind.events(),x.observeChanges(),x.instantiate())},instantiate:function(){x.verbose("Storing instance of dropdown",x),K=x,M.data(L,x)},destroy:function(){x.verbose("Destroying previous dropdown",M),x.remove.tabbable(),M.off(z).removeData(L),W.off(z),r.off(y),x.disconnect.menuObserver(),x.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in t&&(_=new MutationObserver(x.event.select.mutation),C=new MutationObserver(x.event.menu.mutation),x.debug("Setting up mutation observer",_,C),x.observe.select(),x.observe.menu())},disconnect:{menuObserver:function(){C&&C.disconnect()},selectObserver:function(){_&&_.disconnect()}},observe:{select:function(){x.has.input()&&_.observe(M[0],{childList:!0,subtree:!0})},menu:function(){x.has.menu()&&C.observe(W[0],{childList:!0,subtree:!0})}},create:{id:function(){w=(Math.random().toString(16)+"000000000").substr(2,8),y="."+w,x.verbose("Creating unique id for element",w)},userChoice:function(t){var i,o,s;return!!(t=t||x.get.userValues())&&(t=e.isArray(t)?t:[t],e.each(t,(function(t,a){!1===x.get.item(a)&&(s=S.templates.addition(x.add.variables(T.addResult,a)),o=e("<div />").html(s).attr("data-"+D.value,a).attr("data-"+D.text,a).addClass(k.addition).addClass(k.item),S.hideAdditions&&o.addClass(k.hidden),i=i===n?o:i.add(o),x.verbose("Creating user choices for value",a,o))})),i)},userLabels:function(t){var i=x.get.userValues();i&&(x.debug("Adding user labels",i),e.each(i,(function(e,t){x.verbose("Adding custom user value"),x.add.label(t,t)})))},menu:function(){W=e("<div />").addClass(k.menu).appendTo(M)},sizer:function(){F=e("<span />").addClass(k.sizer).insertAfter(q)}},search:function(e){e=e!==n?e:x.get.query(),x.verbose("Searching for query",e),x.has.minCharacters(e)?x.filter(e):x.hide()},select:{firstUnfiltered:function(){x.verbose("Selecting first non-filtered element"),x.remove.selectedItem(),V.not(O.unselectable).not(O.addition+O.hidden).eq(0).addClass(k.selected)},nextAvailable:function(e){var t=(e=e.eq(0)).nextAll(O.item).not(O.unselectable).eq(0),i=e.prevAll(O.item).not(O.unselectable).eq(0);0<t.length?(x.verbose("Moving selection to",t),t.addClass(k.selected)):(x.verbose("Moving selection to",i),i.addClass(k.selected))}},setup:{api:function(){var e={debug:S.debug,urlData:{value:x.get.value(),query:x.get.query()},on:!1};x.verbose("First request, initializing API"),M.api(e)},layout:function(){M.is("select")&&(x.setup.select(),x.setup.returnedObject()),x.has.menu()||x.create.menu(),x.is.search()&&!x.has.search()&&(x.verbose("Adding search input"),q=e("<input />").addClass(k.search).prop("autocomplete","off").insertBefore(j)),x.is.multiple()&&x.is.searchSelection()&&!x.has.sizer()&&x.create.sizer(),S.allowTab&&x.set.tabbable()},select:function(){var t=x.get.selectValues();x.debug("Dropdown initialized on a select",t),M.is("select")&&(H=M),0<H.parent(O.dropdown).length?(x.debug("UI dropdown already exists. Creating dropdown menu only"),M=H.closest(O.dropdown),x.has.menu()||x.create.menu(),W=M.children(O.menu),x.setup.menu(t)):(x.debug("Creating entire dropdown from select"),M=e("<div />").attr("class",H.attr("class")).addClass(k.selection).addClass(k.dropdown).html(P.dropdown(t)).insertBefore(H),H.hasClass(k.multiple)&&!1===H.prop("multiple")&&(x.error(R.missingMultiple),H.prop("multiple",!0)),H.is("[multiple]")&&x.set.multiple(),H.prop("disabled")&&(x.debug("Disabling dropdown"),M.addClass(k.disabled)),H.removeAttr("class").detach().prependTo(M)),x.refresh()},menu:function(e){W.html(P.menu(e,E)),V=W.find(O.item)},reference:function(){x.debug("Dropdown behavior was called on select, replacing with closest dropdown"),M=M.parent(O.dropdown),K=M.data(L),Y=M.get(0),x.refresh(),x.setup.returnedObject()},returnedObject:function(){var e=a.slice(0,m),t=a.slice(m+1);a=e.add(M).add(t)}},refresh:function(){x.refreshSelectors(),x.refreshData()},refreshItems:function(){V=W.find(O.item)},refreshSelectors:function(){x.verbose("Refreshing selector cache"),j=M.find(O.text),q=M.find(O.search),H=M.find(O.input),U=M.find(O.icon),B=0<M.prev().find(O.text).length?M.prev().find(O.text):M.prev(),W=M.children(O.menu),V=W.find(O.item)},refreshData:function(){x.verbose("Refreshing cached metadata"),V.removeData(D.text).removeData(D.value)},clearData:function(){x.verbose("Clearing metadata"),V.removeData(D.text).removeData(D.value),M.removeData(D.defaultText).removeData(D.defaultValue).removeData(D.placeholderText)},toggle:function(){x.verbose("Toggling menu visibility"),x.is.active()?x.hide():x.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},!x.can.show()&&x.is.remote()&&(x.debug("No API results retrieved, searching before show"),x.queryRemote(x.get.query(),x.show)),x.can.show()&&!x.is.active()){if(x.debug("Showing dropdown"),!x.has.message()||x.has.maxSelections()||x.has.allResultsFiltered()||x.remove.message(),x.is.allFiltered())return!0;!1!==S.onShow.call(Y)&&x.animate.show((function(){x.can.click()&&x.bind.intent(),x.has.menuSearch()&&x.focusSearch(),x.set.visible(),t.call(Y)}))}},hide:function(t){t=e.isFunction(t)?t:function(){},x.is.active()&&!x.is.animatingOutward()&&(x.debug("Hiding dropdown"),!1!==S.onHide.call(Y)&&x.animate.hide((function(){x.remove.visible(),t.call(Y)})))},hideOthers:function(){x.verbose("Finding other dropdowns to hide"),a.not(M).has(O.menu+"."+k.visible).dropdown("hide")},hideMenu:function(){x.verbose("Hiding menu  instantaneously"),x.remove.active(),x.remove.visible(),W.transition("hide")},hideSubMenus:function(){var e=W.children(O.item).find(O.menu);x.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){c&&x.bind.touchEvents(),x.bind.keyboardEvents(),x.bind.inputEvents(),x.bind.mouseEvents()},touchEvents:function(){x.debug("Touch device detected binding additional touch events"),x.is.searchSelection()||x.is.single()&&M.on("touchstart"+z,x.event.test.toggle),W.on("touchstart"+z,O.item,x.event.item.mouseenter)},keyboardEvents:function(){x.verbose("Binding keyboard events"),M.on("keydown"+z,x.event.keydown),x.has.search()&&M.on(x.get.inputEvent()+z,O.search,x.event.input),x.is.multiple()&&r.on("keydown"+y,x.event.document.keydown)},inputEvents:function(){x.verbose("Binding input change events"),M.on("change"+z,O.input,x.event.change)},mouseEvents:function(){x.verbose("Binding mouse events"),x.is.multiple()&&M.on("click"+z,O.label,x.event.label.click).on("click"+z,O.remove,x.event.remove.click),x.is.searchSelection()?(M.on("mousedown"+z,x.event.mousedown).on("mouseup"+z,x.event.mouseup).on("mousedown"+z,O.menu,x.event.menu.mousedown).on("mouseup"+z,O.menu,x.event.menu.mouseup).on("click"+z,O.icon,x.event.icon.click).on("focus"+z,O.search,x.event.search.focus).on("click"+z,O.search,x.event.search.focus).on("blur"+z,O.search,x.event.search.blur).on("click"+z,O.text,x.event.text.focus),x.is.multiple()&&M.on("click"+z,x.event.click)):("click"==S.on?M.on("click"+z,x.event.test.toggle):"hover"==S.on?M.on("mouseenter"+z,x.delay.show).on("mouseleave"+z,x.delay.hide):M.on(S.on+z,x.toggle),M.on("click"+z,O.icon,x.event.icon.click).on("mousedown"+z,x.event.mousedown).on("mouseup"+z,x.event.mouseup).on("focus"+z,x.event.focus),x.has.menuSearch()?M.on("blur"+z,O.search,x.event.search.blur):M.on("blur"+z,x.event.blur)),W.on("mouseenter"+z,O.item,x.event.item.mouseenter).on("mouseleave"+z,O.item,x.event.item.mouseleave).on("click"+z,O.item,x.event.item.click)},intent:function(){x.verbose("Binding hide intent event to document"),c&&r.on("touchstart"+y,x.event.test.touch).on("touchmove"+y,x.event.test.touch),r.on("click"+y,x.event.test.hide)}},unbind:{intent:function(){x.verbose("Removing hide intent event from document"),c&&r.off("touchstart"+y).off("touchmove"+y),r.off("click"+y)}},filter:function(e){var t=e!==n?e:x.get.query(),i=function(){x.is.multiple()&&x.filterActive(),(e||!e&&0==x.get.activeItem().length)&&x.select.firstUnfiltered(),x.has.allResultsFiltered()?S.onNoResults.call(Y,t)?S.allowAdditions?S.hideAdditions&&(x.verbose("User addition with no menu, setting empty style"),x.set.empty(),x.hideMenu()):(x.verbose("All items filtered, showing message",t),x.add.message(T.noResults)):(x.verbose("All items filtered, hiding dropdown",t),x.hideMenu()):(x.remove.empty(),x.remove.message()),S.allowAdditions&&x.add.userSuggestion(e),x.is.searchSelection()&&x.can.show()&&x.is.focusedOnSearch()&&x.show()};S.useLabels&&x.has.maxSelections()||(S.apiSettings?x.can.useAPI()?x.queryRemote(t,(function(){S.filterRemoteData&&x.filterItems(t),i()})):x.error(R.noAPI):(x.filterItems(t),i()))},queryRemote:function(t,i){var n={errorDuration:!1,cache:"local",throttle:S.throttle,urlData:{query:t},onError:function(){x.add.message(T.serverError),i()},onFailure:function(){x.add.message(T.serverError),i()},onSuccess:function(t){var n=t[E.remoteValues];e.isArray(n)&&0<n.length?(x.remove.message(),x.setup.menu({values:t[E.remoteValues]})):x.add.message(T.noResults),i()}};M.api("get request")||x.setup.api(),n=e.extend(!0,{},n,S.apiSettings),M.api("setting",n).api("query")},filterItems:function(t){var i=t!==n?t:x.get.query(),o=null,s=x.escape.string(i),a=new RegExp("^"+s,"igm");x.has.query()&&(o=[],x.verbose("Searching for matching values",i),V.each((function(){var t,n,s=e(this);if("both"==S.match||"text"==S.match){if(-1!==(t=String(x.get.choiceText(s,!1))).search(a))return o.push(this),!0;if("exact"===S.fullTextSearch&&x.exactSearch(i,t))return o.push(this),!0;if(!0===S.fullTextSearch&&x.fuzzySearch(i,t))return o.push(this),!0}if("both"==S.match||"value"==S.match){if(-1!==(n=String(x.get.choiceValue(s,t))).search(a))return o.push(this),!0;if("exact"===S.fullTextSearch&&x.exactSearch(i,n))return o.push(this),!0;if(!0===S.fullTextSearch&&x.fuzzySearch(i,n))return o.push(this),!0}}))),x.debug("Showing only matched items",i),x.remove.filteredItem(),o&&V.not(o).addClass(k.filtered)},fuzzySearch:function(e,t){var i=t.length,n=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),i<n)return!1;if(n===i)return e===t;e:for(var o=0,s=0;o<n;o++){for(var a=e.charCodeAt(o);s<i;)if(t.charCodeAt(s++)===a)continue e;return!1}return!0},exactSearch:function(e,t){return e=e.toLowerCase(),-1<(t=t.toLowerCase()).indexOf(e)},filterActive:function(){S.useLabels&&V.filter("."+k.active).addClass(k.filtered)},focusSearch:function(e){x.has.search()&&!x.is.focusedOnSearch()&&(e?(M.off("focus"+z,O.search),q.focus(),M.on("focus"+z,O.search,x.event.search.focus)):q.focus())},forceSelection:function(){var e=V.not(k.filtered).filter("."+k.selected).eq(0),t=V.not(k.filtered).filter("."+k.active).eq(0),i=0<e.length?e:t;if(0<i.length&&!x.is.multiple())return x.debug("Forcing partial selection to selected item",i),void x.event.item.click.call(i,{},!0);S.allowAdditions&&x.set.selected(x.get.query()),x.remove.searchTerm()},change:{values:function(t){S.allowAdditions||x.clear(),x.debug("Creating dropdown with specified values",t),x.setup.menu({values:t}),e.each(t,(function(e,t){if(1==t.selected)return x.debug("Setting initial selection to",t.value),x.set.selected(t.value),!0}))}},event:{change:function(){X||(x.debug("Input changed, updating selection"),x.set.selected())},focus:function(){S.showOnFocus&&!G&&x.is.hidden()&&!v&&x.show()},blur:function(e){v=i.activeElement===this,G||v||(x.remove.activeLabel(),x.hide())},mousedown:function(){x.is.searchSelection()?b=!0:G=!0},mouseup:function(){x.is.searchSelection()?b=!1:G=!1},click:function(t){e(t.target).is(M)&&(x.is.focusedOnSearch()?x.show():x.focusSearch())},search:{focus:function(){G=!0,x.is.multiple()&&x.remove.activeLabel(),S.showOnFocus&&x.search()},blur:function(e){v=i.activeElement===this,x.is.searchSelection()&&!b&&(Q||v||(S.forceSelection&&x.forceSelection(),x.hide())),b=!1}},icon:{click:function(e){U.hasClass(k.clear)?x.clear():x.can.click()&&x.toggle()}},text:{focus:function(e){G=!0,x.focusSearch()}},input:function(e){(x.is.multiple()||x.is.searchSelection())&&x.set.filtered(),clearTimeout(x.timer),x.timer=setTimeout(x.search,S.delay.search)},label:{click:function(t){var i=e(this),n=M.find(O.label),o=n.filter("."+k.active),s=i.nextAll("."+k.active),a=i.prevAll("."+k.active),r=0<s.length?i.nextUntil(s).add(o).add(i):i.prevUntil(a).add(o).add(i);t.shiftKey?(o.removeClass(k.active),r.addClass(k.active)):t.ctrlKey?i.toggleClass(k.active):(o.removeClass(k.active),i.addClass(k.active)),S.onLabelSelect.apply(this,n.filter("."+k.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(k.active)?x.remove.activeLabels():x.remove.activeLabels(t)}},test:{toggle:function(e){var t=x.is.multiple()?x.show:x.toggle;x.is.bubbledLabelClick(e)||x.is.bubbledIconClick(e)||x.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){x.determine.eventOnElement(e,(function(){"touchstart"==e.type?x.timer=setTimeout((function(){x.hide()}),S.delay.touch):"touchmove"==e.type&&clearTimeout(x.timer)})),e.stopPropagation()},hide:function(e){x.determine.eventInModule(e,x.hide)}},select:{mutation:function(t){x.debug("<select> modified, recreating menu");var i=!1;e.each(t,(function(t,n){if(e(n.target).is("select")||e(n.addedNodes).is("select"))return i=!0})),i&&(x.disconnect.selectObserver(),x.refresh(),x.setup.select(),x.set.selected(),x.observe.select())}},menu:{mutation:function(t){var i=t[0],n=i.addedNodes?e(i.addedNodes[0]):e(!1),o=i.removedNodes?e(i.removedNodes[0]):e(!1),s=n.add(o),a=s.is(O.addition)||0<s.closest(O.addition).length,r=s.is(O.message)||0<s.closest(O.message).length;a||r?(x.debug("Updating item selector cache"),x.refreshItems()):(x.debug("Menu modified, updating selector cache"),x.refresh())},mousedown:function(){Q=!0},mouseup:function(){Q=!1}},item:{mouseenter:function(t){var i=e(t.target),n=e(this),o=n.children(O.menu),s=n.siblings(O.item).children(O.menu),a=0<o.length;!(0<o.find(i).length)&&a&&(clearTimeout(x.itemTimer),x.itemTimer=setTimeout((function(){x.verbose("Showing sub-menu",o),e.each(s,(function(){x.animate.hide(!1,e(this))})),x.animate.show(!1,o)}),S.delay.show),t.preventDefault())},mouseleave:function(t){var i=e(this).children(O.menu);0<i.length&&(clearTimeout(x.itemTimer),x.itemTimer=setTimeout((function(){x.verbose("Hiding sub-menu",i),x.animate.hide(!1,i)}),S.delay.hide))},click:function(t,n){var o=e(this),s=e(t?t.target:""),a=o.find(O.menu),r=x.get.choiceText(o),l=x.get.choiceValue(o,r),c=0<a.length,u=0<a.find(s).length;x.has.menuSearch()&&e(i.activeElement).blur(),u||c&&!S.allowCategorySelection||(x.is.searchSelection()&&(S.allowAdditions&&x.remove.userAddition(),x.remove.searchTerm(),x.is.focusedOnSearch()||1==n||x.focusSearch(!0)),S.useLabels||(x.remove.filteredItem(),x.set.scrollPosition(o)),x.determine.selectAction.call(this,r,l))}},document:{keydown:function(e){var t=e.which;if(x.is.inObject(t,$)){var i=M.find(O.label),n=i.filter("."+k.active),o=(n.data(D.value),i.index(n)),s=i.length,a=0<n.length,r=1<n.length,l=0===o,c=o+1==s,u=x.is.searchSelection(),d=x.is.focusedOnSearch(),h=x.is.focused(),p=d&&0===x.get.caretPosition();if(u&&!a&&!d)return;t==$.leftArrow?!h&&!p||a?a&&(e.shiftKey?x.verbose("Adding previous label to selection"):(x.verbose("Selecting previous label"),i.removeClass(k.active)),l&&!r?n.addClass(k.active):n.prev(O.siblingLabel).addClass(k.active).end(),e.preventDefault()):(x.verbose("Selecting previous label"),i.last().addClass(k.active)):t==$.rightArrow?(h&&!a&&i.first().addClass(k.active),a&&(e.shiftKey?x.verbose("Adding next label to selection"):(x.verbose("Selecting next label"),i.removeClass(k.active)),c?u?d?i.removeClass(k.active):x.focusSearch():r?n.next(O.siblingLabel).addClass(k.active):n.addClass(k.active):n.next(O.siblingLabel).addClass(k.active),e.preventDefault())):t==$.deleteKey||t==$.backspace?a?(x.verbose("Removing active labels"),c&&u&&!d&&x.focusSearch(),n.last().next(O.siblingLabel).addClass(k.active),x.remove.activeLabels(n),e.preventDefault()):p&&!a&&t==$.backspace&&(x.verbose("Removing last label on input backspace"),n=i.last().addClass(k.active),x.remove.activeLabels(n)):n.removeClass(k.active)}}},keydown:function(e){var t=e.which;if(x.is.inObject(t,$)){var i,n=V.not(O.unselectable).filter("."+k.selected).eq(0),o=W.children("."+k.active).eq(0),s=0<n.length?n:o,a=0<s.length?s.siblings(":not(."+k.filtered+")").addBack():W.children(":not(."+k.filtered+")"),r=s.children(O.menu),l=s.closest(O.menu),c=l.hasClass(k.visible)||l.hasClass(k.animating)||0<l.parent(O.menu).length,u=0<r.length,d=0<s.length,h=0<s.not(O.unselectable).length,p=t==$.delimiter&&S.allowAdditions&&x.is.multiple();if(S.allowAdditions&&S.hideAdditions&&(t==$.enter||p)&&h&&(x.verbose("Selecting item from keyboard shortcut",s),x.event.item.click.call(s,e),x.is.searchSelection()&&x.remove.searchTerm()),x.is.visible()){if((t==$.enter||p)&&(t==$.enter&&d&&u&&!S.allowCategorySelection?(x.verbose("Pressed enter on unselectable category, opening sub menu"),t=$.rightArrow):h&&(x.verbose("Selecting item from keyboard shortcut",s),x.event.item.click.call(s,e),x.is.searchSelection()&&x.remove.searchTerm()),e.preventDefault()),d&&(t==$.leftArrow&&l[0]!==W[0]&&(x.verbose("Left key pressed, closing sub-menu"),x.animate.hide(!1,l),s.removeClass(k.selected),l.closest(O.item).addClass(k.selected),e.preventDefault()),t==$.rightArrow&&u&&(x.verbose("Right key pressed, opening sub-menu"),x.animate.show(!1,r),s.removeClass(k.selected),r.find(O.item).eq(0).addClass(k.selected),e.preventDefault())),t==$.upArrow){if(i=d&&c?s.prevAll(O.item+":not("+O.unselectable+")").eq(0):V.eq(0),a.index(i)<0)return x.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();x.verbose("Up key pressed, changing active item"),s.removeClass(k.selected),i.addClass(k.selected),x.set.scrollPosition(i),S.selectOnKeydown&&x.is.single()&&x.set.selectedItem(i),e.preventDefault()}if(t==$.downArrow){if(0===(i=d&&c?i=s.nextAll(O.item+":not("+O.unselectable+")").eq(0):V.eq(0)).length)return x.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();x.verbose("Down key pressed, changing active item"),V.removeClass(k.selected),i.addClass(k.selected),x.set.scrollPosition(i),S.selectOnKeydown&&x.is.single()&&x.set.selectedItem(i),e.preventDefault()}t==$.pageUp&&(x.scrollPage("up"),e.preventDefault()),t==$.pageDown&&(x.scrollPage("down"),e.preventDefault()),t==$.escape&&(x.verbose("Escape key pressed, closing dropdown"),x.hide())}else p&&e.preventDefault(),t!=$.downArrow||x.is.visible()||(x.verbose("Down key pressed, showing dropdown"),x.show(),e.preventDefault())}else x.has.search()||x.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e=i.createEvent("HTMLEvents"),t=H[0];t&&(x.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(t,i){x.verbose("Determining action",S.action),e.isFunction(x.action[S.action])?(x.verbose("Triggering preset action",S.action,t,i),x.action[S.action].call(Y,t,i,this)):e.isFunction(S.action)?(x.verbose("Triggering user action",S.action,t,i),S.action.call(Y,t,i,this)):x.error(R.action,S.action)},eventInModule:function(t,n){var o=e(t.target),s=0<o.closest(i.documentElement).length,a=0<o.closest(M).length;return n=e.isFunction(n)?n:function(){},s&&!a?(x.verbose("Triggering event",n),n(),!0):(x.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,n){var o=e(t.target),s=o.closest(O.siblingLabel),a=i.body.contains(t.target),r=0===M.find(s).length,l=0===o.closest(W).length;return n=e.isFunction(n)?n:function(){},a&&r&&l?(x.verbose("Triggering event",n),n(),!0):(x.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,i,o){if(i=i!==n?i:t,x.can.activate(e(o))){if(x.set.selected(i,e(o)),x.is.multiple()&&!x.is.allFiltered())return;x.hideAndClear()}},select:function(t,i,o){if(i=i!==n?i:t,x.can.activate(e(o))){if(x.set.value(i,t,e(o)),x.is.multiple()&&!x.is.allFiltered())return;x.hideAndClear()}},combo:function(t,i,o){i=i!==n?i:t,x.set.selected(i,e(o)),x.hideAndClear()},hide:function(t,i,n){x.set.value(i,t,e(n)),x.hideAndClear()}},get:{id:function(){return w},defaultText:function(){return M.data(D.defaultText)},defaultValue:function(){return M.data(D.defaultValue)},placeholderText:function(){return"auto"!=S.placeholder&&"string"==typeof S.placeholder?S.placeholder:M.data(D.placeholderText)||""},text:function(){return j.text()},query:function(){return e.trim(q.val())},searchWidth:function(e){return e=e!==n?e:q.val(),F.text(e),Math.ceil(F.width()+1)},selectionCount:function(){var t=x.get.values();return x.is.multiple()?e.isArray(t)?t.length:0:""!==x.get.value()?1:0},transition:function(e){return"auto"==S.transition?x.is.upward(e)?"slide up":"slide down":S.transition},userValues:function(){var t=x.get.values();return!!t&&(t=e.isArray(t)?t:[t],e.grep(t,(function(e){return!1===x.get.item(e)})))},uniqueArray:function(t){return e.grep(t,(function(i,n){return e.inArray(i,t)===n}))},caretPosition:function(){var e,t,n=q.get(0);return"selectionStart"in n?n.selectionStart:i.selection?(n.focus(),t=(e=i.selection.createRange()).text.length,e.moveStart("character",-n.value.length),e.text.length-t):void 0},value:function(){var t=0<H.length?H.val():M.data(D.value),i=e.isArray(t)&&1===t.length&&""===t[0];return t===n||i?"":t},values:function(){var e=x.get.value();return""===e?"":!x.has.selectInput()&&x.is.multiple()?"string"==typeof e?e.split(S.delimiter):"":e},remoteValues:function(){var t=x.get.values(),i=!1;return t&&("string"==typeof t&&(t=[t]),e.each(t,(function(e,t){var n=x.read.remoteData(t);x.verbose("Restoring value from session data",n,t),n&&(i||(i={}),i[t]=n)}))),i},choiceText:function(t,i){if(i=i!==n?i:S.preserveHTML,t)return 0<t.find(O.menu).length&&(x.verbose("Retrieving text of element with sub-menu"),(t=t.clone()).find(O.menu).remove(),t.find(O.menuIcon).remove()),t.data(D.text)!==n?t.data(D.text):i?e.trim(t.html()):e.trim(t.text())},choiceValue:function(t,i){return i=i||x.get.choiceText(t),!!t&&(t.data(D.value)!==n?String(t.data(D.value)):"string"==typeof i?e.trim(i.toLowerCase()):String(i))},inputEvent:function(){var e=q[0];return!!e&&(e.oninput!==n?"input":e.onpropertychange!==n?"propertychange":"keyup")},selectValues:function(){var t={values:[]};return M.find("option").each((function(){var i=e(this),o=i.html(),s=i.attr("disabled"),a=i.attr("value")!==n?i.attr("value"):o;"auto"===S.placeholder&&""===a?t.placeholder=o:t.values.push({name:o,value:a,disabled:s})})),S.placeholder&&"auto"!==S.placeholder&&(x.debug("Setting placeholder value to",S.placeholder),t.placeholder=S.placeholder),S.sortSelect?(t.values.sort((function(e,t){return e.name>t.name?1:-1})),x.debug("Retrieved and sorted values from select",t)):x.debug("Retrieved values from select",t),t},activeItem:function(){return V.filter("."+k.active)},selectedItem:function(){var e=V.not(O.unselectable).filter("."+k.selected);return 0<e.length?e:V.eq(0)},itemWithAdditions:function(e){var t=x.get.item(e),i=x.create.userChoice(e);return i&&0<i.length&&(t=0<t.length?t.add(i):i),t},item:function(t,i){var o,s,a=!1;return t=t!==n?t:x.get.values()!==n?x.get.values():x.get.text(),o=s?0<t.length:t!==n&&null!==t,s=x.is.multiple()&&e.isArray(t),i=""===t||0===t||i||!1,o&&V.each((function(){var o=e(this),r=x.get.choiceText(o),l=x.get.choiceValue(o,r);if(null!==l&&l!==n)if(s)-1===e.inArray(String(l),t)&&-1===e.inArray(r,t)||(a=a?a.add(o):o);else if(i){if(x.verbose("Ambiguous dropdown value using strict type check",o,t),l===t||r===t)return a=o,!0}else if(String(l)==String(t)||r==t)return x.verbose("Found select item by value",l,t),a=o,!0})),a}},check:{maxSelections:function(e){return!S.maxSelections||((e=e!==n?e:x.get.selectionCount())>=S.maxSelections?(x.debug("Maximum selection count reached"),S.useLabels&&(V.addClass(k.filtered),x.add.message(T.maxSelections)),!0):(x.verbose("No longer at maximum selection count"),x.remove.message(),x.remove.filteredItem(),x.is.searchSelection()&&x.filterItems(),!1))}},restore:{defaults:function(){x.clear(),x.restore.defaultText(),x.restore.defaultValue()},defaultText:function(){var e=x.get.defaultText();e===x.get.placeholderText?(x.debug("Restoring default placeholder text",e),x.set.placeholderText(e)):(x.debug("Restoring default text",e),x.set.text(e))},placeholderText:function(){x.set.placeholderText()},defaultValue:function(){var e=x.get.defaultValue();e!==n&&(x.debug("Restoring default value",e),""!==e?(x.set.value(e),x.set.selected()):(x.remove.activeItem(),x.remove.selectedItem()))},labels:function(){S.allowAdditions&&(S.useLabels||(x.error(R.labels),S.useLabels=!0),x.debug("Restoring selected values"),x.create.userLabels()),x.check.maxSelections()},selected:function(){x.restore.values(),x.is.multiple()?(x.debug("Restoring previously selected values and labels"),x.restore.labels()):x.debug("Restoring previously selected values")},values:function(){x.set.initialLoad(),S.apiSettings&&S.saveRemoteData&&x.get.remoteValues()?x.restore.remoteValues():x.set.selected(),x.remove.initialLoad()},remoteValues:function(){var t=x.get.remoteValues();x.debug("Recreating selected from session data",t),t&&(x.is.single()?e.each(t,(function(e,t){x.set.text(t)})):e.each(t,(function(e,t){x.add.label(e,t)})))}},read:{remoteData:function(e){var i;if(t.Storage!==n)return(i=sessionStorage.getItem(e))!==n&&i;x.error(R.noStorage)}},save:{defaults:function(){x.save.defaultText(),x.save.placeholderText(),x.save.defaultValue()},defaultValue:function(){var e=x.get.value();x.verbose("Saving default value as",e),M.data(D.defaultValue,e)},defaultText:function(){var e=x.get.text();x.verbose("Saving default text as",e),M.data(D.defaultText,e)},placeholderText:function(){var e;!1!==S.placeholder&&j.hasClass(k.placeholder)&&(e=x.get.text(),x.verbose("Saving placeholder text as",e),M.data(D.placeholderText,e))},remoteData:function(e,i){t.Storage!==n?(x.verbose("Saving remote data to session storage",i,e),sessionStorage.setItem(i,e)):x.error(R.noStorage)}},clear:function(){x.is.multiple()&&S.useLabels?x.remove.labels():(x.remove.activeItem(),x.remove.selectedItem()),x.set.placeholderText(),x.clearValue()},clearValue:function(){x.set.value("")},scrollPage:function(e,t){var i,n,o=t||x.get.selectedItem(),s=o.closest(O.menu),a=s.outerHeight(),r=s.scrollTop(),l=V.eq(0).outerHeight(),c=Math.floor(a/l),u=(s.prop("scrollHeight"),"up"==e?r-l*c:r+l*c),d=V.not(O.unselectable);n="up"==e?d.index(o)-c:d.index(o)+c,0<(i=("up"==e?0<=n:n<d.length)?d.eq(n):"up"==e?d.first():d.last()).length&&(x.debug("Scrolling page",e,i),o.removeClass(k.selected),i.addClass(k.selected),S.selectOnKeydown&&x.is.single()&&x.set.selectedItem(i),s.scrollTop(u))},set:{filtered:function(){var e=x.is.multiple(),t=x.is.searchSelection(),i=e&&t,n=t?x.get.query():"",o="string"==typeof n&&0<n.length,s=x.get.searchWidth(),a=""!==n;e&&o&&(x.verbose("Adjusting input width",s,S.glyphWidth),q.css("width",s)),o||i&&a?(x.verbose("Hiding placeholder text"),j.addClass(k.filtered)):(!e||i&&!a)&&(x.verbose("Showing placeholder text"),j.removeClass(k.filtered))},empty:function(){M.addClass(k.empty)},loading:function(){M.addClass(k.loading)},placeholderText:function(e){e=e||x.get.placeholderText(),x.debug("Setting placeholder text",e),x.set.text(e),j.addClass(k.placeholder)},tabbable:function(){x.is.searchSelection()?(x.debug("Added tabindex to searchable dropdown"),q.val("").attr("tabindex",0),W.attr("tabindex",-1)):(x.debug("Added tabindex to dropdown"),M.attr("tabindex")===n&&(M.attr("tabindex",0),W.attr("tabindex",-1)))},initialLoad:function(){x.verbose("Setting initial load"),g=!0},activeItem:function(e){S.allowAdditions&&0<e.filter(O.addition).length?e.addClass(k.filtered):e.addClass(k.active)},partialSearch:function(e){var t=x.get.query().length;q.val(e.substr(0,t))},scrollPosition:function(e,t){var i,o,s,a,r,l;i=(e=e||x.get.selectedItem()).closest(O.menu),o=e&&0<e.length,t=t!==n&&t,e&&0<i.length&&o&&(e.position().top,i.addClass(k.loading),s=(a=i.scrollTop())-i.offset().top+e.offset().top,t||(l=a+i.height()<s+5,r=s-5<a),x.debug("Scrolling to active item",s),(t||r||l)&&i.scrollTop(s),i.removeClass(k.loading))},text:function(e){"select"!==S.action&&("combo"==S.action?(x.debug("Changing combo button text",e,B),S.preserveHTML?B.html(e):B.text(e)):(e!==x.get.placeholderText()&&j.removeClass(k.placeholder),x.debug("Changing text",e,j),j.removeClass(k.filtered),S.preserveHTML?j.html(e):j.text(e)))},selectedItem:function(e){var t=x.get.choiceValue(e),i=x.get.choiceText(e,!1),n=x.get.choiceText(e,!0);x.debug("Setting user selection to item",e),x.remove.activeItem(),x.set.partialSearch(i),x.set.activeItem(e),x.set.selected(t,e),x.set.text(n)},selectedLetter:function(t){var i,n=V.filter("."+k.selected),o=0<n.length&&x.has.firstLetter(n,t),s=!1;o&&(i=n.nextAll(V).eq(0),x.has.firstLetter(i,t)&&(s=i)),s||V.each((function(){if(x.has.firstLetter(e(this),t))return s=e(this),!1})),s&&(x.verbose("Scrolling to next value with letter",t),x.set.scrollPosition(s),n.removeClass(k.selected),s.addClass(k.selected),S.selectOnKeydown&&x.is.single()&&x.set.selectedItem(s))},direction:function(e){"auto"==S.direction?(x.remove.upward(),x.can.openDownward(e)?x.remove.upward(e):x.set.upward(e),x.is.leftward(e)||x.can.openRightward(e)||x.set.leftward(e)):"upward"==S.direction&&x.set.upward(e)},upward:function(e){(e||M).addClass(k.upward)},leftward:function(e){(e||W).addClass(k.leftward)},value:function(e,t,i){var o=x.escape.value(e),s=0<H.length,a=x.get.values(),r=e!==n?String(e):e;if(s){if(!S.allowReselection&&r==a&&(x.verbose("Skipping value update already same value",e,a),!x.is.initialLoad()))return;x.is.single()&&x.has.selectInput()&&x.can.extendSelect()&&(x.debug("Adding user option",e),x.add.optionValue(e)),x.debug("Updating input value",o,a),X=!0,H.val(o),!1===S.fireOnInit&&x.is.initialLoad()?x.debug("Input native change event ignored on initial load"):x.trigger.change(),X=!1}else x.verbose("Storing value in metadata",o,H),o!==a&&M.data(D.value,r);x.is.single()&&S.clearable&&(o?x.set.clearable():x.remove.clearable()),!1===S.fireOnInit&&x.is.initialLoad()?x.verbose("No callback on initial load",S.onChange):S.onChange.call(Y,e,t,i)},active:function(){M.addClass(k.active)},multiple:function(){M.addClass(k.multiple)},visible:function(){M.addClass(k.visible)},exactly:function(e,t){x.debug("Setting selected to exact values"),x.clear(),x.set.selected(e,t)},selected:function(t,i){var n=x.is.multiple();(i=S.allowAdditions?i||x.get.itemWithAdditions(t):i||x.get.item(t))&&(x.debug("Setting selected menu item to",i),x.is.multiple()&&x.remove.searchWidth(),x.is.single()?(x.remove.activeItem(),x.remove.selectedItem()):S.useLabels&&x.remove.selectedItem(),i.each((function(){var t=e(this),o=x.get.choiceText(t),s=x.get.choiceValue(t,o),a=t.hasClass(k.filtered),r=t.hasClass(k.active),l=t.hasClass(k.addition),c=n&&1==i.length;n?!r||l?(S.apiSettings&&S.saveRemoteData&&x.save.remoteData(o,s),S.useLabels?(x.add.label(s,o,c),x.add.value(s,o,t),x.set.activeItem(t),x.filterActive(),x.select.nextAvailable(i)):(x.add.value(s,o,t),x.set.text(x.add.variables(T.count)),x.set.activeItem(t))):a||(x.debug("Selected active value, removing label"),x.remove.selected(s)):(S.apiSettings&&S.saveRemoteData&&x.save.remoteData(o,s),x.set.text(o),x.set.value(s,o,t),t.addClass(k.active).addClass(k.selected))})))},clearable:function(){U.addClass(k.clear)}},add:{label:function(t,i,n){var o,s=x.is.searchSelection()?q:j,a=x.escape.value(t);S.ignoreCase&&(a=a.toLowerCase()),o=e("<a />").addClass(k.label).attr("data-"+D.value,a).html(P.label(a,i)),o=S.onLabelCreate.call(o,a,i),x.has.label(t)?x.debug("User selection already exists, skipping",a):(S.label.variation&&o.addClass(S.label.variation),!0===n?(x.debug("Animating in label",o),o.addClass(k.hidden).insertBefore(s).transition(S.label.transition,S.label.duration)):(x.debug("Adding selection label",o),o.insertBefore(s)))},message:function(t){var i=W.children(O.message),n=S.templates.message(x.add.variables(t));0<i.length?i.html(n):i=e("<div/>").html(n).addClass(k.message).appendTo(W)},optionValue:function(t){var i=x.escape.value(t);0<H.find('option[value="'+x.escape.string(i)+'"]').length||(x.disconnect.selectObserver(),x.is.single()&&(x.verbose("Removing previous user addition"),H.find("option."+k.addition).remove()),e("<option/>").prop("value",i).addClass(k.addition).html(t).appendTo(H),x.verbose("Adding user addition as an <option>",t),x.observe.select())},userSuggestion:function(e){var t,i=W.children(O.addition),n=x.get.item(e),o=n&&n.not(O.addition).length,s=0<i.length;S.useLabels&&x.has.maxSelections()||(""===e||o?i.remove():(s?(i.data(D.value,e).data(D.text,e).attr("data-"+D.value,e).attr("data-"+D.text,e).removeClass(k.filtered),S.hideAdditions||(t=S.templates.addition(x.add.variables(T.addResult,e)),i.html(t)),x.verbose("Replacing user suggestion with new value",i)):((i=x.create.userChoice(e)).prependTo(W),x.verbose("Adding item choice to menu corresponding with user choice addition",i)),S.hideAdditions&&!x.is.allFiltered()||i.addClass(k.selected).siblings().removeClass(k.selected),x.refreshItems()))},variables:function(e,t){var i,n,o=-1!==e.search("{count}"),s=-1!==e.search("{maxCount}"),a=-1!==e.search("{term}");return x.verbose("Adding templated variables to message",e),o&&(i=x.get.selectionCount(),e=e.replace("{count}",i)),s&&(i=x.get.selectionCount(),e=e.replace("{maxCount}",S.maxSelections)),a&&(n=t||x.get.query(),e=e.replace("{term}",n)),e},value:function(t,i,n){var o,s=x.get.values();x.has.value(t)?x.debug("Value already selected"):""!==t?(o=e.isArray(s)?(o=s.concat([t]),x.get.uniqueArray(o)):[t],x.has.selectInput()?x.can.extendSelect()&&(x.debug("Adding value to select",t,o,H),x.add.optionValue(t)):(o=o.join(S.delimiter),x.debug("Setting hidden input to delimited value",o,H)),!1===S.fireOnInit&&x.is.initialLoad()?x.verbose("Skipping onadd callback on initial load",S.onAdd):S.onAdd.call(Y,t,i,n),x.set.value(o,t,i,n),x.check.maxSelections()):x.debug("Cannot select blank values from multiselect")}},remove:{active:function(){M.removeClass(k.active)},activeLabel:function(){M.find(O.label).removeClass(k.active)},empty:function(){M.removeClass(k.empty)},loading:function(){M.removeClass(k.loading)},initialLoad:function(){g=!1},upward:function(e){(e||M).removeClass(k.upward)},leftward:function(e){(e||W).removeClass(k.leftward)},visible:function(){M.removeClass(k.visible)},activeItem:function(){V.removeClass(k.active)},filteredItem:function(){S.useLabels&&x.has.maxSelections()||(S.useLabels&&x.is.multiple()?V.not("."+k.active).removeClass(k.filtered):V.removeClass(k.filtered),x.remove.empty())},optionValue:function(e){var t=x.escape.value(e),i=H.find('option[value="'+x.escape.string(t)+'"]');0<i.length&&i.hasClass(k.addition)&&(_&&(_.disconnect(),x.verbose("Temporarily disconnecting mutation observer")),i.remove(),x.verbose("Removing user addition as an <option>",t),_&&_.observe(H[0],{childList:!0,subtree:!0}))},message:function(){W.children(O.message).remove()},searchWidth:function(){q.css("width","")},searchTerm:function(){x.verbose("Cleared search term"),q.val(""),x.set.filtered()},userAddition:function(){V.filter(O.addition).remove()},selected:function(t,i){if(!(i=S.allowAdditions?i||x.get.itemWithAdditions(t):i||x.get.item(t)))return!1;i.each((function(){var t=e(this),i=x.get.choiceText(t),n=x.get.choiceValue(t,i);x.is.multiple()?S.useLabels?(x.remove.value(n,i,t),x.remove.label(n)):(x.remove.value(n,i,t),0===x.get.selectionCount()?x.set.placeholderText():x.set.text(x.add.variables(T.count))):x.remove.value(n,i,t),t.removeClass(k.filtered).removeClass(k.active),S.useLabels&&t.removeClass(k.selected)}))},selectedItem:function(){V.removeClass(k.selected)},value:function(e,t,i){var n,o=x.get.values();x.has.selectInput()?(x.verbose("Input is <select> removing selected option",e),n=x.remove.arrayValue(e,o),x.remove.optionValue(e)):(x.verbose("Removing from delimited values",e),n=(n=x.remove.arrayValue(e,o)).join(S.delimiter)),!1===S.fireOnInit&&x.is.initialLoad()?x.verbose("No callback on initial load",S.onRemove):S.onRemove.call(Y,e,t,i),x.set.value(n,t,i),x.check.maxSelections()},arrayValue:function(t,i){return e.isArray(i)||(i=[i]),i=e.grep(i,(function(e){return t!=e})),x.verbose("Removed value from delimited string",t,i),i},label:function(e,t){var i=M.find(O.label).filter("[data-"+D.value+'="'+x.escape.string(e)+'"]');x.verbose("Removing label",i),i.remove()},activeLabels:function(e){e=e||M.find(O.label).filter("."+k.active),x.verbose("Removing active label selections",e),x.remove.labels(e)},labels:function(t){t=t||M.find(O.label),x.verbose("Removing labels",t),t.each((function(){var t=e(this),i=t.data(D.value),o=i!==n?String(i):i,s=x.is.userValue(o);!1!==S.onLabelRemove.call(t,i)?(x.remove.message(),s?(x.remove.value(o),x.remove.label(o)):x.remove.selected(o)):x.debug("Label remove callback cancelled removal")}))},tabbable:function(){x.is.searchSelection()?(x.debug("Searchable dropdown initialized"),q.removeAttr("tabindex")):(x.debug("Simple selection dropdown initialized"),M.removeAttr("tabindex")),W.removeAttr("tabindex")},clearable:function(){U.removeClass(k.clear)}},has:{menuSearch:function(){return x.has.search()&&0<q.closest(W).length},search:function(){return 0<q.length},sizer:function(){return 0<F.length},selectInput:function(){return H.is("select")},minCharacters:function(e){return!S.minCharacters||(e=String(e!==n?e:x.get.query())).length>=S.minCharacters},firstLetter:function(e,t){var i;return!(!e||0===e.length||"string"!=typeof t)&&(i=x.get.choiceText(e,!1),(t=t.toLowerCase())==String(i).charAt(0).toLowerCase())},input:function(){return 0<H.length},items:function(){return 0<V.length},menu:function(){return 0<W.length},message:function(){return 0!==W.children(O.message).length},label:function(e){var t=x.escape.value(e),i=M.find(O.label);return S.ignoreCase&&(t=t.toLowerCase()),0<i.filter("[data-"+D.value+'="'+x.escape.string(t)+'"]').length},maxSelections:function(){return S.maxSelections&&x.get.selectionCount()>=S.maxSelections},allResultsFiltered:function(){var e=V.not(O.addition);return e.filter(O.unselectable).length===e.length},userSuggestion:function(){return 0<W.children(O.addition).length},query:function(){return""!==x.get.query()},value:function(e){return S.ignoreCase?x.has.valueIgnoringCase(e):x.has.valueMatchingCase(e)},valueMatchingCase:function(t){var i=x.get.values();return!!(e.isArray(i)?i&&-1!==e.inArray(t,i):i==t)},valueIgnoringCase:function(t){var i=x.get.values(),n=!1;return e.isArray(i)||(i=[i]),e.each(i,(function(e,i){if(String(t).toLowerCase()==String(i).toLowerCase())return!(n=!0)})),n}},is:{active:function(){return M.hasClass(k.active)},animatingInward:function(){return W.transition("is inward")},animatingOutward:function(){return W.transition("is outward")},bubbledLabelClick:function(t){return e(t.target).is("select, input")&&0<M.closest("label").length},bubbledIconClick:function(t){return 0<e(t.target).closest(U).length},alreadySetup:function(){return M.is("select")&&M.parent(O.dropdown).data(L)!==n&&0===M.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):W.transition&&W.transition("is animating")},leftward:function(e){return(e||W).hasClass(k.leftward)},disabled:function(){return M.hasClass(k.disabled)},focused:function(){return i.activeElement===M[0]},focusedOnSearch:function(){return i.activeElement===q[0]},allFiltered:function(){return(x.is.multiple()||x.has.search())&&!(0==S.hideAdditions&&x.has.userSuggestion())&&!x.has.message()&&x.has.allResultsFiltered()},hidden:function(e){return!x.is.visible(e)},initialLoad:function(){return g},inObject:function(t,i){var n=!1;return e.each(i,(function(e,i){if(i==t)return n=!0})),n},multiple:function(){return M.hasClass(k.multiple)},remote:function(){return S.apiSettings&&x.can.useAPI()},single:function(){return!x.is.multiple()},selectMutation:function(t){var i=!1;return e.each(t,(function(t,n){if(n.target&&e(n.target).is("select"))return i=!0})),i},search:function(){return M.hasClass(k.search)},searchSelection:function(){return x.has.search()&&1===q.parent(O.dropdown).length},selection:function(){return M.hasClass(k.selection)},userValue:function(t){return-1!==e.inArray(t,x.get.userValues())},upward:function(e){return(e||M).hasClass(k.upward)},visible:function(e){return e?e.hasClass(k.visible):W.hasClass(k.visible)},verticallyScrollableContext:function(){var e=N.get(0)!==t&&N.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=N.get(0)!==t&&N.css("overflow-X");return"auto"==e||"scroll"==e}},can:{activate:function(e){return!!S.useLabels||!x.has.maxSelections()||!(!x.has.maxSelections()||!e.hasClass(k.active))},openDownward:function(e){var i,n,o,s=e||W;return s.addClass(k.loading),n={context:{offset:N.get(0)===t?{top:0,left:0}:N.offset(),scrollTop:N.scrollTop(),height:N.outerHeight()},menu:{offset:s.offset(),height:s.outerHeight()}},x.is.verticallyScrollableContext()&&(n.menu.offset.top+=n.context.scrollTop),o=(i={above:n.context.scrollTop<=n.menu.offset.top-n.context.offset.top-n.menu.height,below:n.context.scrollTop+n.context.height>=n.menu.offset.top-n.context.offset.top+n.menu.height}).below?(x.verbose("Dropdown can fit in context downward",i),!0):i.below||i.above?(x.verbose("Dropdown cannot fit below, opening upward",i),!1):(x.verbose("Dropdown cannot fit in either direction, favoring downward",i),!0),s.removeClass(k.loading),o},openRightward:function(e){var i,n,o=e||W,s=!0;return o.addClass(k.loading),n={context:{offset:N.get(0)===t?{top:0,left:0}:N.offset(),scrollLeft:N.scrollLeft(),width:N.outerWidth()},menu:{offset:o.offset(),width:o.outerWidth()}},x.is.horizontallyScrollableContext()&&(n.menu.offset.left+=n.context.scrollLeft),(i=n.menu.offset.left-n.context.offset.left+n.menu.width>=n.context.scrollLeft+n.context.width)&&(x.verbose("Dropdown cannot fit in context rightward",i),s=!1),o.removeClass(k.loading),s},click:function(){return c||"click"==S.on},extendSelect:function(){return S.allowAdditions||S.apiSettings},show:function(){return!x.is.disabled()&&(x.has.items()||x.has.message())},useAPI:function(){return e.fn.api!==n}},animate:{show:function(t,i){var o,s=i||W,a=i?function(){}:function(){x.hideSubMenus(),x.hideOthers(),x.set.active()};t=e.isFunction(t)?t:function(){},x.verbose("Doing menu show animation",s),x.set.direction(i),o=x.get.transition(i),x.is.selection()&&x.set.scrollPosition(x.get.selectedItem(),!0),(x.is.hidden(s)||x.is.animating(s))&&("none"==o?(a(),s.transition("show"),t.call(Y)):e.fn.transition!==n&&M.transition("is supported")?s.transition({animation:o+" in",debug:S.debug,verbose:S.verbose,duration:S.duration,queue:!0,onStart:a,onComplete:function(){t.call(Y)}}):x.error(R.noTransition,o))},hide:function(t,i){var o=i||W,s=(S.duration,i?function(){}:function(){x.can.click()&&x.unbind.intent(),x.remove.active()}),a=x.get.transition(i);t=e.isFunction(t)?t:function(){},(x.is.visible(o)||x.is.animating(o))&&(x.verbose("Doing menu hide animation",o),"none"==a?(s(),o.transition("hide"),t.call(Y)):e.fn.transition!==n&&M.transition("is supported")?o.transition({animation:a+" out",duration:S.duration,debug:S.debug,verbose:S.verbose,queue:!1,onStart:s,onComplete:function(){t.call(Y)}}):x.error(R.transition))}},hideAndClear:function(){x.remove.searchTerm(),x.has.maxSelections()||(x.has.search()?x.hide((function(){x.remove.filteredItem()})):x.hide())},delay:{show:function(){x.verbose("Delaying show event to ensure user intent"),clearTimeout(x.timer),x.timer=setTimeout(x.show,S.delay.show)},hide:function(){x.verbose("Delaying hide event to ensure user intent"),clearTimeout(x.timer),x.timer=setTimeout(x.hide,S.delay.hide)}},escape:{value:function(t){var i=e.isArray(t),n="string"==typeof t,o=!n&&!i,s=n&&-1!==t.search(I.quote),a=[];return o||!s?t:(x.debug("Encoding quote values for use in select",t),i?(e.each(t,(function(e,t){a.push(t.replace(I.quote,"&quot;"))})),a):t.replace(I.quote,"&quot;"))},string:function(e){return(e=String(e)).replace(I.escape,"\\$&")}},setting:function(t,i){if(x.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,S,t);else{if(i===n)return S[t];e.isPlainObject(S[t])?e.extend(!0,S[t],i):S[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(i===n)return x[t];x[t]=i}},debug:function(){!S.silent&&S.debug&&(S.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,S.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!S.silent&&S.verbose&&S.debug&&(S.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,S.name+":"),x.verbose.apply(console,arguments)))},error:function(){S.silent||(x.error=Function.prototype.bind.call(console.error,console,S.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,i;S.performance&&(i=(t=(new Date).getTime())-(u||t),u=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:Y,"Execution Time":i})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var t=S.name+":",i=0;u=!1,clearTimeout(x.performance.timer),e.each(d,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",l&&(t+=" '"+l+"'"),(console.group!==n||console.table!==n)&&0<d.length&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),d=[]}},invoke:function(t,i,o){var a,r,l,c=K;return i=i||f,o=Y||o,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,(function(i,o){var s=i!=a?o+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[s])&&i!=a)c=c[s];else{if(c[s]!==n)return r=c[s],!1;if(!e.isPlainObject(c[o])||i==a)return c[o]!==n?r=c[o]:x.error(R.method,t),!1;c=c[o]}}))),e.isFunction(r)?l=r.apply(o,i):r!==n&&(l=r),e.isArray(s)?s.push(l):s!==n?s=[s,l]:l!==n&&(s=l),r}},p?(K===n&&x.initialize(),x.invoke(h)):(K!==n&&K.invoke("destroy"),x.initialize())})),s!==n?s:a},e.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,clearable:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,ignoreCase:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,i){},onAdd:function(e,t,i){},onRemove:function(e,t,i){},onLabelSelect:function(e){},onLabelCreate:function(t,i){return e(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",clear:"clear",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var i=t.placeholder||!1,n=(t.values,"");return n+='<i class="dropdown icon"></i>',t.placeholder?n+='<div class="default text">'+i+"</div>":n+='<div class="text"></div>',n+='<div class="menu">',e.each(t.values,(function(e,t){n+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"})),n+="</div>"},menu:function(t,i){var n=t[i.values]||{},o="";return e.each(n,(function(e,t){var n=t[i.text]?'data-text="'+t[i.text]+'"':"",s=t[i.disabled]?"disabled ":"";o+='<div class="'+s+'item" data-value="'+t[i.value]+'"'+n+">",o+=t[i.name],o+="</div>"})),o},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(jQuery,window,document),function(){function e(t){var i=e.modules[t];if(!i)throw new Error('failed to require "'+t+'"');return"exports"in i||"function"!=typeof i.definition||(i.client=i.component=!0,i.definition.call(this,i.exports={},i),delete i.definition),i.exports}e.loader="component",e.helper={},e.helper.semVerSort=function(e,t){for(var i=e.version.split("."),n=t.version.split("."),o=0;o<i.length;++o){var s=parseInt(i[o],10),a=parseInt(n[o],10);if(s!==a)return s>a?1:-1;var r=i[o].substr((""+s).length),l=n[o].substr((""+a).length);if(""===r&&""!==l)return 1;if(""!==r&&""===l)return-1;if(""!==r&&""!==l)return r>l?1:-1}return 0},e.latest=function(t,i){function n(e){throw new Error('failed to find latest module of "'+e+'"')}var o=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;/(.*)~(.*)/.test(t)||n(t);for(var s=Object.keys(e.modules),a=[],r=[],l=0;l<s.length;l++){var c=s[l];if(new RegExp(t+"@").test(c)){var u=c.substr(t.length+1);null!=o.exec(c)?a.push({version:u,name:c}):r.push({version:u,name:c})}}if(0===a.concat(r).length&&n(t),a.length>0){var d=a.sort(e.helper.semVerSort).pop().name;return!0===i?d:e(d)}d=r.sort((function(e,t){return e.name>t.name}))[0].name;return!0===i?d:e(d)},e.modules={},e.register=function(t,i){e.modules[t]={definition:i}},e.define=function(t,i){e.modules[t]={exports:i}},e.register("abpetkov~transitionize@0.0.3",(function(e,t){function i(e,t){if(!(this instanceof i))return new i(e,t);this.element=e,this.props=t||{},this.init()}t.exports=i,i.prototype.isSafari=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},i.prototype.init=function(){var e=[];for(var t in this.props)e.push(t+" "+this.props[t]);this.element.style.transition=e.join(", "),this.isSafari()&&(this.element.style.webkitTransition=e.join(", "))}})),e.register("ftlabs~fastclick@v0.6.11",(function(e,t){function i(e){"use strict";var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return i.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return i.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return i.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return i.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return i.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return i.prototype.onTouchCancel.apply(n,arguments)},i.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,i.hijacked||i,n):o.call(e,t,i,n)},e.addEventListener=function(t,i,n){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):o.call(e,t,i,n)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",(function(e){t(e)}),!1),e.onclick=null))}i.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,i.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),i.prototype.deviceIsIOS4=i.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i.prototype.deviceIsIOSWithBadTarget=i.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),i.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},i.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},i.prototype.sendClick=function(e,t){"use strict";var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},i.prototype.determineEventType=function(e){"use strict";return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},i.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},i.prototype.updateScrollParent=function(e){"use strict";var t,i;if(!(t=e.fastClickScrollParent)||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},i.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},i.prototype.onTouchStart=function(e){"use strict";var t,i,n;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],this.deviceIsIOS){if((n=window.getSelection()).rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},i.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i},i.prototype.onTouchMove=function(e){"use strict";return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},i.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},i.prototype.onTouchEnd=function(e){"use strict";var t,i,n,o,s,a=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],(a=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||a).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(n=a.tagName.toLowerCase())){if(t=this.findControl(a)){if(this.focus(a),this.deviceIsAndroid)return!1;a=t}}else if(this.needsFocus(a))return e.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(a),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,e.preventDefault()),!1);return!(!this.deviceIsIOS||this.deviceIsIOS4||!(o=a.fastClickScrollParent)||o.fastClickLastScrollTop===o.scrollTop)||(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},i.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},i.prototype.onMouse=function(e){"use strict";return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},i.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},i.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},i.notNeeded=function(e){"use strict";var t,n;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i.prototype.deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===e.style.msTouchAction},i.attach=function(e){"use strict";return new i(e)},"undefined"!=typeof define&&define.amd?define((function(){"use strict";return i})):void 0!==t&&t.exports?(t.exports=i.attach,t.exports.FastClick=i):window.FastClick=i})),e.register("component~indexof@0.0.3",(function(e,t){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}})),e.register("component~classes@1.2.1",(function(t,i){var n=e("component~indexof@0.0.3"),o=/\s+/,s=Object.prototype.toString;function a(e){if(!e)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}i.exports=function(e){return new a(e)},a.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~n(t,e)||t.push(e),this.el.className=t.join(" "),this},a.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),i=n(t,e);return~i&&t.splice(i,1),this.el.className=t.join(" "),this},a.prototype.removeMatching=function(e){for(var t=this.array(),i=0;i<t.length;i++)e.test(t[i])&&this.remove(t[i]);return this},a.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},a.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,"").split(o);return""===e[0]&&e.shift(),e},a.prototype.has=a.prototype.contains=function(e){return this.list?this.list.contains(e):!!~n(this.array(),e)}})),e.register("component~event@0.1.4",(function(e,t){var i=window.addEventListener?"addEventListener":"attachEvent",n=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==i?"on":"";e.bind=function(e,t,n,s){return e[i](o+t,n,s||!1),n},e.unbind=function(e,t,i,s){return e[n](o+t,i,s||!1),i}})),e.register("component~query@0.0.3",(function(e,t){function i(e,t){return t.querySelector(e)}(e=t.exports=function(e,t){return i(e,t=t||document)}).all=function(e,t){return(t=t||document).querySelectorAll(e)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return i=t.one,e.all=t.all,e}})),e.register("component~matches-selector@0.1.5",(function(t,i){var n=e("component~query@0.0.3"),o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;i.exports=function(e,t){if(!e||1!==e.nodeType)return!1;if(s)return s.call(e,t);for(var i=n.all(t,e.parentNode),o=0;o<i.length;++o)if(i[o]==e)return!0;return!1}})),e.register("component~closest@0.1.4",(function(t,i){var n=e("component~matches-selector@0.1.5");i.exports=function(e,t,i,o){for(e=i?{parentNode:e}:e,o=o||document;(e=e.parentNode)&&e!==document;){if(n(e,t))return e;if(e===o)return}}})),e.register("component~delegate@0.2.3",(function(t,i){var n=e("component~closest@0.1.4"),o=e("component~event@0.1.4");t.bind=function(e,t,i,s,a){return o.bind(e,i,(function(i){var o=i.target||i.srcElement;i.delegateTarget=n(o,t,!0,e),i.delegateTarget&&s.call(e,i)}),a)},t.unbind=function(e,t,i,n){o.unbind(e,t,i,n)}})),e.register("component~events@1.0.9",(function(t,i){var n=e("component~event@0.1.4"),o=e("component~delegate@0.2.3");function s(e,t){if(!(this instanceof s))return new s(e,t);if(!e)throw new Error("element required");if(!t)throw new Error("object required");this.el=e,this.obj=t,this._events={}}function a(e){var t=e.split(/ +/);return{name:t.shift(),selector:t.join(" ")}}i.exports=s,s.prototype.sub=function(e,t,i){this._events[e]=this._events[e]||{},this._events[e][t]=i},s.prototype.bind=function(e,t){var i=a(e),s=this.el,r=this.obj,l=i.name,c=(t=t||"on"+l,[].slice.call(arguments,2));function u(){var e=[].slice.call(arguments).concat(c);r[t].apply(r,e)}return i.selector?u=o.bind(s,i.selector,l,u):n.bind(s,l,u),this.sub(l,t,u),u},s.prototype.unbind=function(e,t){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(e);var i=this._events[e];if(i){var o=i[t];o&&n.unbind(this.el,e,o)}},s.prototype.unbindAll=function(){for(var e in this._events)this.unbindAllOf(e)},s.prototype.unbindAllOf=function(e){var t=this._events[e];if(t)for(var i in t)this.unbind(e,i)}})),e.register("switchery",(function(t,i){var n=e("abpetkov~transitionize@0.0.3"),o=e("ftlabs~fastclick@v0.6.11"),s=e("component~classes@1.2.1"),a=e("component~events@1.0.9");i.exports=l;var r={color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#fff",jackSecondaryColor:null,className:"switchery",disabled:!1,disabledOpacity:.5,speed:"0.4s",size:"default"};function l(e,t){if(!(this instanceof l))return new l(e,t);for(var i in this.element=e,this.options=t||{},r)null==this.options[i]&&(this.options[i]=r[i]);null!=this.element&&"checkbox"==this.element.type&&this.init(),!0===this.isDisabled()&&this.disable()}l.prototype.hide=function(){this.element.style.display="none"},l.prototype.show=function(){var e=this.create();this.insertAfter(this.element,e)},l.prototype.create=function(){return this.switcher=document.createElement("span"),this.jack=document.createElement("small"),this.switcher.appendChild(this.jack),this.switcher.className=this.options.className,this.events=a(this.switcher,this),this.switcher},l.prototype.insertAfter=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},l.prototype.setPosition=function(e){var t=this.isChecked(),i=this.switcher,n=this.jack;e&&t?t=!1:e&&!t&&(t=!0),!0===t?(this.element.checked=!0,window.getComputedStyle?n.style.left=parseInt(window.getComputedStyle(i).width)-parseInt(window.getComputedStyle(n).width)+"px":n.style.left=parseInt(i.currentStyle.width)-parseInt(n.currentStyle.width)+"px",this.options.color&&this.colorize(),this.setSpeed()):(n.style.left=0,this.element.checked=!1,this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor,this.switcher.style.borderColor=this.options.secondaryColor,this.switcher.style.backgroundColor=this.options.secondaryColor!==r.secondaryColor?this.options.secondaryColor:"#fff",this.jack.style.backgroundColor=this.options.jackSecondaryColor!==this.options.jackColor?this.options.jackSecondaryColor:this.options.jackColor,this.setSpeed())},l.prototype.setSpeed=function(){var e={},t={"background-color":this.options.speed,left:this.options.speed.replace(/[a-z]/,"")/2+"s"};e=this.isChecked()?{border:this.options.speed,"box-shadow":this.options.speed,"background-color":3*this.options.speed.replace(/[a-z]/,"")+"s"}:{border:this.options.speed,"box-shadow":this.options.speed},n(this.switcher,e),n(this.jack,t)},l.prototype.setSize=function(){switch(this.options.size){case"small":s(this.switcher).add("switchery-small");break;case"large":s(this.switcher).add("switchery-large");break;default:s(this.switcher).add("switchery-default")}},l.prototype.colorize=function(){var e=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color,this.switcher.style.borderColor=this.options.color,this.switcher.style.boxShadow="inset 0 0 0 "+e+"px "+this.options.color,this.jack.style.backgroundColor=this.options.jackColor},l.prototype.handleOnchange=function(e){if(document.dispatchEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.element.dispatchEvent(t)}else this.element.fireEvent("onchange")},l.prototype.handleChange=function(){var e=this,t=this.element;t.addEventListener?t.addEventListener("change",(function(){e.setPosition()})):t.attachEvent("onchange",(function(){e.setPosition()}))},l.prototype.handleClick=function(){var e=this.switcher;o(e),this.events.bind("click","bindClick")},l.prototype.bindClick=function(){var e="label"!==this.element.parentNode.tagName.toLowerCase();this.setPosition(e),this.handleOnchange(this.element.checked)},l.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",!0)},l.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")},l.prototype.init=function(){this.hide(),this.show(),this.setSize(),this.setPosition(),this.markAsSwitched(),this.handleChange(),this.handleClick()},l.prototype.isChecked=function(){return this.element.checked},l.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly},l.prototype.destroy=function(){this.events.unbind()},l.prototype.enable=function(){this.options.disabled&&(this.options.disabled=!1),this.element.disabled&&(this.element.disabled=!1),this.element.readOnly&&(this.element.readOnly=!1),this.switcher.style.opacity=1,this.events.bind("click","bindClick")},l.prototype.disable=function(){this.options.disabled||(this.options.disabled=!0),this.element.disabled||(this.element.disabled=!0),this.element.readOnly||(this.element.readOnly=!0),this.switcher.style.opacity=this.options.disabledOpacity,this.destroy()}})),"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e("switchery"):"function"==typeof define&&define.amd?define("Switchery",[],(function(){return e("switchery")})):(this||window).Switchery=e("switchery")}(),function(e,t){"use strict";function i(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function n(e,t,i){var n,o;for(n in i)i.hasOwnProperty(n)&&(o=n.replace(/ |$/g,t.eventNamespace),e.bind(o,i[n]))}function o(e,t,i){n(e,i,{focus:function(){t.addClass(i.focusClass)},blur:function(){t.removeClass(i.focusClass),t.removeClass(i.activeClass)},mouseenter:function(){t.addClass(i.hoverClass)},mouseleave:function(){t.removeClass(i.hoverClass),t.removeClass(i.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(i.activeClass)},"mouseup touchend":function(){t.removeClass(i.activeClass)}})}function s(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function a(e,t,i){i?e.addClass(t):e.removeClass(t)}function r(e,t,i){var n="checked",o=t.is(":"+n);t.prop?t.prop(n,o):o?t.attr(n,n):t.removeAttr(n),a(e,i.checkedClass,o)}function l(e,t,i){a(e,i.disabledClass,t.is(":disabled"))}function c(e,t,i){switch(i){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function u(t,n,o){var s,a,r;return o||(o={}),o=e.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},o),s=e("<div />"),a=e("<span />"),n.autoHide&&t.is(":hidden")&&"none"===t.css("display")&&s.hide(),o.divClass&&s.addClass(o.divClass),n.wrapperClass&&s.addClass(n.wrapperClass),o.spanClass&&a.addClass(o.spanClass),r=i(t,"id"),n.useID&&r&&i(s,"id",n.idPrefix+"-"+r),o.spanHtml&&a.html(o.spanHtml),s=c(t,s,o.divWrap),a=c(t,a,o.spanWrap),l(s,t,n),{div:s,span:a}}function d(t,i){return i.wrapperClass?c(t,e("<span />").addClass(i.wrapperClass),"wrap"):null}function h(t){return t?e("<span />").text(t).html():""}function p(){return navigator.cpuClass&&!navigator.product}function f(e){var t;return!!e[0].multiple||!(!(t=i(e,"size"))||1>=t)}function m(){return!1}function g(e,t){var i="none";n(e,t,{"selectstart dragstart mousedown":m}),e.css({MozUserSelect:i,msUserSelect:i,webkitUserSelect:i,userSelect:i})}function v(e,t,i){var n=e.val();""===n?n=i.fileDefaultHtml:n=(n=n.split(/[\/\\]+/))[n.length-1],t.text(n)}function b(e,t,i){var n,o;for(n=[],e.each((function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])})),i();n.length;)(o=n.pop()).el.style[o.name]=o.old}function y(e,t){var i;(i=e.parents()).push(e[0]),b(i=i.not(":visible"),{visibility:"hidden",display:"block",position:"absolute"},t)}function w(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var _=!0,C=!1,x=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(e,t){var a,r,c,d,p;return r=t.submitDefaultHtml,e.is(":reset")&&(r=t.resetDefaultHtml),d=e.is("a, button")?function(){return e.html()||r}:function(){return h(i(e,"value"))||r},c=u(e,t,{divClass:t.buttonClass,spanHtml:d()}),a=c.div,o(e,a,t),p=!1,n(a,t,{"click touchend":function(){var t,n,o,s;p||e.is(":disabled")||(p=!0,e[0].dispatchEvent?((t=document.createEvent("MouseEvents")).initEvent("click",!0,!0),n=e[0].dispatchEvent(t),e.is("a")&&n&&(o=i(e,"target"),s=i(e,"href"),o&&"_self"!==o?window.open(s,o):document.location.href=s)):e.click(),p=!1)}}),g(a,t),{remove:function(){return a.after(e),a.remove(),e.unbind(t.eventNamespace),e},update:function(){s(a,t),l(a,e,t),e.detach(),c.span.html(d()).append(e)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var i,a,c;return i=u(e,t,{divClass:t.checkboxClass}),a=i.div,c=i.span,o(e,a,t),n(e,t,{"click touchend":function(){r(c,e,t)}}),r(c,e,t),{remove:w(e,t),update:function(){s(a,t),c.removeClass(t.checkedClass),r(c,e,t),l(a,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,a){function r(){v(t,f,a)}var d,h,f,m;return d=u(t,a,{divClass:a.fileClass,spanClass:a.fileButtonClass,spanHtml:a.fileButtonHtml,spanWrap:"after"}),h=d.div,m=d.span,(f=e("<span />").html(a.fileDefaultHtml)).addClass(a.filenameClass),f=c(t,f,"after"),i(t,"size")||i(t,"size",h.width()/10),o(t,h,a),r(),p()?n(t,a,{click:function(){t.trigger("change"),setTimeout(r,0)}}):n(t,a,{change:r}),g(f,a),g(m,a),{remove:function(){return f.remove(),m.remove(),t.unwrap().unbind(a.eventNamespace)},update:function(){s(h,a),v(t,f,a),l(h,t,a)}}}},{match:function(e){if(e.is("input")){var t=(" "+i(e,"type")+" ").toLowerCase();return" color date datetime datetime-local email month number password search tel text time url week ".indexOf(t)>=0}return!1},apply:function(e,t){var n,s;return n=i(e,"type"),e.addClass(t.inputClass),s=d(e,t),o(e,e,t),t.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(n),s&&e.unwrap()},update:m}}},{match:function(e){return e.is(":radio")},apply:function(t,a){var c,d,h;return c=u(t,a,{divClass:a.radioClass}),d=c.div,h=c.span,o(t,d,a),n(t,a,{"click touchend":function(){e.uniform.update(e(':radio[name="'+i(t,"name")+'"]'))}}),r(h,t,a),{remove:w(t,a),update:function(){s(d,a),r(h,t,a),l(d,t,a)}}}},{match:function(e){return!(!e.is("select")||f(e))},apply:function(t,i){var a,r,c,d;return i.selectAutoWidth&&y(t,(function(){d=t.width()})),a=u(t,i,{divClass:i.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"}),r=a.div,c=a.span,i.selectAutoWidth?y(t,(function(){b(e([c[0],r[0]]),{display:"block"},(function(){var e;e=c.outerWidth()-c.width(),r.width(d+e),c.width(d)}))})):r.addClass("fixedWidth"),o(t,r,i),n(t,i,{change:function(){c.html(t.find(":selected").html()),r.removeClass(i.activeClass)},"click touchend":function(){var e=t.find(":selected").html();c.html()!==e&&t.trigger("change")},keyup:function(){c.html(t.find(":selected").html())}}),g(c,i),{remove:function(){return c.remove(),t.unwrap().unbind(i.eventNamespace),t},update:function(){i.selectAutoWidth?(e.uniform.restore(t),t.uniform(i)):(s(r,i),c.html(t.find(":selected").html()),l(r,t,i))}}}},{match:function(e){return!(!e.is("select")||!f(e))},apply:function(e,t){var i;return e.addClass(t.selectMultiClass),i=d(e,t),o(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),i&&e.unwrap()},update:m}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var i;return e.addClass(t.textareaClass),i=d(e,t),o(e,e,t),{remove:function(){e.removeClass(t.textareaClass),i&&e.unwrap()},update:m}}}];p()&&!(void 0!==window.XMLHttpRequest)&&(_=!1),e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},e.fn.uniform=function(t){var i=this;return t=e.extend({},e.uniform.defaults,t),C||(C=!0,function(){var t,i,n,o;return i=e('<div style="width:0;height:0;color:'+(o="rgb(120,2,153)")+'">'),e("body").append(i),n=i.get(0),t=window.getComputedStyle?window.getComputedStyle(n,"").color:(n.currentStyle||n.style||{}).color,i.remove(),t.replace(/ /g,"")!==o}()&&(_=!1)),_?(t.resetSelector&&e(t.resetSelector).mouseup((function(){window.setTimeout((function(){e.uniform.update(i)}),10)})),this.each((function(){var i,n,o,s=e(this);if(s.data("uniformed"))e.uniform.update(s);else for(i=0;x.length>i;i+=1)if((n=x[i]).match(s,t))return o=n.apply(s,t),s.data("uniformed",o),void e.uniform.elements.push(s.get(0))}))):this},e.uniform.restore=e.fn.uniform.restore=function(i){i===t&&(i=e.uniform.elements),e(i).each((function(){var t,i,n=e(this);(i=n.data("uniformed"))&&(i.remove(),(t=e.inArray(this,e.uniform.elements))>=0&&e.uniform.elements.splice(t,1),n.removeData("uniformed"))}))},e.uniform.update=e.fn.uniform.update=function(i){i===t&&(i=e.uniform.elements),e(i).each((function(){var t,i=e(this);(t=i.data("uniformed"))&&t.update(i,t.options)}))}}(jQuery),$((function(){if(Array.prototype.forEach)(e=Array.prototype.slice.call(document.querySelectorAll(".switchery"))).forEach((function(e){new Switchery(e,{color:"#00BCD4",size:"small"})}));else for(var e=document.querySelectorAll(".switchery"),t=0;t<e.length;t++)new Switchery(e[t],{color:"#00BCD4",size:"small"});$(".control-info").uniform({radioClass:"choice",wrapperClass:"border-info-600 text-info-800"})})),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],(function(e){return t(e)})):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,(function(e){!function(e){"use strict";function t(t){return e.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],(function(){t=t?t.replace(this.re,this.ch):""})),t}function i(t){var i=arguments,n=t;[].shift.apply(i);var o,s=this.each((function(){var t=e(this);if(t.is("select")){var s=t.data("selectpicker"),a="object"==_typeof(n)&&n;if(s){if(a)for(var r in a)a.hasOwnProperty(r)&&(s.options[r]=a[r])}else{var c=e.extend({},l.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),a);c.template=e.extend({},l.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},t.data().template,a.template),t.data("selectpicker",s=new l(this,c))}"string"==typeof n&&(o=s[n]instanceof Function?s[n].apply(s,i):s.options[n])}}));return void 0!==o?o:s}String.prototype.includes||function(){var e={}.toString,t=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),i="".indexOf,n=function(t){if(null==this)throw new TypeError;var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var o=n.length,s=String(t),a=s.length,r=arguments.length>1?arguments[1]:void 0,l=r?Number(r):0;l!=l&&(l=0);var c=Math.min(Math.max(l,0),o);return!(a+c>o)&&-1!=i.call(n,s,l)};t?t(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}(),String.prototype.startsWith||function(){var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),t={}.toString,i=function(e){if(null==this)throw new TypeError;var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var n=i.length,o=String(e),s=o.length,a=arguments.length>1?arguments[1]:void 0,r=a?Number(a):0;r!=r&&(r=0);var l=Math.min(Math.max(r,0),n);if(s+l>n)return!1;for(var c=-1;++c<s;)if(i.charCodeAt(l+c)!=o.charCodeAt(c))return!1;return!0};e?e(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i});var n={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!n.useDefault&&e(t).data("selected",!0),n._set.apply(this,arguments)};var o=null;e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?("function"==typeof Event?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):i.fireEvent?((t=document.createEventObject()).eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)},e.expr.pseudos.icontains=function(t,i,n){var o=e(t);return(o.data("tokens")||o.text()).toString().toUpperCase().includes(n[3].toUpperCase())},e.expr.pseudos.ibegins=function(t,i,n){var o=e(t);return(o.data("tokens")||o.text()).toString().toUpperCase().startsWith(n[3].toUpperCase())},e.expr.pseudos.aicontains=function(t,i,n){var o=e(t);return(o.data("tokens")||o.data("normalizedText")||o.text()).toString().toUpperCase().includes(n[3].toUpperCase())},e.expr.pseudos.aibegins=function(t,i,n){var o=e(t);return(o.data("tokens")||o.data("normalizedText")||o.text()).toString().toUpperCase().startsWith(n[3].toUpperCase())};var s=function(e){var t=function(t){return e[t]},i="(?:"+Object.keys(e).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}},a=s({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}),r=s({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"}),l=function t(i,o){n.useDefault||(e.valHooks.select.set=n._set,n.useDefault=!0),this.$element=e(i),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=o,null===this.options.title&&(this.options.title=this.$element.attr("title"));var s=this.options.windowPadding;"number"==typeof s&&(this.options.windowPadding=[s,s,s,s]),this.val=t.prototype.val,this.render=t.prototype.render,this.refresh=t.prototype.refresh,this.setStyle=t.prototype.setStyle,this.selectAll=t.prototype.selectAll,this.deselectAll=t.prototype.deselectAll,this.destroy=t.prototype.destroy,this.remove=t.prototype.remove,this.show=t.prototype.show,this.hide=t.prototype.hide,this.init()};l.VERSION="1.12.2",l.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0},l.prototype={constructor:l,init:function(){var t=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),void 0!==i&&(this.$button.attr("data-id",i),e('label[for="'+i+'"]').click((function(e){e.preventDefault(),t.$button.focus()}))),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!1),t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$menuInner.attr("aria-expanded",!0),t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),t.$element[0].hasAttribute("required")&&this.$element.on("invalid",(function(){t.$button.addClass("bs-invalid").focus(),t.$element.on({"focus.bs.select":function(){t.$button.focus(),t.$element.off("focus.bs.select")},"shown.bs.select":function(){t.$element.val(t.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&t.$button.removeClass("bs-invalid"),t.$element.off("rendered.bs.select")}})})),setTimeout((function(){t.$element.trigger("loaded.bs.select")}))},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",n=this.autofocus?" autofocus":"",o=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",s=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+a(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"",r=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",c='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+n+' role="button"><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open" role="combobox">'+o+s+r+'<ul class="dropdown-menu inner" role="listbox" aria-expanded="false"></ul>'+l+"</div></div>";return e(c)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){var e=this.createLi();this.$menuInner[0].innerHTML=e},createLi:function(){var i=this,n=[],o=0,s=document.createElement("option"),r=-1,l=function(e,t,i,n){return"<li"+(void 0!==i&""!==i?' class="'+i+'"':"")+(void 0!==t&null!==t?' data-original-index="'+t+'"':"")+(void 0!==n&null!==n?'data-optgroup="'+n+'"':"")+">"+e+"</li>"},c=function(n,o,s,r){return'<a tabindex="0"'+(void 0!==o?' class="'+o+'"':"")+(s?' style="'+s+'"':"")+(i.options.liveSearchNormalize?' data-normalized-text="'+t(a(e(n).html()))+'"':"")+(void 0!==r||null!==r?' data-tokens="'+r+'"':"")+' role="option">'+n+'<span class="'+i.options.iconBase+" "+i.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(r--,!this.$element.find(".bs-title-option").length)){var u=this.$element[0];s.className="bs-title-option",s.innerHTML=this.options.title,s.value="",u.insertBefore(s,u.firstChild),void 0===e(u.options[u.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")&&(s.selected=!0)}return this.$element.find("option").each((function(t){var s=e(this);if(r++,!s.hasClass("bs-title-option")){var u=this.className||"",d=this.style.cssText,h=s.data("content")?s.data("content"):s.html(),p=s.data("tokens")?s.data("tokens"):null,f=void 0!==s.data("subtext")?'<small class="text-muted">'+s.data("subtext")+"</small>":"",m=void 0!==s.data("icon")?'<span class="'+i.options.iconBase+" "+s.data("icon")+'"></span> ':"",g=s.parent(),v="OPTGROUP"===g[0].tagName,b=v&&g[0].disabled,y=this.disabled||b;if(""!==m&&y&&(m="<span>"+m+"</span>"),i.options.hideDisabled&&(y&&!v||b))return void r--;if(s.data("content")||(h=m+'<span class="text">'+h+f+"</span>"),v&&!0!==s.data("divider")){if(i.options.hideDisabled&&y){if(void 0===g.data("allOptionsDisabled")){var w=g.children();g.data("allOptionsDisabled",w.filter(":disabled").length===w.length)}if(g.data("allOptionsDisabled"))return void r--}var _=" "+g[0].className||"";if(0===s.index()){o+=1;var C=g[0].label,x=void 0!==g.data("subtext")?'<small class="text-muted">'+g.data("subtext")+"</small>":"";C=(g.data("icon")?'<span class="'+i.options.iconBase+" "+g.data("icon")+'"></span> ':"")+'<span class="text">'+a(C)+x+"</span>",0!==t&&n.length>0&&(r++,n.push(l("",null,"divider",o+"div"))),r++,n.push(l(C,null,"dropdown-header"+_,o))}if(i.options.hideDisabled&&y)return void r--;n.push(l(c(h,"opt "+u+_,d,p),t,"",o))}else if(!0===s.data("divider"))n.push(l("",t,"divider"));else if(!0===s.data("hidden"))n.push(l(c(h,u,d,p),t,"hidden is-hidden"));else{var S=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName;if(!S&&i.options.hideDisabled)for(var k=e(this).prevAll(),T=0;T<k.length;T++)if("OPTGROUP"===k[T].tagName){for(var E=0,$=0;$<T;$++){var D=k[$];(D.disabled||!0===e(D).data("hidden"))&&E++}E===T&&(S=!0);break}S&&(r++,n.push(l("",null,"divider",o+"div"))),n.push(l(c(h,u,d,p),t))}i.liObj[t]=r}})),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),n.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i,n=this;!1!==t&&this.$element.find("option").each((function(e){var t=n.findLis().eq(n.liObj[e]);n.setDisabled(e,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,t),n.setSelected(e,this.selected,t)})),this.togglePlaceholder(),this.tabIndex();var o=this.$element.find("option").map((function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var t,i=e(this),o=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return t=n.options.showSubtext&&i.data("subtext")&&!n.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"",void 0!==i.attr("title")?i.attr("title"):i.data("content")&&n.options.showContent?i.data("content").toString():o+i.html()+t}})).toArray(),s=this.multiple?o.join(this.options.multipleSeparator):o[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var a=this.options.selectedTextFormat.split(">");if(a.length>1&&o.length>a[1]||1==a.length&&o.length>=2){i=this.options.hideDisabled?", [disabled]":"";var l=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+i).length;s=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(o.length,l):this.options.countSelectedText).replace("{0}",o.length.toString()).replace("{1}",l.toString())}}null==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(s=this.options.title),s||(s=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",r(e.trim(s.replace(/<[^>]*>?/g,"")))),this.$button.children(".filter-option").html(s),this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=e||this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(t){if(t||!1!==this.options.size&&!this.sizeInfo){var i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("ul"),s=document.createElement("li"),a=document.createElement("li"),r=document.createElement("a"),l=document.createElement("span"),c=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,u=this.options.liveSearch?document.createElement("div"):null,d=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,h=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(l.className="text",i.className=this.$menu[0].parentNode.className+" open",n.className="dropdown-menu open",o.className="dropdown-menu inner",s.className="divider",l.appendChild(document.createTextNode("Inner text")),r.appendChild(l),a.appendChild(r),o.appendChild(a),o.appendChild(s),c&&n.appendChild(c),u){var p=document.createElement("input");u.className="bs-searchbox",p.className="form-control",u.appendChild(p),n.appendChild(u)}d&&n.appendChild(d),n.appendChild(o),h&&n.appendChild(h),i.appendChild(n),document.body.appendChild(i);var f=r.offsetHeight,m=c?c.offsetHeight:0,g=u?u.offsetHeight:0,v=d?d.offsetHeight:0,b=h?h.offsetHeight:0,y=e(s).outerHeight(!0),w="function"==typeof getComputedStyle&&getComputedStyle(n),_=w?null:e(n),C={vert:parseInt(w?w.paddingTop:_.css("paddingTop"))+parseInt(w?w.paddingBottom:_.css("paddingBottom"))+parseInt(w?w.borderTopWidth:_.css("borderTopWidth"))+parseInt(w?w.borderBottomWidth:_.css("borderBottomWidth")),horiz:parseInt(w?w.paddingLeft:_.css("paddingLeft"))+parseInt(w?w.paddingRight:_.css("paddingRight"))+parseInt(w?w.borderLeftWidth:_.css("borderLeftWidth"))+parseInt(w?w.borderRightWidth:_.css("borderRightWidth"))},x={vert:C.vert+parseInt(w?w.marginTop:_.css("marginTop"))+parseInt(w?w.marginBottom:_.css("marginBottom"))+2,horiz:C.horiz+parseInt(w?w.marginLeft:_.css("marginLeft"))+parseInt(w?w.marginRight:_.css("marginRight"))+2};document.body.removeChild(i),this.sizeInfo={liHeight:f,headerHeight:m,searchHeight:g,actionsHeight:v,doneButtonHeight:b,dividerHeight:y,menuPadding:C,menuExtras:x}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var t,i,n,o,s,a,r,l,c=this,u=this.$menu,d=this.$menuInner,h=e(window),p=this.$newElement[0].offsetHeight,f=this.$newElement[0].offsetWidth,m=this.sizeInfo.liHeight,g=this.sizeInfo.headerHeight,v=this.sizeInfo.searchHeight,b=this.sizeInfo.actionsHeight,y=this.sizeInfo.doneButtonHeight,w=this.sizeInfo.dividerHeight,_=this.sizeInfo.menuPadding,C=this.sizeInfo.menuExtras,x=this.options.hideDisabled?".disabled":"",S=function(){var t,i=c.$newElement.offset(),n=e(c.options.container);c.options.container&&!n.is("body")?((t=n.offset()).top+=parseInt(n.css("borderTopWidth")),t.left+=parseInt(n.css("borderLeftWidth"))):t={top:0,left:0};var o=c.options.windowPadding;s=i.top-t.top-h.scrollTop(),a=h.height()-s-p-t.top-o[2],r=i.left-t.left-h.scrollLeft(),l=h.width()-r-f-t.left-o[1],s-=o[0],r-=o[3]};if(S(),"auto"===this.options.size){var k=function(){var h,p=function(t,i){return function(n){return i?n.classList?n.classList.contains(t):e(n).hasClass(t):!(n.classList?n.classList.contains(t):e(n).hasClass(t))}},w=c.$menuInner[0].getElementsByTagName("li"),x=Array.prototype.filter?Array.prototype.filter.call(w,p("hidden",!1)):c.$lis.not(".hidden"),k=Array.prototype.filter?Array.prototype.filter.call(x,p("dropdown-header",!0)):x.filter(".dropdown-header");S(),t=a-C.vert,i=l-C.horiz,c.options.container?(u.data("height")||u.data("height",u.height()),n=u.data("height"),u.data("width")||u.data("width",u.width()),o=u.data("width")):(n=u.height(),o=u.width()),c.options.dropupAuto&&c.$newElement.toggleClass("dropup",s>a&&t-C.vert<n),c.$newElement.hasClass("dropup")&&(t=s-C.vert),"auto"===c.options.dropdownAlignRight&&u.toggleClass("dropdown-menu-right",r>l&&i-C.horiz<o-f),h=x.length+k.length>3?3*m+C.vert-2:0,u.css({"max-height":t+"px",overflow:"hidden","min-height":h+g+v+b+y+"px"}),d.css({"max-height":t-g-v-b-y-_.vert+"px","overflow-y":"auto","min-height":Math.max(h-_.vert,0)+"px"})};k(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",k),h.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",k)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(x).length>this.options.size){var T=this.$lis.not(".divider").not(x).children().slice(0,this.options.size).last().parent().index(),E=this.$lis.slice(0,T+1).filter(".divider").length;t=m*this.options.size+E*w+_.vert,c.options.container?(u.data("height")||u.data("height",u.height()),n=u.data("height")):n=u.height(),c.options.dropupAuto&&this.$newElement.toggleClass("dropup",s>a&&t-C.vert<n),u.css({"max-height":t+g+v+b+y+"px",overflow:"hidden","min-height":""}),d.css({"max-height":t-_.vert+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,i=e.children(".dropdown-menu").outerWidth(),n=t.css("width","auto").children("button").outerWidth();e.remove(),t.remove(),this.$newElement.css("width",Math.max(i,n)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,n,o=this,s=e(this.options.container),a=function(e){o.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),s.is("body")?i={top:0,left:0}:((i=s.offset()).top+=parseInt(s.css("borderTopWidth"))-s.scrollTop(),i.left+=parseInt(s.css("borderLeftWidth"))-s.scrollLeft()),n=e.hasClass("dropup")?0:e[0].offsetHeight,o.$bsContainer.css({top:t.top-i.top+n,left:t.left-i.left,width:e[0].offsetWidth})};this.$button.on("click",(function(){var t=e(this);o.isDisabled()||(a(o.$newElement),o.$bsContainer.appendTo(o.options.container).toggleClass("open",!t.hasClass("open")).append(o.$menu))})),e(window).on("resize scroll",(function(){a(o.$newElement)})),this.$element.on("hide.bs.select",(function(){o.$menu.data("height",o.$menu.height()),o.$bsContainer.detach()}))},setSelected:function(e,t,i){i||(this.togglePlaceholder(),i=this.findLis().eq(this.liObj[e])),i.toggleClass("selected",t).find("a").attr("aria-selected",t)},setDisabled:function(e,t,i){i||(i=this.findLis().eq(this.liObj[e])),t?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1).attr("aria-disabled",!0):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0).attr("aria-disabled",!1)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled").attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click((function(){return!e.isDisabled()}))},togglePlaceholder:function(){var e=this.$element.val();this.$button.toggleClass("bs-placeholder",null===e||""===e||e.constructor===Array&&0===e.length)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,i=e(document);i.data("spaceSelect",!1),this.$button.on("keyup",(function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))})),this.$button.on("click",(function(){t.setSize()})),this.$element.on("shown.bs.select",(function(){if(t.options.liveSearch||t.multiple){if(!t.multiple){var e=t.liObj[t.$element[0].selectedIndex];if("number"!=typeof e||!1===t.options.size)return;var i=t.$lis.eq(e)[0].offsetTop-t.$menuInner[0].offsetTop;i=i-t.$menuInner[0].offsetHeight/2+t.sizeInfo.liHeight/2,t.$menuInner[0].scrollTop=i}}else t.$menuInner.find(".selected a").focus()})),this.$menuInner.on("click","li a",(function(i){var n=e(this),s=n.parent().data("originalIndex"),a=t.$element.val(),r=t.$element.prop("selectedIndex"),l=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!n.parent().hasClass("disabled")){var c=t.$element.find("option"),u=c.eq(s),d=u.prop("selected"),h=u.parent("optgroup"),p=t.options.maxOptions,f=h.data("maxOptions")||!1;if(t.multiple){if(u.prop("selected",!d),t.setSelected(s,!d),n.blur(),!1!==p||!1!==f){var m=p<c.filter(":selected").length,g=f<h.find("option:selected").length;if(p&&m||f&&g)if(p&&1==p)c.prop("selected",!1),u.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected"),t.setSelected(s,!0);else if(f&&1==f){h.find("option:selected").prop("selected",!1),u.prop("selected",!0);var v=n.parent().data("optgroup");t.$menuInner.find('[data-optgroup="'+v+'"]').removeClass("selected"),t.setSelected(s,!0)}else{var b="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,y="function"==typeof b?b(p,f):b,w=y[0].replace("{n}",p),_=y[1].replace("{n}",f),C=e('<div class="notify"></div>');y[2]&&(w=w.replace("{var}",y[2][p>1?0:1]),_=_.replace("{var}",y[2][f>1?0:1])),u.prop("selected",!1),t.$menu.append(C),p&&m&&(C.append(e("<div>"+w+"</div>")),l=!1,t.$element.trigger("maxReached.bs.select")),f&&g&&(C.append(e("<div>"+_+"</div>")),l=!1,t.$element.trigger("maxReachedGrp.bs.select")),setTimeout((function(){t.setSelected(s,!1)}),10),C.delay(750).fadeOut(300,(function(){e(this).remove()}))}}}else c.prop("selected",!1),u.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected").find("a").attr("aria-selected",!1),t.setSelected(s,!0);!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.focus():t.options.liveSearch&&t.$searchbox.focus(),l&&(a!=t.$element.val()&&t.multiple||r!=t.$element.prop("selectedIndex")&&!t.multiple)&&(o=[s,u.prop("selected"),d],t.$element.triggerNative("change"))}})),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",(function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox.focus():t.$button.focus())})),this.$menuInner.on("click",".divider, .dropdown-header",(function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus()})),this.$menu.on("click",".popover-title .close",(function(){t.$button.click()})),this.$searchbox.on("click",(function(e){e.stopPropagation()})),this.$menu.on("click",".actions-btn",(function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()})),this.$element.change((function(){t.render(!1),t.$element.trigger("changed.bs.select",o),o=null}))},liveSearchListener:function(){var i=this,n=e('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api",(function(){i.$menuInner.find(".active").removeClass("active"),i.$searchbox.val()&&(i.$searchbox.val(""),i.$lis.not(".is-hidden").removeClass("hidden"),n.parent().length&&n.remove()),i.multiple||i.$menuInner.find(".selected").addClass("active"),setTimeout((function(){i.$searchbox.focus()}),10)})),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",(function(e){e.stopPropagation()})),this.$searchbox.on("input propertychange",(function(){if(i.$lis.not(".is-hidden").removeClass("hidden"),i.$lis.filter(".active").removeClass("active"),n.remove(),i.$searchbox.val()){var o,s=i.$lis.not(".is-hidden, .divider, .dropdown-header");if((o=i.options.liveSearchNormalize?s.find("a").not(":a"+i._searchStyle()+'("'+t(i.$searchbox.val())+'")'):s.find("a").not(":"+i._searchStyle()+'("'+i.$searchbox.val()+'")')).length===s.length)n.html(i.options.noneResultsText.replace("{0}",'"'+a(i.$searchbox.val())+'"')),i.$menuInner.append(n),i.$lis.addClass("hidden");else{o.parent().addClass("hidden");var r,l=i.$lis.not(".hidden");l.each((function(t){var i=e(this);i.hasClass("divider")?void 0===r?i.addClass("hidden"):(r&&r.addClass("hidden"),r=i):i.hasClass("dropdown-header")&&l.eq(t+1).data("optgroup")!==i.data("optgroup")?i.addClass("hidden"):r=null})),r&&r.addClass("hidden"),s.not(".hidden").first().addClass("active")}}}))},_searchStyle:function(){return{begins:"ibegins",startsWith:"ibegins"}[this.options.liveSearchStyle]||"icontains"},val:function(e){return void 0!==e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},changeAll:function(t){if(this.multiple){void 0===t&&(t=!0),this.findLis();var i=this.$element.find("option"),n=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden"),o=n.length,s=[];if(t){if(n.filter(".selected").length===n.length)return}else if(0===n.filter(".selected").length)return;n.toggleClass("selected",t);for(var a=0;a<o;a++){var r=n[a].getAttribute("data-original-index");s[s.length]=i.eq(r)[0]}e(s).prop("selected",t),this.render(!1),this.togglePlaceholder(),this.$element.triggerNative("change")}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click")},keydown:function(i){var n,o,s,a,r,l,c,u,d,h=e(this),p=h.is("input")?h.parent().parent():h.parent(),f=p.data("this"),m=":not(.disabled, .hidden, .dropdown-header, .divider)",g={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(p=h.parent().parent()),f.options.container&&(p=f.$menu),n=e('[role="listbox"] li',p),!(d=f.$newElement.hasClass("open"))&&(i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105||i.keyCode>=65&&i.keyCode<=90))return f.options.container?f.$button.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),d=!0),void f.$searchbox.focus();if(f.options.liveSearch&&(/(^9$|27)/.test(i.keyCode.toString(10))&&d&&(i.preventDefault(),i.stopPropagation(),f.$menuInner.click(),f.$button.focus()),n=e('[role="listbox"] li'+m,p),h.val()||/(38|40)/.test(i.keyCode.toString(10))||0===n.filter(".active").length&&(n=f.$menuInner.find("li"),n=f.options.liveSearchNormalize?n.filter(":a"+f._searchStyle()+"("+t(g[i.keyCode])+")"):n.filter(":"+f._searchStyle()+"("+g[i.keyCode]+")"))),n.length){if(/(38|40)/.test(i.keyCode.toString(10)))o=n.index(n.find("a").filter(":focus").parent()),a=n.filter(m).first().index(),r=n.filter(m).last().index(),s=n.eq(o).nextAll(m).eq(0).index(),l=n.eq(o).prevAll(m).eq(0).index(),c=n.eq(s).prevAll(m).eq(0).index(),f.options.liveSearch&&(n.each((function(t){e(this).hasClass("disabled")||e(this).data("index",t)})),o=n.index(n.filter(".active")),a=n.first().data("index"),r=n.last().data("index"),s=n.eq(o).nextAll().eq(0).data("index"),l=n.eq(o).prevAll().eq(0).data("index"),c=n.eq(s).prevAll().eq(0).data("index")),u=h.data("prevIndex"),38==i.keyCode?(f.options.liveSearch&&o--,o!=c&&o>l&&(o=l),o<a&&(o=a),o==u&&(o=r)):40==i.keyCode&&(f.options.liveSearch&&o++,-1==o&&(o=0),o!=c&&o<s&&(o=s),o>r&&(o=r),o==u&&(o=a)),h.data("prevIndex",o),f.options.liveSearch?(i.preventDefault(),h.hasClass("dropdown-toggle")||(n.removeClass("active").eq(o).addClass("active").children("a").focus(),h.focus())):n.eq(o).children("a").focus();else if(!h.is("input")){var v,b=[];n.each((function(){e(this).hasClass("disabled")||e.trim(e(this).children("a").text().toLowerCase()).substring(0,1)==g[i.keyCode]&&b.push(e(this).index())})),v=e(document).data("keycount"),v++,e(document).data("keycount",v),e.trim(e(":focus").text().toLowerCase()).substring(0,1)!=g[i.keyCode]?(v=1,e(document).data("keycount",v)):v>=b.length&&(e(document).data("keycount",0),v>b.length&&(v=1)),n.eq(b[v-1]).children("a").focus()}if((/(13|32)/.test(i.keyCode.toString(10))||/(^9$)/.test(i.keyCode.toString(10))&&f.options.selectOnTab)&&d){if(/(32)/.test(i.keyCode.toString(10))||i.preventDefault(),f.options.liveSearch)/(32)/.test(i.keyCode.toString(10))||(f.$menuInner.find(".active a").click(),h.focus());else{var y=e(":focus");y.click(),y.focus(),i.preventDefault(),e(document).data("spaceSelect",!0)}e(document).data("keycount",0)}(/(^9$|27)/.test(i.keyCode.toString(10))&&d&&(f.multiple||f.options.liveSearch)||/(27)/.test(i.keyCode.toString(10))&&!d)&&(f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var c=e.fn.selectpicker;e.fn.selectpicker=i,e.fn.selectpicker.Constructor=l,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=c,this},e(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',l.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="listbox"], .bs-searchbox input',(function(e){e.stopPropagation()})),e(window).on("load.bs.select.data-api",(function(){e(".selectpicker").each((function(){var t=e(this);i.call(t,t.data())}))}))}(e)})),function(e,t,i,n){function o(t,i){this.settings=null,this.options=e.extend({},o.Defaults,i),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy((function(t,i){this._handlers[i]=e.proxy(this[i],this)}),this)),e.each(o.Plugins,e.proxy((function(e,t){this._plugins[e.charAt(0).toLowerCase()+e.slice(1)]=new t(this)}),this)),e.each(o.Workers,e.proxy((function(t,i){this._pipe.push({filter:i.filter,run:e.proxy(i.run,this)})}),this)),this.setup(),this.initialize()}o.Defaults={items:3,loop:!1,center:!1,rewind:!1,checkVisibility:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",slideTransition:"",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},o.Width={Default:"default",Inner:"inner",Outer:"outer"},o.Type={Event:"event",State:"state"},o.Plugins={},o.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",i=!this.settings.autoWidth,n=this.settings.rtl,o={width:"auto","margin-left":n?t:"","margin-right":n?"":t};!i&&this.$stage.children().css(o),e.css=o}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,n=this._items.length,o=!this.settings.autoWidth,s=[];for(e.items={merge:!1,width:t};n--;)i=this._mergers[n],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,e.items.merge=i>1||e.items.merge,s[n]=o?t*i:this._items[n].width();this._widths=s}},{filter:["items","settings"],run:function(){var t=[],i=this._items,n=this.settings,o=Math.max(2*n.items,4),s=2*Math.ceil(i.length/2),a=n.loop&&i.length?n.rewind?o:Math.max(o,s):0,r="",l="";for(a/=2;a>0;)t.push(this.normalize(t.length/2,!0)),r+=i[t[t.length-1]][0].outerHTML,t.push(this.normalize(i.length-1-(t.length-1)/2,!0)),l=i[t[t.length-1]][0].outerHTML+l,a-=1;this._clones=t,e(r).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,i=-1,n=0,o=0,s=[];++i<t;)n=s[i-1]||0,o=this._widths[this.relative(i)]+this.settings.margin,s.push(n+o*e);this._coordinates=s}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,i={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,i=!this.settings.autoWidth,n=this.$stage.children();if(i&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],n.eq(t).css(e.css);else i&&(e.css.width=e.items.width,n.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,i,n,o=this.settings.rtl?1:-1,s=2*this.settings.stagePadding,a=this.coordinates(this.current())+s,r=a+this.width()*o,l=[];for(i=0,n=this._coordinates.length;i<n;i++)e=this._coordinates[i-1]||0,t=Math.abs(this._coordinates[i])+s*o,(this.op(e,"<=",a)&&this.op(e,">",r)||this.op(t,"<",a)&&this.op(t,">",r))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.$stage.children(".center").removeClass("center"),this.settings.center&&this.$stage.children().eq(this.current()).addClass("center")}}],o.prototype.initializeStage=function(){this.$stage=this.$element.find("."+this.settings.stageClass),this.$stage.length||(this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+">",{class:this.settings.stageClass}).wrap(e("<div/>",{class:this.settings.stageOuterClass})),this.$element.append(this.$stage.parent()))},o.prototype.initializeItems=function(){var t=this.$element.find(".owl-item");if(t.length)return this._items=t.get().map((function(t){return e(t)})),this._mergers=this._items.map((function(){return 1})),void this.refresh();this.replace(this.$element.children().not(this.$stage.parent())),this.isVisible()?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass)},o.prototype.initialize=function(){var e,t,i;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(e=this.$element.find("img"),t=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:n,i=this.$element.children(t).width(),e.length&&i<=0&&this.preloadAutoWidthImages(e));this.initializeStage(),this.initializeItems(),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},o.prototype.isVisible=function(){return!this.settings.checkVisibility||this.$element.is(":visible")},o.prototype.setup=function(){var t=this.viewport(),i=this.options.responsive,n=-1,o=null;i?(e.each(i,(function(e){e<=t&&e>n&&(n=Number(e))})),"function"==typeof(o=e.extend({},this.options,i[n])).stagePadding&&(o.stagePadding=o.stagePadding()),delete o.responsive,o.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+n))):o=e.extend({},this.options),this.trigger("change",{property:{name:"settings",value:o}}),this._breakpoint=n,this.settings=o,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},o.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},o.prototype.prepare=function(t){var i=this.trigger("prepare",{content:t});return i.data||(i.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:i.data}),i.data},o.prototype.update=function(){for(var t=0,i=this._pipe.length,n=e.proxy((function(e){return this[e]}),this._invalidated),o={};t<i;)(this._invalidated.all||e.grep(this._pipe[t].filter,n).length>0)&&this._pipe[t].run(o),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},o.prototype.width=function(e){switch(e=e||o.Width.Default){case o.Width.Inner:case o.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},o.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},o.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},o.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.isVisible()&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},o.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",(function(){return!1}))),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},o.prototype.onDragStart=function(t){var n=null;3!==t.which&&(e.support.transform?n={x:(n=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===n.length?12:4],y:n[16===n.length?13:5]}:(n=this.$stage.position(),n={x:this.settings.rtl?n.left+this.$stage.width()-this.width()+this.settings.margin:n.left,y:n.top}),this.is("animating")&&(e.support.transform?this.animate(n.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=n,this._drag.stage.current=n,this._drag.pointer=this.pointer(t),e(i).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(i).one("mousemove.owl.core touchmove.owl.core",e.proxy((function(t){var n=this.difference(this._drag.pointer,this.pointer(t));e(i).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(n.x)<Math.abs(n.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))}),this)))},o.prototype.onDragMove=function(e){var t=null,i=null,n=null,o=this.difference(this._drag.pointer,this.pointer(e)),s=this.difference(this._drag.stage.start,o);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-t,s.x=((s.x-t)%i+i)%i+t):(t=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),n=this.settings.pullDrag?-1*o.x/5:0,s.x=Math.max(Math.min(s.x,t+n),i+n)),this._drag.stage.current=s,this.animate(s.x))},o.prototype.onDragEnd=function(t){var n=this.difference(this._drag.pointer,this.pointer(t)),o=this._drag.stage.current,s=n.x>0^this.settings.rtl?"left":"right";e(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==n.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(o.x,0!==n.x?s:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=s,(Math.abs(n.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",(function(){return!1}))),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},o.prototype.closest=function(t,i){var o=-1,s=this.width(),a=this.coordinates();return this.settings.freeDrag||e.each(a,e.proxy((function(e,r){return"left"===i&&t>r-30&&t<r+30?o=e:"right"===i&&t>r-s-30&&t<r-s+30?o=e+1:this.op(t,"<",r)&&this.op(t,">",a[e+1]!==n?a[e+1]:r-s)&&(o="left"===i?e+1:e),-1===o}),this)),this.settings.loop||(this.op(t,">",a[this.minimum()])?o=t=this.minimum():this.op(t,"<",a[this.maximum()])&&(o=t=this.maximum())),o},o.prototype.animate=function(t){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"+(this.settings.slideTransition?" "+this.settings.slideTransition:"")}):i?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},o.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},o.prototype.current=function(e){if(e===n)return this._current;if(0===this._items.length)return n;if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});t.data!==n&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},o.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,(function(e,t){return t}))},o.prototype.reset=function(e){(e=this.normalize(e))!==n&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},o.prototype.normalize=function(e,t){var i=this._items.length,o=t?0:this._clones.length;return!this.isNumeric(e)||i<1?e=n:(e<0||e>=i+o)&&(e=((e-o/2)%i+i)%i+o/2),e},o.prototype.relative=function(e){return e-=this._clones.length/2,this.normalize(e,!0)},o.prototype.maximum=function(e){var t,i,n,o=this.settings,s=this._coordinates.length;if(o.loop)s=this._clones.length/2+this._items.length-1;else if(o.autoWidth||o.merge){if(t=this._items.length)for(i=this._items[--t].width(),n=this.$element.width();t--&&!((i+=this._items[t].width()+this.settings.margin)>n););s=t+1}else s=o.center?this._items.length-1:this._items.length-o.items;return e&&(s-=this._clones.length/2),Math.max(s,0)},o.prototype.minimum=function(e){return e?0:this._clones.length/2},o.prototype.items=function(e){return e===n?this._items.slice():(e=this.normalize(e,!0),this._items[e])},o.prototype.mergers=function(e){return e===n?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},o.prototype.clones=function(t){var i=this._clones.length/2,o=i+this._items.length,s=function(e){return e%2==0?o+e/2:i-(e+1)/2};return t===n?e.map(this._clones,(function(e,t){return s(t)})):e.map(this._clones,(function(e,i){return e===t?s(i):null}))},o.prototype.speed=function(e){return e!==n&&(this._speed=e),this._speed},o.prototype.coordinates=function(t){var i,o=1,s=t-1;return t===n?e.map(this._coordinates,e.proxy((function(e,t){return this.coordinates(t)}),this)):(this.settings.center?(this.settings.rtl&&(o=-1,s=t+1),i=this._coordinates[t],i+=(this.width()-i+(this._coordinates[s]||0))/2*o):i=this._coordinates[s]||0,i=Math.ceil(i))},o.prototype.duration=function(e,t,i){return 0===i?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(i||this.settings.smartSpeed)},o.prototype.to=function(e,t){var i=this.current(),n=null,o=e-this.relative(i),s=(o>0)-(o<0),a=this._items.length,r=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(o)>a/2&&(o+=-1*s*a),(n=(((e=i+o)-r)%a+a)%a+r)!==e&&n-o<=l&&n-o>0&&(i=n-o,e=n,this.reset(i))):this.settings.rewind?e=(e%(l+=1)+l)%l:e=Math.max(r,Math.min(l,e)),this.speed(this.duration(i,e,t)),this.current(e),this.isVisible()&&this.update()},o.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},o.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},o.prototype.onTransitionEnd=function(e){if(e!==n&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},o.prototype.viewport=function(){var n;return this.options.responsiveBaseElement!==t?n=e(this.options.responsiveBaseElement).width():t.innerWidth?n=t.innerWidth:i.documentElement&&i.documentElement.clientWidth?n=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),n},o.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter((function(){return 1===this.nodeType})).each(e.proxy((function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)}),this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},o.prototype.add=function(t,i){var o=this.relative(this._current);i=i===n?this._items.length:this.normalize(i,!0),t=t instanceof jQuery?t:e(t),this.trigger("add",{content:t,position:i}),t=this.prepare(t),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[i-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(t),this._items.splice(i,0,t),this._mergers.splice(i,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[o]&&this.reset(this._items[o].index()),this.invalidate("items"),this.trigger("added",{content:t,position:i})},o.prototype.remove=function(e){(e=this.normalize(e,!0))!==n&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},o.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy((function(t,i){this.enter("pre-loading"),i=e(i),e(new Image).one("load",e.proxy((function(e){i.attr("src",e.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()}),this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))}),this))},o.prototype.destroy=function(){for(var n in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(i).off(".owl.core"),!1!==this.settings.responsive&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[n].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.remove(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},o.prototype.op=function(e,t,i){var n=this.settings.rtl;switch(t){case"<":return n?e>i:e<i;case">":return n?e<i:e>i;case">=":return n?e<=i:e>=i;case"<=":return n?e>=i:e<=i}},o.prototype.on=function(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},o.prototype.off=function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)},o.prototype.trigger=function(t,i,n,s,a){var r={item:{count:this._items.length,index:this.current()}},l=e.camelCase(e.grep(["on",t,n],(function(e){return e})).join("-").toLowerCase()),c=e.Event([t,"owl",n||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},r,i));return this._supress[t]||(e.each(this._plugins,(function(e,t){t.onTrigger&&t.onTrigger(c)})),this.register({type:o.Type.Event,name:t}),this.$element.trigger(c),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,c)),c},o.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){this._states.current[t]===n&&(this._states.current[t]=0),this._states.current[t]++}),this))},o.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy((function(e,t){this._states.current[t]--}),this))},o.prototype.register=function(t){if(t.type===o.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var i=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!i||!i.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:i.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===o.Type.State&&(this._states.tags[t.name]?this._states.tags[t.name]=this._states.tags[t.name].concat(t.tags):this._states.tags[t.name]=t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy((function(i,n){return e.inArray(i,this._states.tags[t.name])===n}),this)))},o.prototype.suppress=function(t){e.each(t,e.proxy((function(e,t){this._supress[t]=!0}),this))},o.prototype.release=function(t){e.each(t,e.proxy((function(e,t){delete this._supress[t]}),this))},o.prototype.pointer=function(e){var i={x:null,y:null};return(e=(e=e.originalEvent||e||t.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i},o.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))},o.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=e(this),s=n.data("owl.carousel");s||(s=new o(this,"object"==_typeof(t)&&t),n.data("owl.carousel",s),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],(function(t,i){s.register({type:o.Type.Event,name:i}),s.$element.on(i+".owl.carousel.core",e.proxy((function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([i]),s[i].apply(this,[].slice.call(arguments,1)),this.release([i]))}),s))}))),"string"==typeof t&&"_"!==t.charAt(0)&&s[t].apply(s,i)}))},e.fn.owlCarousel.Constructor=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var o=function t(i){this._core=i,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()}),this)},this._core.options=e.extend({},t.Defaults,this._core.options),this._core.$element.on(this._handlers)};o.Defaults={autoRefresh:!0,autoRefreshInterval:500},o.prototype.watch=function(){this._interval||(this._visible=this._core.isVisible(),this._interval=t.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},o.prototype.refresh=function(){this._core.isVisible()!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},o.prototype.destroy=function(){var e,i;for(e in t.clearInterval(this._interval),this._handlers)this._core.$element.off(e,this._handlers[e]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var o=function t(i){this._core=i,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":e.proxy((function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type)){var i=this._core.settings,n=i.center&&Math.ceil(i.items/2)||i.items,o=i.center&&-1*n||0,s=(t.property&&undefined!==t.property.value?t.property.value:this._core.current())+o,a=this._core.clones().length,r=e.proxy((function(e,t){this.load(t)}),this);for(i.lazyLoadEager>0&&(n+=i.lazyLoadEager,i.loop&&(s-=i.lazyLoadEager,n++));o++<n;)this.load(a/2+this._core.relative(s)),a&&e.each(this._core.clones(this._core.relative(s)),r),s++}}),this)},this._core.options=e.extend({},t.Defaults,this._core.options),this._core.$element.on(this._handlers)};o.Defaults={lazyLoad:!1,lazyLoadEager:0},o.prototype.load=function(i){var n=this._core.$stage.children().eq(i),o=n&&n.find(".owl-lazy");!o||e.inArray(n.get(0),this._loaded)>-1||(o.each(e.proxy((function(i,n){var o,s=e(n),a=t.devicePixelRatio>1&&s.attr("data-src-retina")||s.attr("data-src")||s.attr("data-srcset");this._core.trigger("load",{element:s,url:a},"lazy"),s.is("img")?s.one("load.owl.lazy",e.proxy((function(){s.css("opacity",1),this._core.trigger("loaded",{element:s,url:a},"lazy")}),this)).attr("src",a):s.is("source")?s.one("load.owl.lazy",e.proxy((function(){this._core.trigger("loaded",{element:s,url:a},"lazy")}),this)).attr("srcset",a):((o=new Image).onload=e.proxy((function(){s.css({"background-image":'url("'+a+'")',opacity:"1"}),this._core.trigger("loaded",{element:s,url:a},"lazy")}),this),o.src=a)}),this)),this._loaded.push(n.get(0)))},o.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var o=function i(n){this._core=n,this._previousHeight=null,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&this.update()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&"position"===e.property.name&&this.update()}),this),"loaded.owl.lazy":e.proxy((function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()}),this)},this._core.options=e.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers),this._intervalId=null;var o=this;e(t).on("load",(function(){o._core.settings.autoHeight&&o.update()})),e(t).resize((function(){o._core.settings.autoHeight&&(null!=o._intervalId&&clearTimeout(o._intervalId),o._intervalId=setTimeout((function(){o.update()}),250))}))};o.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},o.prototype.update=function(){var t=this._core._current,i=t+this._core.settings.items,n=this._core.settings.lazyLoad,o=this._core.$stage.children().toArray().slice(t,i),s=[],a=0;e.each(o,(function(t,i){s.push(e(i).height())})),(a=Math.max.apply(null,s))<=1&&n&&this._previousHeight&&(a=this._previousHeight),this._previousHeight=a,this._core.$stage.parent().height(a).addClass(this._core.settings.autoHeightClass)},o.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var o=function t(i){this._core=i,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})}),this),"resize.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var i=e(t.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,e(t.content)))}}),this)},this._core.options=e.extend({},t.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy((function(e){this.play(e)}),this))};o.Defaults={video:!1,videoHeight:!1,videoWidth:!1},o.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":e.attr("data-vzaar-id")?"vzaar":"youtube",n=e.attr("data-vimeo-id")||e.attr("data-youtube-id")||e.attr("data-vzaar-id"),o=e.attr("data-width")||this._core.settings.videoWidth,s=e.attr("data-height")||this._core.settings.videoHeight,a=e.attr("href");if(!a)throw new Error("Missing video URL.");if((n=a.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com|be\-nocookie\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(n[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(n[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}n=n[6],this._videos[a]={type:i,id:n,width:o,height:s},t.attr("data-video",a),this.thumbnail(e,this._videos[a])},o.prototype.thumbnail=function(t,i){var n,o,s=i.width&&i.height?"width:"+i.width+"px;height:"+i.height+"px;":"",a=t.find("img"),r="src",l="",c=this._core.settings,u=function(i){'<div class="owl-video-play-icon"></div>',n=c.lazyLoad?e("<div/>",{class:"owl-video-tn "+l,srcType:i}):e("<div/>",{class:"owl-video-tn",style:"opacity:1;background-image:url("+i+")"}),t.after(n),t.after('<div class="owl-video-play-icon"></div>')};if(t.wrap(e("<div/>",{class:"owl-video-wrapper",style:s})),this._core.settings.lazyLoad&&(r="data-src",l="owl-lazy"),a.length)return u(a.attr(r)),a.remove(),!1;"youtube"===i.type?(o="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",u(o)):"vimeo"===i.type?e.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){o=e[0].thumbnail_large,u(o)}}):"vzaar"===i.type&&e.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){o=e.framegrab_url,u(o)}})},o.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},o.prototype.play=function(t){var i,n=e(t.target).closest("."+this._core.settings.itemClass),o=this._videos[n.attr("data-video")],s=o.width||"100%",a=o.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),n=this._core.items(this._core.relative(n.index())),this._core.reset(n.index()),(i=e('<iframe frameborder="0" allowfullscreen mozallowfullscreen webkitAllowFullScreen ></iframe>')).attr("height",a),i.attr("width",s),"youtube"===o.type?i.attr("src","//www.youtube.com/embed/"+o.id+"?autoplay=1&rel=0&v="+o.id):"vimeo"===o.type?i.attr("src","//player.vimeo.com/video/"+o.id+"?autoplay=1"):"vzaar"===o.type&&i.attr("src","//view.vzaar.com/"+o.id+"/player?autoplay=true"),e(i).wrap('<div class="owl-video-frame" />').insertAfter(n.find(".owl-video")),this._playing=n.addClass("owl-video-playing"))},o.prototype.isInFullScreen=function(){var t=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},o.prototype.destroy=function(){var e,t;for(e in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var o=function t(i){this.core=i,this.core.options=e.extend({},t.Defaults,this.core.options),this.swapping=!0,this.previous=n,this.next=n,this.handlers={"change.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)}),this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy((function(e){e.namespace&&(this.swapping="translated"==e.type)}),this),"translate.owl.carousel":e.proxy((function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()}),this)},this.core.$element.on(this.handlers)};o.Defaults={animateOut:!1,animateIn:!1},o.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,i=e.proxy(this.clear,this),n=this.core.$stage.children().eq(this.previous),o=this.core.$stage.children().eq(this.next),s=this.core.settings.animateIn,a=this.core.settings.animateOut;this.core.current()!==this.previous&&(a&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),n.one(e.support.animation.end,i).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(a)),s&&o.one(e.support.animation.end,i).addClass("animated owl-animated-in").addClass(s))}},o.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},o.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){var o=function t(i){this._core=i,this._call=null,this._time=0,this._timeout=0,this._paused=!0,this._handlers={"changed.owl.carousel":e.proxy((function(e){e.namespace&&"settings"===e.property.name?this._core.settings.autoplay?this.play():this.stop():e.namespace&&"position"===e.property.name&&this._paused&&(this._time=0)}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.autoplay&&this.play()}),this),"play.owl.autoplay":e.proxy((function(e,t,i){e.namespace&&this.play(t,i)}),this),"stop.owl.autoplay":e.proxy((function(e){e.namespace&&this.stop()}),this),"mouseover.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"mouseleave.owl.autoplay":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()}),this),"touchstart.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()}),this),"touchend.owl.core":e.proxy((function(){this._core.settings.autoplayHoverPause&&this.play()}),this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},t.Defaults,this._core.options)};o.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},o.prototype._next=function(n){this._call=t.setTimeout(e.proxy(this._next,this,n),this._timeout*(Math.round(this.read()/this._timeout)+1)-this.read()),this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},o.prototype.read=function(){return(new Date).getTime()-this._time},o.prototype.play=function(i,n){var o;this._core.is("rotating")||this._core.enter("rotating"),i=i||this._core.settings.autoplayTimeout,o=Math.min(this._time%(this._timeout||i),i),this._paused?(this._time=this.read(),this._paused=!1):t.clearTimeout(this._call),this._time+=this.read()%i-o,this._timeout=i,this._call=t.setTimeout(e.proxy(this._next,this,n),i-o)},o.prototype.stop=function(){this._core.is("rotating")&&(this._time=0,this._paused=!0,t.clearTimeout(this._call),this._core.leave("rotating"))},o.prototype.pause=function(){this._core.is("rotating")&&!this._paused&&(this._time=this.read(),this._paused=!0,t.clearTimeout(this._call))},o.prototype.destroy=function(){var e,t;for(e in this.stop(),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var o=function t(i){this._core=i,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy((function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")}),this),"added.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())}),this),"remove.owl.carousel":e.proxy((function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)}),this),"changed.owl.carousel":e.proxy((function(e){e.namespace&&"position"==e.property.name&&this.draw()}),this),"initialized.owl.carousel":e.proxy((function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))}),this),"refreshed.owl.carousel":e.proxy((function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))}),this)},this._core.options=e.extend({},t.Defaults,this._core.options),this.$element.on(this._handlers)};o.Defaults={nav:!1,navText:['<span aria-label="Previous">&#x2039;</span>','<span aria-label="Next">&#x203a;</span>'],navSpeed:!1,navElement:'button type="button" role="presentation"',navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},o.prototype.initialize=function(){var t,i=this._core.settings;for(t in this._controls.$relative=(i.navContainer?e(i.navContainer):e("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy((function(e){this.prev(i.navSpeed)}),this)),this._controls.$next=e("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy((function(e){this.next(i.navSpeed)}),this)),i.dotsData||(this._templates=[e('<button role="button">').addClass(i.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?e(i.dotsContainer):e("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","button",e.proxy((function(t){var n=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(n,i.dotsSpeed)}),this)),this._overrides)this._core[t]=e.proxy(this[t],this)},o.prototype.destroy=function(){var e,t,i,n,o;for(e in o=this._core.settings,this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)"$relative"===t&&o.navContainer?this._controls[t].html(""):this._controls[t].remove();for(n in this.overides)this._core[n]=this._overrides[n];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},o.prototype.update=function(){var e,t,i=this._core.clones().length/2,n=i+this._core.items().length,o=this._core.maximum(!0),s=this._core.settings,a=s.center||s.autoWidth||s.dotsData?1:s.dotsEach||s.items;if("page"!==s.slideBy&&(s.slideBy=Math.min(s.slideBy,s.items)),s.dots||"page"==s.slideBy)for(this._pages=[],e=i,t=0,0;e<n;e++){if(t>=a||0===t){if(this._pages.push({start:Math.min(o,e-i),end:e-i+a-1}),Math.min(o,e-i)===o)break;t=0}t+=this._core.mergers(this._core.relative(e))}},o.prototype.draw=function(){var t,i=this._core.settings,n=this._core.items().length<=i.items,o=this._core.relative(this._core.current()),s=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||n),i.nav&&(this._controls.$previous.toggleClass("disabled",!s&&o<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!s&&o>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||n),i.dots&&(t=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},o.prototype.onTrigger=function(t){var i=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},o.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy((function(e,i){return e.start<=t&&e.end>=t}),this)).pop()},o.prototype.getPosition=function(t){var i,n,o=this._core.settings;return"page"==o.slideBy?(i=e.inArray(this.current(),this._pages),n=this._pages.length,t?++i:--i,i=this._pages[(i%n+n)%n].start):(i=this._core.relative(this._core.current()),n=this._core.items().length,t?i+=o.slideBy:i-=o.slideBy),i},o.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},o.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},o.prototype.to=function(t,i,n){var o;!n&&this._pages.length?(o=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%o+o)%o].start,i)):e.proxy(this._overrides.to,this._core)(t,i)},e.fn.owlCarousel.Constructor.Plugins.Navigation=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){"use strict";var o=function i(n){this._core=n,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy((function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")}),this),"prepared.owl.carousel":e.proxy((function(t){if(t.namespace){var i=e(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=t.content}}),this),"changed.owl.carousel":e.proxy((function(i){if(i.namespace&&"position"===i.property.name){var n=this._core.items(this._core.relative(this._core.current())),o=e.map(this._hashes,(function(e,t){return e===n?t:null})).join();if(!o||t.location.hash.slice(1)===o)return;t.location.hash=o}}),this)},this._core.options=e.extend({},i.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy((function(e){var i=t.location.hash.substring(1),n=this._core.$stage.children(),o=this._hashes[i]&&n.index(this._hashes[i]);undefined!==o&&o!==this._core.current()&&this._core.to(this._core.relative(o),!1,!0)}),this))};o.Defaults={URLhashListener:!1},o.prototype.destroy=function(){var i,n;for(i in e(t).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(i,this._handlers[i]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=o}(window.Zepto||window.jQuery,window,document),function(e,t,i,n){function o(t,i){var n=!1,o=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+r.join(o+" ")+o).split(" "),(function(e,t){if(undefined!==a[t])return n=!i||t,!1})),n}function s(e){return o(e,!0)}var a=e("<support>").get(0).style,r="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},c=function(){return!!o("transform")},u=function(){return!!o("perspective")},d=function(){return!!o("animation")};(function(){return!!o("transition")})()&&(e.support.transition=new String(s("transition")),e.support.transition.end=l.transition.end[e.support.transition]),d()&&(e.support.animation=new String(s("animation")),e.support.animation.end=l.animation.end[e.support.animation]),c()&&(e.support.transform=new String(s("transform")),e.support.transform3d=u())}(window.Zepto||window.jQuery,window,document),function(e,t){function i(){e.Slim.parse(document)}if(e)if(e.Slim=function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,i,n){if(!(t>=1)){for(var o=Math.max(n.width,Math.min(i.width,Math.round(e.width*t))),s=Math.max(n.height,Math.min(i.height,Math.round(e.height*t))),a=e.width,r=e.height,l=e,c=void 0;a>o&&r>s;)c=document.createElement("canvas"),(a=Math.round(.5*l.width))<o&&(a=o),(r=Math.round(.5*l.height))<s&&(r=s),c.width=a,c.height=r,c.getContext("2d").drawImage(l,0,0,a,r),l=Y(c);e.width=o,e.height=s,e.getContext("2d").drawImage(l,0,0,o,s)}}!function(){function e(e,i){i=i||{bubbles:!1,cancelable:!1,detail:t};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}();var n=function e(t,i,n){var o,s,a=document.createElement("img");if(a.onerror=i,a.onload=function(){!s||n&&n.noRevoke||e.revokeObjectURL(s),i&&i(e.scale(a,n))},e.isInstanceOf("Blob",t)||e.isInstanceOf("File",t))o=s=e.createObjectURL(t),a._type=t.type;else{if("string"!=typeof t)return!1;o=t,n&&n.crossOrigin&&(a.crossOrigin=n.crossOrigin)}return o?(a.src=o,a):e.readFile(t,(function(e){var t=e.target;t&&t.result?a.src=t.result:i&&i(e)}))},o=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;n.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},n.transformCoordinates=function(){},n.getTransformedOptions=function(e,t){var i,n,o,s,a=t.aspectRatio;if(!a)return t;for(n in i={},t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i.crop=!0,(o=e.naturalWidth||e.width)/(s=e.naturalHeight||e.height)>a?(i.maxWidth=s*a,i.maxHeight=s):(i.maxWidth=o,i.maxHeight=o/a),i},n.renderImageToCanvas=function(e,t,i,n,o,s,a,r,l,c){return e.getContext("2d").drawImage(t,i,n,o,s,a,r,l,c),e},n.hasCanvasOption=function(e){return e.canvas||e.crop||!!e.aspectRatio},n.scale=function(e,i){function o(){var e=Math.max((l||_)/_,(c||C)/C);e>1&&(_*=e,C*=e)}function s(){var e=Math.min((a||_)/_,(r||C)/C);e<1&&(_*=e,C*=e)}i=i||{};var a,r,l,c,u,d,h,p,f,m,g,v=document.createElement("canvas"),b=e.getContext||n.hasCanvasOption(i)&&v.getContext,y=e.naturalWidth||e.width,w=e.naturalHeight||e.height,_=y,C=w;if(b&&(h=(i=n.getTransformedOptions(e,i)).left||0,p=i.top||0,i.sourceWidth?(u=i.sourceWidth,i.right!==t&&i.left===t&&(h=y-u-i.right)):u=y-h-(i.right||0),i.sourceHeight?(d=i.sourceHeight,i.bottom!==t&&i.top===t&&(p=w-d-i.bottom)):d=w-p-(i.bottom||0),_=u,C=d),a=i.maxWidth,r=i.maxHeight,l=i.minWidth,c=i.minHeight,b&&a&&r&&i.crop?(_=a,C=r,(g=u/d-a/r)<0?(d=r*u/a,i.top===t&&i.bottom===t&&(p=(w-d)/2)):g>0&&(u=a*d/r,i.left===t&&i.right===t&&(h=(y-u)/2))):((i.contain||i.cover)&&(l=a=a||l,c=r=r||c),i.cover?(s(),o()):(o(),s())),b){if((f=i.pixelRatio)>1&&(v.style.width=_+"px",v.style.height=C+"px",_*=f,C*=f,v.getContext("2d").scale(f,f)),(m=i.downsamplingRatio)>0&&m<1&&_<u&&C<d)for(;u*m>_;)v.width=u*m,v.height=d*m,n.renderImageToCanvas(v,e,h,p,u,d,0,0,v.width,v.height),u=v.width,d=v.height,(e=document.createElement("canvas")).width=u,e.height=d,n.renderImageToCanvas(e,v,0,0,u,d,0,0,u,d);return v.width=_,v.height=C,n.transformCoordinates(v,i),n.renderImageToCanvas(v,e,h,p,u,d,0,0,_,C)}return e.width=_,e.height=C,e},n.createObjectURL=function(e){return!!o&&o.createObjectURL(e)},n.revokeObjectURL=function(e){return!!o&&o.revokeObjectURL(e)},n.readFile=function(e,t,i){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=t,n[i=i||"readAsDataURL"])return n[i](e),n}return!1};var s=n.hasCanvasOption,a=n.transformCoordinates,r=n.getTransformedOptions;n.hasCanvasOption=function(e){return!!e.orientation||s.call(n,e)},n.transformCoordinates=function(e,t){a.call(n,e,t);var i=e.getContext("2d"),o=e.width,s=e.height,r=e.style.width,l=e.style.height,c=t.orientation;if(c&&!(c>8))switch(c>4&&(e.width=s,e.height=o,e.style.width=l,e.style.height=r),c){case 2:i.translate(o,0),i.scale(-1,1);break;case 3:i.translate(o,s),i.rotate(Math.PI);break;case 4:i.translate(0,s),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-s);break;case 7:i.rotate(.5*Math.PI),i.translate(o,-s),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-o,0)}},n.getTransformedOptions=function(e,t){var i,o,s=r.call(n,e,t),a=s.orientation;if(!a||a>8||1===a)return s;for(o in i={},s)s.hasOwnProperty(o)&&(i[o]=s[o]);switch(s.orientation){case 2:i.left=s.right,i.right=s.left;break;case 3:i.left=s.right,i.top=s.bottom,i.right=s.left,i.bottom=s.top;break;case 4:i.top=s.bottom,i.bottom=s.top;break;case 5:i.left=s.top,i.top=s.left,i.right=s.bottom,i.bottom=s.right;break;case 6:i.left=s.top,i.top=s.right,i.right=s.bottom,i.bottom=s.left;break;case 7:i.left=s.bottom,i.top=s.right,i.right=s.top,i.bottom=s.left;break;case 8:i.left=s.bottom,i.top=s.left,i.right=s.top,i.bottom=s.right}return s.orientation>4&&(i.maxWidth=s.maxHeight,i.maxHeight=s.maxWidth,i.minWidth=s.minHeight,i.minHeight=s.minWidth,i.sourceWidth=s.sourceHeight,i.sourceHeight=s.sourceWidth),i};var l=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);n.blobSlice=l&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},n.metaDataParsers={jpeg:{65505:[]}},n.parseMetaData=function(e,t,i){var o=this,s=(i=i||{}).maxMetaDataSize||262144,a={};!!(window.DataView&&e&&e.size>=12&&"image/jpeg"===e.type&&n.blobSlice)&&n.readFile(n.blobSlice.call(e,0,s),(function(e){if(e.target.error)t(a);else{var s,r,l,c,u=e.target.result,d=new DataView(u),h=2,p=d.byteLength-4,f=h;if(65496===d.getUint16(0)){for(;h<p&&((s=d.getUint16(h))>=65504&&s<=65519||65534===s)&&!(h+(r=d.getUint16(h+2)+2)>d.byteLength);){if(l=n.metaDataParsers.jpeg[s])for(c=0;c<l.length;c+=1)l[c].call(o,d,h,r,a,i);f=h+=r}!i.disableImageHead&&f>6&&(u.slice?a.imageHead=u.slice(0,f):a.imageHead=new Uint8Array(u).subarray(0,f))}t(a)}}),"readAsArrayBuffer")||t(a)},(n.ExifMap=function(){return this}).prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.getExifThumbnail=function(e,t,i){var n,o,s;if(i&&!(t+i>e.byteLength)){for(n=[],o=0;o<i;o+=1)s=e.getUint8(t+o),n.push((s<16?"0":"")+s.toString(16));return"data:image/jpeg,%"+n.join("%")}},(n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}})[7]=n.exifTagTypes[1],n.getExifValue=function(e,t,i,o,s,a){var r,l,c,u,d,h,p=n.exifTagTypes[o];if(p&&!((l=(r=p.size*s)>4?t+e.getUint32(i+8,a):i+8)+r>e.byteLength)){if(1===s)return p.getValue(e,l,a);for(c=[],u=0;u<s;u+=1)c[u]=p.getValue(e,l+u*p.size,a);if(p.ascii){for(d="",u=0;u<c.length&&"\0"!==(h=c[u]);u+=1)d+=h;return d}return c}},n.parseExifTag=function(e,t,i,o,s){var a=e.getUint16(i,o);s.exif[a]=n.getExifValue(e,t,i,e.getUint16(i+2,o),e.getUint32(i+4,o),o)},n.parseExifTags=function(e,t,i,n,o){var s,a,r;if(!(i+6>e.byteLength||(s=e.getUint16(i,n),a=i+2+12*s,a+4>e.byteLength))){for(r=0;r<s;r+=1)this.parseExifTag(e,t,i+2+12*r,n,o);return e.getUint32(a,n)}},n.parseExifData=function(e,t,i,o,s){if(!s.disableExif){var a,r,l,c=t+10;if(1165519206===e.getUint32(t+4)&&!(c+8>e.byteLength)&&0===e.getUint16(t+8)){switch(e.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:return}42===e.getUint16(c+2,a)&&(r=e.getUint32(c+4,a),o.exif=new n.ExifMap,(r=n.parseExifTags(e,c,c+r,a,o))&&!s.disableExifThumbnail&&(r=n.parseExifTags(e,c,c+r,a,l={exif:{}}),l.exif[513]&&(o.exif.Thumbnail=n.getExifThumbnail(e,c+l.exif[513],l.exif[514]))),o.exif[34665]&&!s.disableExifSub&&n.parseExifTags(e,c,c+o.exif[34665],a,o),o.exif[34853]&&!s.disableExifGps&&n.parseExifTags(e,c,c+o.exif[34853],a,o))}}},n.metaDataParsers.jpeg[65505].push(n.parseExifData);var c=function(){var e=[],i=[],n=[],o="transform",s=window.getComputedStyle(document.documentElement,"");"webkit"===(Array.prototype.slice.call(s).join("").match(/-(moz|webkit|ms)-/)||""===s.OLink&&["","o"])[1]&&(o="webkitTransform");var a=function(e,i,n){var o=e;if(o.length!==t){for(var s={chainers:[],then:function(e){return this.snabbt(e)},snabbt:function(e){var t=this.chainers.length;return this.chainers.forEach((function(i,n){i.snabbt(r(e,n,t))})),s},setValue:function(e){return this.chainers.forEach((function(t){t.setValue(e)})),s},finish:function(){return this.chainers.forEach((function(e){e.finish()})),s},rollback:function(){return this.chainers.forEach((function(e){e.rollback()})),s}},a=0,c=o.length;a<c;++a)"string"==typeof i?s.chainers.push(l(o[a],i,r(n,a,c))):s.chainers.push(l(o[a],r(i,a,c),n));return s}return"string"==typeof i?l(o,i,r(n,0,1)):l(o,r(i,0,1),n)},r=function(e,t,i){if(!e)return e;var n=j(e);N(e.delay)&&(n.delay=e.delay(t,i)),N(e.callback)&&(n.complete=function(){e.callback.call(this,t,i)});var o=N(e.allDone),s=N(e.complete);(s||o)&&(n.complete=function(){s&&e.complete.call(this,t,i),o&&t==i-1&&e.allDone()}),N(e.valueFeeder)&&(n.valueFeeder=function(n,o){return e.valueFeeder(n,o,t,i)}),N(e.easing)&&(n.easing=function(n){return e.easing(n,t,i)});return["position","rotation","skew","rotationPost","scale","width","height","opacity","fromPosition","fromRotation","fromSkew","fromRotationPost","fromScale","fromWidth","fromHeight","fromOpacity","transformOrigin","duration","delay"].forEach((function(o){N(e[o])&&(n[o]=e[o](t,i))})),n},l=function(e,t,n){if("attention"===t)return c(e,n);if("stop"===t)return u(e);if("detach"===t)return h(e);var o=t;m();var s=v(e),a=s;a=b(o,a,!0);var l=j(s);l=b(o,l);var d=y(a,l,o),p=x(d);i.push([e,p]),p.updateElement(e,!0);var f=[],g={snabbt:function(e){return f.unshift(r(e,0,1)),g},then:function(e){return this.snabbt(e)}};return _((function t(n){if(p.tick(n),p.updateElement(e),!p.isStopped())return p.completed()?void(o.loop>1&&!p.isStopped()?(o.loop-=1,p.restart(),_(t)):(o.complete&&o.complete.call(e),f.length&&(o=f.pop(),a=b(o,l,!0),l=b(o,j(l)),o=y(a,l,o),p=x(o),i.push([e,p]),p.tick(n),_(t)))):_(t)})),o.manual?p:g},c=function(e,t){var n=b(t,O({}));t.movement=n;var o=S(t);i.push([e,o]),_((function i(n){o.tick(n),o.updateElement(e),o.completed()?(t.callback&&t.callback(e),t.loop&&t.loop>1&&(t.loop--,o.restart(),_(i))):_(i)}))},u=function(e){for(var t=0,n=i.length;t<n;++t){var o=i[t],s=o[0],a=o[1];s===e&&a.stop()}},d=function(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i][0]===t)return i;return-1},h=function(e){var t,o,s=[],a=i.concat(n),r=a.length;for(o=0;o<r;++o)t=a[o][0],(e.contains(t)||e===t)&&s.push(t);for(r=s.length,o=0;o<r;++o)p(s[o])},p=function(e){u(e);var t=d(i,e);t>=0&&i.splice(t,1),(t=d(n,e))>=0&&n.splice(t,1)},f=function(e,t){for(var i=0,n=e.length;i<n;++i){var o=e[i],s=o[0],a=o[1];if(s===t){var r=a.getCurrentState();return a.stop(),r}}},m=function(){n=n.filter((function(e){return g(e[0]).body}))},g=function(e){for(var t=e;t.parentNode;)t=t.parentNode;return t},v=function(e){var t=f(i,e);return t||f(n,e)},b=function(e,t,i){t||(t=O({position:[0,0,0],rotation:[0,0,0],rotationPost:[0,0,0],scale:[1,1],skew:[0,0]}));var n="position",o="rotation",s="skew",a="rotationPost",r="scale",l="scalePost",c="width",u="height",d="opacity";return i&&(n="fromPosition",o="fromRotation",s="fromSkew",a="fromRotationPost",r="fromScale",l="fromScalePost",c="fromWidth",u="fromHeight",d="fromOpacity"),t.position=z(e[n],t.position),t.rotation=z(e[o],t.rotation),t.rotationPost=z(e[a],t.rotationPost),t.skew=z(e[s],t.skew),t.scale=z(e[r],t.scale),t.scalePost=z(e[l],t.scalePost),t.opacity=e[d],t.width=e[c],t.height=e[u],t},y=function(e,t,i){return i.startState=e,i.endState=t,i},w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},_=function(t){0===e.length&&w(C),e.push(t)},C=function t(o){for(var s=e.length,a=0;a<s;++a)e[a](o);e.splice(0,s);var r=i.filter((function(e){return e[1].completed()}));n=n.filter((function(e){for(var t=0,i=r.length;t<i;++t)if(e[0]===r[t][0])return!1;return!0})),n=n.concat(r),i=i.filter((function(e){return!e[1].completed()})),0!==e.length&&w(t)},x=function(e){var i=e.startState,n=e.endState,o=z(e.duration,500),s=z(e.delay,0),a=e.perspective,r=E(z(e.easing,"linear"),e),l=0===o?n.clone():i.clone();e.transformOrigin,l.transformOrigin=e.transformOrigin;var c,u,d=0,h=0,p=!1,f=!1,m=e.manual,g=0,v=s/o;return u=e.valueFeeder?P(e.valueFeeder,i,n,l):R(i,n,l),{stop:function(){p=!0},isStopped:function(){return p},finish:function(e){m=!1,d=h-o*g,c=e,r.resetFrom=g},rollback:function(e){m=!1,u.setReverse(),d=h-o*(1-g),c=e,r.resetFrom=g},restart:function(){d=t,r.resetFrom(0)},tick:function(e){if(!p){if(m)return h=e,void this.updateCurrentTransform();if(d||(d=e),e-d>s){f=!0,h=e-s;var t=Math.min(Math.max(0,h-d),o);r.tick(t/o),this.updateCurrentTransform(),this.completed()&&c&&c()}}},getCurrentState:function(){return l},setValue:function(e){f=!0,g=Math.min(Math.max(e,1e-4),1+v)},updateCurrentTransform:function(){var e=r.getValue();if(m){var t=Math.max(1e-5,g-v);r.tick(t),e=r.getValue()}u.tween(e)},completed:function(){return!!p||0!==d&&r.completed()},updateElement:function(e,t){if(f||t){var i=u.asMatrix(),n=u.getProperties();L(e,i,a),M(e,n)}}}},S=function(e){var i=e.movement;e.initialVelocity=.1,e.equilibriumPosition=0;var n=k(e),o=!1,s=i.position,a=i.rotation,r=i.rotationPost,l=i.scale,c=i.skew,u=O({position:s?[0,0,0]:t,rotation:a?[0,0,0]:t,rotationPost:r?[0,0,0]:t,scale:l?[0,0]:t,skew:c?[0,0]:t});return{stop:function(){o=!0},isStopped:function(e){return o},tick:function(e){o||n.equilibrium||(n.tick(),this.updateMovement())},updateMovement:function(){var e=n.getValue();s&&(u.position[0]=i.position[0]*e,u.position[1]=i.position[1]*e,u.position[2]=i.position[2]*e),a&&(u.rotation[0]=i.rotation[0]*e,u.rotation[1]=i.rotation[1]*e,u.rotation[2]=i.rotation[2]*e),r&&(u.rotationPost[0]=i.rotationPost[0]*e,u.rotationPost[1]=i.rotationPost[1]*e,u.rotationPost[2]=i.rotationPost[2]*e),l&&(u.scale[0]=1+i.scale[0]*e,u.scale[1]=1+i.scale[1]*e),c&&(u.skew[0]=i.skew[0]*e,u.skew[1]=i.skew[1]*e)},updateElement:function(e){L(e,u.asMatrix()),M(e,u.getProperties())},getCurrentState:function(){return u},completed:function(){return n.equilibrium||o},restart:function(){n=k(e)}}},k=function(e){var t=z(e.startPosition,0),i=z(e.equilibriumPosition,1),n=z(e.initialVelocity,0),o=z(e.springConstant,.8),s=z(e.springDeceleration,.9),a=z(e.springMass,10),r=!1;return{tick:function(e){0===e||r||(t+=n+=-(t-i)*o/a,n*=s,Math.abs(t-i)<.001&&Math.abs(n)<.001&&(r=!0))},resetFrom:function(e){t=e,n=0},getValue:function(){return r?i:t},completed:function(){return r}}},T={linear:function(e){return e},ease:function(e){return(Math.cos(e*Math.PI+Math.PI)+1)/2},easeIn:function(e){return e*e},easeOut:function(e){return 1-Math.pow(e-1,2)}},E=function(e,t){if("spring"==e)return k(t);var i=e;N(e)||(i=T[e]);var n,o=i,s=0;return{tick:function(e){s=o(e),n=e},resetFrom:function(e){n=0},getValue:function(){return s},completed:function(){return n>=1&&n}}},$=function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1},D=function(e,t){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]},A=function(){var e=new Float32Array(16),t=new Float32Array(16),i=new Float32Array(16);return $(e),{data:e,asCSS:function(){for(var t="matrix3d(",i=0;i<15;++i)t+=Math.abs(e[i])<1e-4?"0,":e[i].toFixed(10)+",";return t+(Math.abs(e[15])<1e-4?"0)":e[15].toFixed(10)+")")},clear:function(){$(e)},translate:function(n,o,s){return D(e,t),function(e,t,i,n){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t,e[13]=i,e[14]=n,e[15]=1}(i,n,o,s),I(t,i,e),this},rotateX:function(n){return D(e,t),function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=Math.cos(t),e[6]=-Math.sin(t),e[7]=0,e[8]=0,e[9]=Math.sin(t),e[10]=Math.cos(t),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(i,n),I(t,i,e),this},rotateY:function(n){return D(e,t),function(e,t){e[0]=Math.cos(t),e[1]=0,e[2]=Math.sin(t),e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=-Math.sin(t),e[9]=0,e[10]=Math.cos(t),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(i,n),I(t,i,e),this},rotateZ:function(n){return D(e,t),function(e,t){e[0]=Math.cos(t),e[1]=-Math.sin(t),e[2]=0,e[3]=0,e[4]=Math.sin(t),e[5]=Math.cos(t),e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(i,n),I(t,i,e),this},scale:function(n,o){return D(e,t),function(e,t,i){e[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(i,n,o),I(t,i,e),this},skew:function(n,o){return D(e,t),function(e,t,i){e[0]=1,e[1]=Math.tan(t),e[2]=0,e[3]=0,e[4]=Math.tan(i),e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}(i,n,o),I(t,i,e),this}}},I=function(e,t,i){return i[0]=e[0]*t[0]+e[1]*t[4]+e[2]*t[8]+e[3]*t[12],i[1]=e[0]*t[1]+e[1]*t[5]+e[2]*t[9]+e[3]*t[13],i[2]=e[0]*t[2]+e[1]*t[6]+e[2]*t[10]+e[3]*t[14],i[3]=e[0]*t[3]+e[1]*t[7]+e[2]*t[11]+e[3]*t[15],i[4]=e[4]*t[0]+e[5]*t[4]+e[6]*t[8]+e[7]*t[12],i[5]=e[4]*t[1]+e[5]*t[5]+e[6]*t[9]+e[7]*t[13],i[6]=e[4]*t[2]+e[5]*t[6]+e[6]*t[10]+e[7]*t[14],i[7]=e[4]*t[3]+e[5]*t[7]+e[6]*t[11]+e[7]*t[15],i[8]=e[8]*t[0]+e[9]*t[4]+e[10]*t[8]+e[11]*t[12],i[9]=e[8]*t[1]+e[9]*t[5]+e[10]*t[9]+e[11]*t[13],i[10]=e[8]*t[2]+e[9]*t[6]+e[10]*t[10]+e[11]*t[14],i[11]=e[8]*t[3]+e[9]*t[7]+e[10]*t[11]+e[11]*t[15],i[12]=e[12]*t[0]+e[13]*t[4]+e[14]*t[8]+e[15]*t[12],i[13]=e[12]*t[1]+e[13]*t[5]+e[14]*t[9]+e[15]*t[13],i[14]=e[12]*t[2]+e[13]*t[6]+e[14]*t[10]+e[15]*t[14],i[15]=e[12]*t[3]+e[13]*t[7]+e[14]*t[11]+e[15]*t[15],i},O=function e(i){var n=A(),o={opacity:t,width:t,height:t};return{position:i.position,rotation:i.rotation,rotationPost:i.rotationPost,skew:i.skew,scale:i.scale,scalePost:i.scalePost,opacity:i.opacity,width:i.width,height:i.height,clone:function(){return e({position:this.position?this.position.slice(0):t,rotation:this.rotation?this.rotation.slice(0):t,rotationPost:this.rotationPost?this.rotationPost.slice(0):t,skew:this.skew?this.skew.slice(0):t,scale:this.scale?this.scale.slice(0):t,scalePost:this.scalePost?this.scalePost.slice(0):t,height:this.height,width:this.width,opacity:this.opacity})},asMatrix:function(){var e=n;return e.clear(),this.transformOrigin&&e.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),this.scale&&e.scale(this.scale[0],this.scale[1]),this.skew&&e.skew(this.skew[0],this.skew[1]),this.rotation&&(e.rotateX(this.rotation[0]),e.rotateY(this.rotation[1]),e.rotateZ(this.rotation[2])),this.position&&e.translate(this.position[0],this.position[1],this.position[2]),this.rotationPost&&(e.rotateX(this.rotationPost[0]),e.rotateY(this.rotationPost[1]),e.rotateZ(this.rotationPost[2])),this.scalePost&&e.scale(this.scalePost[0],this.scalePost[1]),this.transformOrigin&&e.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),e},getProperties:function(){return o.opacity=this.opacity,o.width=this.width+"px",o.height=this.height+"px",o}}},R=function(e,i,n){var o=e,s=i,a=n,r=s.position!==t,l=s.rotation!==t,c=s.rotationPost!==t,u=s.scale!==t,d=s.skew!==t,h=s.width!==t,p=s.height!==t,f=s.opacity!==t;return{tween:function(e){if(r){var t=s.position[0]-o.position[0],i=s.position[1]-o.position[1],n=s.position[2]-o.position[2];a.position[0]=o.position[0]+e*t,a.position[1]=o.position[1]+e*i,a.position[2]=o.position[2]+e*n}if(l){var m=s.rotation[0]-o.rotation[0],g=s.rotation[1]-o.rotation[1],v=s.rotation[2]-o.rotation[2];a.rotation[0]=o.rotation[0]+e*m,a.rotation[1]=o.rotation[1]+e*g,a.rotation[2]=o.rotation[2]+e*v}if(c){var b=s.rotationPost[0]-o.rotationPost[0],y=s.rotationPost[1]-o.rotationPost[1],w=s.rotationPost[2]-o.rotationPost[2];a.rotationPost[0]=o.rotationPost[0]+e*b,a.rotationPost[1]=o.rotationPost[1]+e*y,a.rotationPost[2]=o.rotationPost[2]+e*w}if(d){var _=s.scale[0]-o.scale[0],C=s.scale[1]-o.scale[1];a.scale[0]=o.scale[0]+e*_,a.scale[1]=o.scale[1]+e*C}if(u){var x=s.skew[0]-o.skew[0],S=s.skew[1]-o.skew[1];a.skew[0]=o.skew[0]+e*x,a.skew[1]=o.skew[1]+e*S}if(h){var k=s.width-o.width;a.width=o.width+e*k}if(p){var T=s.height-o.height;a.height=o.height+e*T}if(f){var E=s.opacity-o.opacity;a.opacity=o.opacity+e*E}},asMatrix:function(){return a.asMatrix()},getProperties:function(){return a.getProperties()},setReverse:function(){var e=o;o=s,s=e}}},P=function(e,i,n,o){var s=e(0,A()),a=i,r=n,l=o,c=!1;return{tween:function(i){c&&(i=1-i),s.clear(),s=e(i,s);var n=r.width-a.width,o=r.height-a.height,u=r.opacity-a.opacity;r.width!==t&&(l.width=a.width+i*n),r.height!==t&&(l.height=a.height+i*o),r.opacity!==t&&(l.opacity=a.opacity+i*u)},asMatrix:function(){return s},getProperties:function(){return l.getProperties()},setReverse:function(){c=!0}}},z=function(e,t){return void 0===e?t:e},L=function(e,t,i){var n="";i&&(n="perspective("+i+"px) ");var s=t.asCSS();e.style[o]=n+s},M=function(e,t){for(var i in t)e.style[i]=t[i]},N=function(e){return"function"==typeof e},j=function(e){if(!e)return e;var t={};for(var i in e)t[i]=e[i];return t};return a.createMatrix=A,a.setElementTransform=L,a}(),u=function(){function e(e,o,s,a,r,l){var c,u,d,h,p,f,m,g,v,b,y,w,_,C,x,S,k,T,E,$,D,A,I,O,R=e.data,P=l+l+1,z=a-1,L=r-1,M=l+1,N=M*(M+1)/2,j=new t,q=j;for(d=1;d<P;d++)if(q=q.next=new t,d==M)var F=q;q.next=j;var H=null,U=null;m=f=0;var B=i[l],W=n[l];for(u=0;u<r;u++){for(S=k=T=E=g=v=b=y=0,w=M*($=R[f]),_=M*(D=R[f+1]),C=M*(A=R[f+2]),x=M*(I=R[f+3]),g+=N*$,v+=N*D,b+=N*A,y+=N*I,q=j,d=0;d<M;d++)q.r=$,q.g=D,q.b=A,q.a=I,q=q.next;for(d=1;d<M;d++)h=f+((z<d?z:d)<<2),g+=(q.r=$=R[h])*(O=M-d),v+=(q.g=D=R[h+1])*O,b+=(q.b=A=R[h+2])*O,y+=(q.a=I=R[h+3])*O,S+=$,k+=D,T+=A,E+=I,q=q.next;for(H=j,U=F,c=0;c<a;c++)R[f+3]=I=y*B>>W,0!=I?(I=255/I,R[f]=(g*B>>W)*I,R[f+1]=(v*B>>W)*I,R[f+2]=(b*B>>W)*I):R[f]=R[f+1]=R[f+2]=0,g-=w,v-=_,b-=C,y-=x,w-=H.r,_-=H.g,C-=H.b,x-=H.a,h=m+((h=c+l+1)<z?h:z)<<2,g+=S+=H.r=R[h],v+=k+=H.g=R[h+1],b+=T+=H.b=R[h+2],y+=E+=H.a=R[h+3],H=H.next,w+=$=U.r,_+=D=U.g,C+=A=U.b,x+=I=U.a,S-=$,k-=D,T-=A,E-=I,U=U.next,f+=4;m+=a}for(c=0;c<a;c++){for(k=T=E=S=v=b=y=g=0,w=M*($=R[f=c<<2]),_=M*(D=R[f+1]),C=M*(A=R[f+2]),x=M*(I=R[f+3]),g+=N*$,v+=N*D,b+=N*A,y+=N*I,q=j,d=0;d<M;d++)q.r=$,q.g=D,q.b=A,q.a=I,q=q.next;for(p=a,d=1;d<=l;d++)f=p+c<<2,g+=(q.r=$=R[f])*(O=M-d),v+=(q.g=D=R[f+1])*O,b+=(q.b=A=R[f+2])*O,y+=(q.a=I=R[f+3])*O,S+=$,k+=D,T+=A,E+=I,q=q.next,d<L&&(p+=a);for(f=c,H=j,U=F,u=0;u<r;u++)R[(h=f<<2)+3]=I=y*B>>W,I>0?(I=255/I,R[h]=(g*B>>W)*I,R[h+1]=(v*B>>W)*I,R[h+2]=(b*B>>W)*I):R[h]=R[h+1]=R[h+2]=0,g-=w,v-=_,b-=C,y-=x,w-=H.r,_-=H.g,C-=H.b,x-=H.a,h=c+((h=u+M)<L?h:L)*a<<2,g+=S+=H.r=R[h],v+=k+=H.g=R[h+1],b+=T+=H.b=R[h+2],y+=E+=H.a=R[h+3],H=H.next,w+=$=U.r,_+=D=U.g,C+=A=U.b,x+=I=U.a,S-=$,k-=D,T-=A,E-=I,U=U.next,f+=a}return e}function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return function(t,i,n,o,s,a){if(!(isNaN(a)||a<1)){a|=0;var r=function(e,t,i,n,o){if("string"==typeof e)e=document.getElementById(e);else if(!e instanceof HTMLCanvasElement)return;var s,a=e.getContext("2d");try{try{s=a.getImageData(t,i,n,o)}catch(e){throw new Error("unable to access local image data: "+e)}}catch(e){throw new Error("unable to access image data: "+e)}return s}(t,i,n,o,s);r=e(r,i,n,o,s,a),t.getContext("2d").putImageData(r,i,n)}}}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var n=atob(this.toDataURL(t,i).split(",")[1]),o=n.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=n.charCodeAt(a);e(new Blob([s],{type:t||"image/png"}))}});var d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),h="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},p=function(e){if(void 0===e.dataset){var t,i={},n=e.attributes;for(t in n)n.hasOwnProperty(t)&&n[t].name&&/^data-[a-z_\-\d]*$/i.test(n[t].name)&&(i[f(n[t].name.substr(5))]=n[t].value);return i}return e.dataset},f=function(e){return e.replace(/\-./g,(function(e){return e.charAt(1).toUpperCase()}))},m=function(e){for(var t=[],i=Array.prototype.slice.call(e.attributes),n=i.length,o=0;o<n;o++)t.push({name:i[o].name,value:i[o].value});return t},g=function(e){return{x:void 0===e.offsetX?e.layerX:e.offsetX,y:void 0===e.offsetY?e.layerY:e.offsetY}},v=function(e,t){var i,n={},o=t||{};for(i in e)e.hasOwnProperty(i)&&(n[i]=void 0===o[i]?e[i]:o[i]);return n},b=27,y=13,w=["touchstart","pointerdown","mousedown"],_=["touchmove","pointermove","mousemove"],C=["touchend","touchcancel","pointerup","mouseup"],x={jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp"},S=/(\.png|\.bmp|\.gif|\.jpg|\.jpe|\.jpg|\.jpeg)$/,k=function(e,t){var i=document.createElement(e);return t&&(i.className=t),i},T=function(e,t,i){t.forEach((function(t){e.addEventListener(t,i,!1)}))},E=function(e,t,i){t.forEach((function(t){e.removeEventListener(t,i,!1)}))},$=function(e){var t=function(e){var t=e.changedTouches?e.changedTouches[0]:e;if(t)return{x:t.pageX,y:t.pageY}}(e);return t.x-=window.pageXOffset||document.documentElement.scrollLeft,t.y-=window.pageYOffset||document.documentElement.scrollTop,t},D=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},A=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},I=function(e){return e[e.length-1]},O=function(e,t,i){return Math.max(t,Math.min(i,e))},R=function(e,t){if(!t)return!1;for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},P=function(e){e&&(e.style.webkitTransform="",e.style.transform="")},z=function(e){var t=void 0;for(t in x)if(x.hasOwnProperty(t)&&x[t]===e)return t;return e},L=function(e){return e.split("/").pop().split("?").shift()},M=function(e){var i=arguments.length>1&&arguments[1]!==t?arguments[1]:"";return(i+e).slice(-i.length)},N=function(e){return e.getFullYear()+"-"+M(e.getMonth()+1,"00")+"-"+M(e.getDate(),"00")+"_"+M(e.getHours(),"00")+"-"+M(e.getMinutes(),"00")+"-"+M(e.getSeconds(),"00")},j=function(e){return e.type||"image/jpeg"},q=function(e){return"string"!=typeof e?N(new Date):L(e).split(".").shift()},F=function(e,t){return"lastModified"in File.prototype?e.lastModified=new Date:e.lastModifiedDate=new Date,e.name=t,e},H=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(i){var n=L(e),o=function(e){var t=void 0;for(t in x)if(x.hasOwnProperty(t)&&-1!==e.indexOf(x[t]))return x[t];return null}(this.response.type);S.test(n)||(n+="."+z(o));var s=F(this.response,n);t(Z(s,o))},i.send()},U=function(e,t){for(var i=function(e){var t=e.split(",")[1].replace(/\s/g,"");return atob(t)}(e),n=new ArrayBuffer(i.length),o=new Uint8Array(n),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);var a=te(e);return void 0===t&&(t=N(new Date)+"."+z(a)),F(B(n,a),t)},B=function(e,t){var i=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(i){var n=new i;return n.append(e),n.getBlob(t)}return new Blob([e],{type:t})},W=function(e,t,i){var o="string"!=typeof e||0!==e.indexOf("data:image");n.parseMetaData(e,(function(s){var a={canvas:!0,crossOrigin:o};t&&(a.maxWidth=t.width,a.maxHeight=t.height),s.exif&&(a.orientation=s.exif.get("Orientation")),n(e,(function(e){return"error"===e.type?void i():void i(e,s)}),a)}))},V=function(e,t,i){var n,o,s,a;return t/e<i?(n=.5*(e-(s=(a=t)/i)),o=0):(n=0,o=.5*(t-(a=(s=e)*i))),{x:n,y:o,height:a,width:s}},G=function(e){var n=arguments.length>1&&arguments[1]!==t?arguments[1]:{},o=arguments[2],s=k("canvas"),a=n.rotation,r=n.crop,l=n.size,c=n.filters,u=n.minSize;if(r){var d=a%180!=0,h={width:d?e.height:e.width,height:d?e.width:e.height};r.x<0&&(r.x=0),r.y<0&&(r.y=0),r.width>h.width&&(r.width=h.width),r.height>h.height&&(r.height=h.height),r.y+r.height>h.height&&(r.y=Math.max(0,h.height-r.height)),r.x+r.width>h.width&&(r.x=Math.max(0,h.width-r.width));var p=r.x/h.width,f=r.y/h.height,m=r.width/h.width,g=r.height/h.height;s.width=r.width,s.height=r.height;var v=s.getContext("2d");90===a?(v.translate(.5*s.width,.5*s.height),v.rotate(-90*Math.PI/180),v.drawImage(e,(1-f)*e.width-e.width*g,r.x,r.height,r.width,.5*-s.height,.5*-s.width,s.height,s.width)):180===a?(v.translate(.5*s.width,.5*s.height),v.rotate(-180*Math.PI/180),v.drawImage(e,(1-(p+m))*h.width,(1-(f+g))*h.height,m*h.width,g*h.height,.5*-s.width,.5*-s.height,s.width,s.height)):270===a?(v.translate(.5*s.width,.5*s.height),v.rotate(-270*Math.PI/180),v.drawImage(e,r.y,(1-p)*e.height-e.height*m,r.height,r.width,.5*-s.height,.5*-s.width,s.height,s.width)):v.drawImage(e,r.x,r.y,r.width,r.height,0,0,s.width,s.height)}if(l){var b=l.width/s.width,y=l.height/s.height,w=Math.min(b,y);i(s,w,l,u),c.sharpen>0&&Q(s,X(c.sharpen))}o(s)},Q=function(e,t){e.getContext("2d").putImageData(t(function(e){return e.getContext("2d").getImageData(0,0,e.width,e.height)}(e),e.width,e.height),0,0)},X=function(e){return function(t,i,n){for(var o=[0,-1,0,-1,5,-1,0,-1,0],s=Math.round(Math.sqrt(o.length)),a=.5*s|0,r=function(e,t,i){var n=document.createElement("canvas");n.width=e,n.height=t;var o=n.getContext("2d").createImageData(n.width,n.height);return i&&o.set(i.data),o}(i,n),l=r.data,c=t.data,u=n,d=void 0;u--;)for(d=i;d--;){for(var h=u,p=d,f=4*(u*i+d),m=0,g=0,v=0,b=0;b<s;b++)for(var y=0;y<s;y++){var w=h+b-a,_=p+y-a;if(w>=0&&w<n&&_>=0&&_<i){var C=4*(w*i+_),x=o[b*s+y];m+=c[C]*x,g+=c[C+1]*x,v+=c[C+2]*x,c[C+3]*x}}l[f]=m*e+c[f]*(1-e),l[f+1]=g*e+c[f+1]*(1-e),l[f+2]=v*e+c[f+2]*(1-e),l[f+3]=c[f+3]}return r}},Y=function(e){return K(e,1)},K=function(e,t){if(!e)return null;var n=document.createElement("canvas"),o=n.getContext("2d");return n.width=e.width,n.height=e.height,o.drawImage(e,0,0),t>0&&1!=t&&i(n,t,{width:Math.round(e.width*t),height:Math.round(e.height*t)},{width:0,height:0}),n},J=function(e){return"object"===("undefined"==typeof value?"undefined":h(value))&&null!==value?JSON.parse(JSON.stringify(e)):e},Z=function(e){var i=arguments.length>1&&arguments[1]!==t?arguments[1]:null;if(!e)return null;var n=e.slice(0,e.size,i||e.type);return n.name=e.name,"lastModified"in File.prototype&&e.lastModified?n.lastModified=new Date(e.lastModified):e.lastModifiedDate&&(n.lastModifiedDate=new Date(e.lastModifiedDate)),n},ee=function(e,i,n){return e&&i?e.toDataURL(i,function(e){return"image/jpeg"===e}(i)&&"number"==typeof n?n/100:t):null},te=function(e){if(!e)return null;var t=e.substr(0,16).match(/^.+;/);return t.length?t[0].substring(5,t[0].length-1):null},ie=function(e){return Array.prototype.slice.call(e)},ne=function(e){e.parentNode.removeChild(e)},oe=function(e){var t=k("div");return e.parentNode&&(e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)),t.appendChild(e),t},se=function(e,t,i,n){var o=(n-90)*Math.PI/180;return{x:e+i*Math.cos(o),y:t+i*Math.sin(o)}},ae=function(e,t,i,n){return function(e,t,i,n,o){var s=se(e,t,i,o),a=se(e,t,i,n),r=o-n<=180?"0":"1";return["M",s.x,s.y,"A",i,i,0,r,0,a.x,a.y].join(" ")}(e,t,i,0,360*n)},re=function(){var i={n:function(e,t,i,n){var o,s,a,r,l,c,u;return(a=e.y+e.height)-(o=O(t.y,0,a))<i.min.height&&(o=a-i.min.height),(l=n?(a-o)/n:e.width)<i.min.width&&(o=a-(l=i.min.width)*n),c=.5*(l-e.width),r=e.x-c,s=e.x+e.width+c,(r<0||s>i.width)&&(u=Math.min(e.x,i.width-(e.x+e.width)),r=e.x-u,o=a-(l=(s=e.x+e.width+u)-r)*n),{x:r,y:o,width:s-r,height:a-o}},s:function(e,t,i,n){var o,s,a,r,l,c,u;return o=e.y,(a=O(t.y,o,i.height))-o<i.min.height&&(a=o+i.min.height),(l=n?(a-o)/n:e.width)<i.min.width&&(a=o+(l=i.min.width)*n),c=.5*(l-e.width),r=e.x-c,s=e.x+e.width+c,(r<0||s>i.width)&&(u=Math.min(e.x,i.width-(e.x+e.width)),r=e.x-u,a=o+(l=(s=e.x+e.width+u)-r)*n),{x:r,y:o,width:s-r,height:a-o}},e:function(e,t,i,n){var o,s,a,r,l,c,u;return r=e.x,(s=O(t.x,r,i.width))-r<i.min.width&&(s=r+i.min.width),(l=n?(s-r)*n:e.height)<i.min.height&&(s=r+(l=i.min.height)/n),c=.5*(l-e.height),o=e.y-c,a=e.y+e.height+c,(o<0||a>i.height)&&(u=Math.min(e.y,i.height-(e.y+e.height)),o=e.y-u,s=r+(l=(a=e.y+e.height+u)-o)/n),{x:r,y:o,width:s-r,height:a-o}},w:function(e,t,i,n){var o,s,a,r,l,c,u,d;return(s=e.x+e.width)-(r=O(t.x,0,s))<i.min.width&&(r=s-i.min.width),(c=n?(s-r)*n:e.height)<i.min.height&&(r=s-(c=i.min.height)/n),u=.5*(c-e.height),o=e.y-u,a=e.y+e.height+u,(o<0||a>i.height)&&(d=Math.min(e.y,i.height-(e.y+e.height)),o=e.y-d,l=(c=(a=e.y+e.height+d)-o)/n,r=s-l),{x:r,y:o,width:s-r,height:a-o}},ne:function(e,t,i,n){var o,s,a,r,l,c;return r=e.x,a=e.y+e.height,(s=O(t.x,r,i.width))-r<i.min.width&&(s=r+i.min.width),(l=n?(s-r)*n:O(a-t.y,i.min.height,a))<i.min.height&&(s=r+(l=i.min.height)/n),((o=e.y-(l-e.height))<0||a>i.height)&&(c=Math.min(e.y,i.height-(e.y+e.height)),s=r+(l=a-(o=e.y-c))/n),{x:r,y:o,width:s-r,height:a-o}},se:function(e,t,i,n){var o,s,a,r,l,c;return r=e.x,o=e.y,(s=O(t.x,r,i.width))-r<i.min.width&&(s=r+i.min.width),(l=n?(s-r)*n:O(t.y-e.y,i.min.height,i.height-o))<i.min.height&&(s=r+(l=i.min.height)/n),a=e.y+e.height+(l-e.height),(o<0||a>i.height)&&(c=Math.min(e.y,i.height-(e.y+e.height)),s=r+(l=(a=e.y+e.height+c)-o)/n),{x:r,y:o,width:s-r,height:a-o}},sw:function(e,t,i,n){var o,s,a,r,l,c;return s=e.x+e.width,o=e.y,s-(r=O(t.x,0,s))<i.min.width&&(r=s-i.min.width),(l=n?(s-r)*n:O(t.y-e.y,i.min.height,i.height-o))<i.min.height&&(r=s-(l=i.min.height)/n),a=e.y+e.height+(l-e.height),(o<0||a>i.height)&&(c=Math.min(e.y,i.height-(e.y+e.height)),r=s-(l=(a=e.y+e.height+c)-o)/n),{x:r,y:o,width:s-r,height:a-o}},nw:function(e,t,i,n){var o,s,a,r,l,c;return s=e.x+e.width,a=e.y+e.height,s-(r=O(t.x,0,s))<i.min.width&&(r=s-i.min.width),(l=n?(s-r)*n:O(a-t.y,i.min.height,a))<i.min.height&&(r=s-(l=i.min.height)/n),((o=e.y-(l-e.height))<0||a>i.height)&&(c=Math.min(e.y,i.height-(e.y+e.height)),r=s-(l=a-(o=e.y-c))/n),{x:r,y:o,width:s-r,height:a-o}}};return function(){function n(){var i=arguments.length>0&&arguments[0]!==t?arguments[0]:document.createElement("div");e(this,n),this._element=i,this._interaction=null,this._minWidth=0,this._minHeight=0,this._ratio=null,this._rect={x:0,y:0,width:0,height:0},this._space={width:0,height:0},this._rectChanged=!1,this._init()}return d(n,[{key:"_init",value:function(){this._element.className="slim-crop-area";var e=k("div","grid");for(var t in this._element.appendChild(e),i)if(i.hasOwnProperty(t)){var n=k("button",t);this._element.appendChild(n)}var o=k("button","c");this._element.appendChild(o),T(document,w,this)}},{key:"reset",value:function(){this._interaction=null,this._rect={x:0,y:0,width:0,height:0},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"rescale",value:function(e){1!==e&&(this._interaction=null,this._rectChanged=!0,this._rect.x*=e,this._rect.y*=e,this._rect.width*=e,this._rect.height*=e,this._redraw(),this._element.dispatchEvent(new CustomEvent("change")))}},{key:"limit",value:function(e,t){this._space.width=e,this._space.height=t}},{key:"offset",value:function(e,t){this._space.x=e,this._space.y=t}},{key:"resize",value:function(e,t,i,n){this._interaction=null,this._rect={x:O(e,0,this._space.width-this._minWidth),y:O(t,0,this._space.height-this._minHeight),width:O(i,this._minWidth,this._space.width),height:O(n,this._minHeight,this._space.height)},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"handleEvent",value:function(e){switch(e.type){case"touchstart":case"pointerdown":case"mousedown":this._onStartDrag(e);break;case"touchmove":case"pointermove":case"mousemove":this._onDrag(e);break;case"touchend":case"touchcancel":case"pointerup":case"mouseup":this._onStopDrag(e)}}},{key:"_onStartDrag",value:function(e){this._element.contains(e.target)&&(e.preventDefault(),T(document,_,this),T(document,C,this),this._interaction={type:e.target.className,offset:$(e)},this._interaction.offset.x-=this._rect.x,this._interaction.offset.y-=this._rect.y,this._element.setAttribute("data-dragging","true"),this._redraw())}},{key:"_onDrag",value:function(e){e.preventDefault();var t=$(e),n=this._interaction.type;"c"===n?(this._rect.x=O(t.x-this._interaction.offset.x,0,this._space.width-this._rect.width),this._rect.y=O(t.y-this._interaction.offset.y,0,this._space.height-this._rect.height)):i[n]&&(this._rect=i[n](this._rect,{x:t.x-this._space.x,y:t.y-this._space.y},{x:0,y:0,width:this._space.width,height:this._space.height,min:{width:this._minWidth,height:this._minHeight}},this._ratio)),this._rectChanged=!0,this._element.dispatchEvent(new CustomEvent("input"))}},{key:"_onStopDrag",value:function(e){e.preventDefault(),E(document,_,this),E(document,C,this),this._interaction=null,this._element.setAttribute("data-dragging","false"),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"_redraw",value:function(){var e=this;if(this._rectChanged){var t="translate("+this._rect.x+"px,"+this._rect.y+"px);";this._element.style.cssText="\n\t\t\t\t\t-webkit-transform: "+t+";\n\t\t\t\t\ttransform: "+t+";\n\t\t\t\t\twidth:"+this._rect.width+"px;\n\t\t\t\t\theight:"+this._rect.height+"px;\n\t\t\t\t",this._rectChanged=!1}this._interaction&&requestAnimationFrame((function(){return e._redraw()}))}},{key:"destroy",value:function(){this._interaction=!1,this._rectChanged=!1,E(document,w,this),E(document,_,this),E(document,C,this),ne(this._element)}},{key:"element",get:function(){return this._element}},{key:"space",get:function(){return this._space}},{key:"area",get:function(){return{x:this._rect.x/this._space.width,y:this._rect.y/this._space.height,width:this._rect.width/this._space.width,height:this._rect.height/this._space.height}}},{key:"dirty",get:function(){return 0!==this._rect.x||0!==this._rect.y||0!==this._rect.width||0!==this._rect.height}},{key:"minWidth",set:function(e){this._minWidth=e}},{key:"minHeight",set:function(e){this._minHeight=e}},{key:"ratio",set:function(e){this._ratio=e}}]),n}()}(),le=function(){var i=["input","change"],n=function(){function n(){var i=arguments.length>0&&arguments[0]!==t?arguments[0]:document.createElement("div"),o=arguments.length>1&&arguments[1]!==t?arguments[1]:{};e(this,n),this._element=i,this._options=v(n.options(),o),this._ratio=null,this._output=null,this._input=null,this._preview=null,this._previewBlurred=null,this._blurredPreview=!1,this._cropper=null,this._straightCrop=null,this._previewWrapper=null,this._currentWindowSize={},this._btnGroup=null,this._maskFrame=null,this._dirty=!1,this._wrapperRotation=0,this._wrapperScale=1,this._init()}return d(n,[{key:"_init",value:function(){var e=this;this._element.className="slim-image-editor",this._container=k("div","slim-container"),this._wrapper=k("div","slim-wrapper"),this._stage=k("div","slim-stage"),this._container.appendChild(this._stage),this._cropper=new re,i.forEach((function(t){e._cropper.element.addEventListener(t,e)})),this._stage.appendChild(this._cropper.element),this._previewWrapper=k("div","slim-image-editor-preview slim-crop-preview"),this._previewBlurred=k("canvas","slim-crop-blur"),this._previewWrapper.appendChild(this._previewBlurred),this._wrapper.appendChild(this._previewWrapper),this._previewMask=k("div","slim-crop-mask"),this._preview=k("img"),this._previewMask.appendChild(this._preview),this._cropper.element.appendChild(this._previewMask),this._btnGroup=k("div","slim-editor-btn-group"),n.Buttons.forEach((function(t){var i=A(t),n=e._options["button"+i+"Label"],o=e._options["button"+i+"Title"],s=e._options["button"+i+"ClassName"],a=k("button","slim-editor-btn slim-btn-"+t+(s?" "+s:""));a.innerHTML=n,a.title=o||n,a.type="button",a.setAttribute("data-action",t),a.addEventListener("click",e),e._btnGroup.appendChild(a)})),this._utilsGroup=k("div","slim-editor-utils-group");var t=k("button","slim-editor-utils-btn slim-btn-rotate"+(this._options.buttonRotateClassName?" "+this._options.buttonRotateClassName:""));t.setAttribute("data-action","rotate"),t.addEventListener("click",this),t.title=this._options.buttonRotateTitle,this._utilsGroup.appendChild(t),this._container.appendChild(this._wrapper),this._element.appendChild(this._container),this._element.appendChild(this._utilsGroup),this._element.appendChild(this._btnGroup)}},{key:"dirty",value:function(){this._dirty=!0}},{key:"handleEvent",value:function(e){switch(e.type){case"click":this._onClick(e);break;case"change":this._onGridChange(e);break;case"input":this._onGridInput(e);break;case"keydown":this._onKeyDown(e);break;case"resize":this._onResize(e)}}},{key:"_onKeyDown",value:function(e){switch(e.keyCode){case y:this._confirm();break;case b:this._cancel()}}},{key:"_onClick",value:function(e){e.target.classList.contains("slim-btn-cancel")&&this._cancel(),e.target.classList.contains("slim-btn-confirm")&&this._confirm(),e.target.classList.contains("slim-btn-rotate")&&this._rotate()}},{key:"_onResize",value:function(){this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._redraw(),this._redrawCropper(this._cropper.area),this._updateWrapperScale(),this._redrawWrapper()}},{key:"_redrawWrapper",value:function(){var e=c.createMatrix();e.scale(this._wrapperScale,this._wrapperScale),e.rotateZ(this._wrapperRotation*(Math.PI/180)),c.setElementTransform(this._previewWrapper,e)}},{key:"_onGridInput",value:function(){this._redrawCropMask()}},{key:"_onGridChange",value:function(){this._redrawCropMask()}},{key:"_updateWrapperRotation",value:function(){this._options.minSize.width>this._input.height||this._options.minSize.height>this._input.width?this._wrapperRotation+=180:this._wrapperRotation+=90}},{key:"_updateWrapperScale",value:function(){if(this._wrapperRotation%180!=0){var e=this._container.offsetWidth,t=this._container.offsetHeight,i=this._wrapper.offsetHeight,n=this._wrapper.offsetWidth,o=e/i;o*n>t&&(o=t/n),this._wrapperScale=o}else this._wrapperScale=1}},{key:"_cancel",value:function(){this._element.dispatchEvent(new CustomEvent("cancel"))}},{key:"_confirm",value:function(){var e=this._wrapperRotation%180!=0,t=function(e,t,i){return{x:e.x*t,y:e.y*i,width:e.width*t,height:e.height*i}}(this._cropper.area,e?this._input.height:this._input.width,e?this._input.width:this._input.height);this._element.dispatchEvent(new CustomEvent("confirm",{detail:{rotation:this._wrapperRotation%360,crop:t}}))}},{key:"_rotate",value:function(){var e=this;this._updateWrapperRotation();var t=1===this.ratio||null===this._ratio?this._cropper.area:null;t&&function(e,t){var i=.5,n=.5,o=Math.PI/180*t,s=Math.cos(o),a=Math.sin(o),r=e.x,l=e.y,c=e.x+e.width,u=e.y+e.height,d=s*(r-i)+a*(l-n)+i,h=s*(l-n)-a*(r-i)+n,p=s*(c-i)+a*(u-n)+i,f=s*(u-n)-a*(c-i)+n;d<=p?(e.x=d,e.width=p-d):(e.x=p,e.width=d-p),h<=f?(e.y=h,e.height=f-h):(e.y=f,e.height=h-f)}(t,90),this._updateWrapperScale(),this._hideCropper(),c(this._previewWrapper,{rotation:[0,0,this._wrapperRotation*(Math.PI/180)],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.8,springDeceleration:.65,complete:function(){e._redrawCropper(t),e._showCropper()}})}},{key:"_showCropper",value:function(){c(this._stage,{easing:"ease",duration:250,fromOpacity:0,opacity:1})}},{key:"_hideCropper",value:function(){c(this._stage,{duration:0,fromOpacity:0,opacity:0})}},{key:"_redrawCropMask",value:function(){var e=this,t=this._wrapperRotation%360,i=this._wrapperScale,n=this._wrapper.offsetWidth,o=this._wrapper.offsetHeight,s=this._cropper.area,a={x:0,y:0};0===t?(a.x=-s.x,a.y=-s.y):90===t?(a.x=-(1-s.y),a.y=-s.x):180===t?(a.x=-(1-s.x),a.y=-(1-s.y)):270===t&&(a.x=-s.y,a.y=-(1-s.x)),a.x*=n,a.y*=o,cancelAnimationFrame(this._maskFrame),this._maskFrame=requestAnimationFrame((function(){var n="scale("+i+") rotate("+-t+"deg) translate("+a.x+"px, "+a.y+"px);";e._preview.style.cssText="\n\t\t\t\t\twidth: "+e._previewSize.width+"px;\n\t\t\t\t\theight: "+e._previewSize.height+"px;\n\t\t\t\t\t-webkit-transform: "+n+";\n\t\t\t\t\ttransform: "+n+";\n\t\t\t\t"}))}},{key:"open",value:function(e,t,i,n,o){var s=this;if(!this._input||this._dirty||this._ratio!==t){this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._dirty=!1,this._wrapperRotation=n||0,this._blurredPreview=!1,this._ratio=t,this._previewSize=null,this._element.style.opacity="0",this._input=e;var a=n%180!=0,r=function(e,t,i){return{x:e.x/t,y:e.y/i,width:e.width/t,height:e.height/i}}(i,a?e.height:e.width,a?e.width:e.height);this._preview.onload=function(){s._preview.onload=null,s._cropper.ratio=s.ratio,s._redraw(),s._redrawCropper(r),o(),s._element.style.opacity=""},this._preview.src=K(this._input,Math.min(this._container.offsetWidth/this._input.width,this._container.offsetHeight/this._input.height)).toDataURL()}else o()}},{key:"_redrawCropper",value:function(e){var t=this._wrapperRotation%180!=0,i=t?this._input.height/this._input.width:this._input.width/this._input.height,n=this._wrapper.offsetWidth,o=this._wrapper.offsetHeight,s=this._container.offsetWidth,a=this._container.offsetHeight;this._updateWrapperScale();var r=this._wrapperScale*(t?o:n),l=this._wrapperScale*(t?n:o),c=t?.5*(s-r):this._wrapper.offsetLeft,u=t?.5*(a-l):this._wrapper.offsetTop;this._stage.style.cssText="\n\t\t\t\tleft:"+c+"px;\n\t\t\t\ttop:"+u+"px;\n\t\t\t\twidth:"+r+"px;\n\t\t\t\theight:"+l+"px;\n\t\t\t",this._cropper.limit(r,r/i),this._cropper.offset(c+this._element.offsetLeft,u+this._element.offsetTop),this._cropper.minWidth=this._wrapperScale*this._options.minSize.width*this.scalar,this._cropper.minHeight=this._wrapperScale*this._options.minSize.height*this.scalar;var d;d=e?{x:e.x*r,y:e.y*l,width:e.width*r,height:e.height*l}:V(r,l,this._ratio||l/r),this._cropper.resize(d.x,d.y,d.width,d.height)}},{key:"_redraw",value:function(){var e=this._input.height/this._input.width,t=this._container.clientWidth,i=this._container.clientHeight,n=t,o=n*e;o>i&&(n=(o=i)/e);var s=(t-(n=Math.round(n)))/2,a=(i-(o=Math.round(o)))/2;this._wrapper.style.cssText="\n\t\t\t\tleft:"+s+"px;\n\t\t\t\ttop:"+a+"px;\n\t\t\t\twidth:"+n+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._previewBlurred.style.cssText="\n\t\t\t\twidth:"+n+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._preview.style.cssText="\n\t\t\t\twidth:"+n+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._previewSize={width:n,height:o},this._blurredPreview||(this._previewBlurred.width=300,this._previewBlurred.height=this._previewBlurred.width*e,function(e,t){var i=t.getContext("2d");!function(e){return e.width&&e.height}(t)?(t.width=e.width,t.height=e.height,i.drawImage(e,0,0)):i.drawImage(e,0,0,t.width,t.height)}(this._input,this._previewBlurred),function(e){u(e,0,0,e.width,e.height,3)}(this._previewBlurred),this._blurredPreview=!0)}},{key:"show",value:function(){var e=arguments.length>0&&arguments[0]!==t?arguments[0]:function(){};this._currentWindowSize.width===window.innerWidth&&this._currentWindowSize.height===window.innerHeight||(this._redraw(),this._redrawCropper(this._cropper.area)),document.addEventListener("keydown",this),window.addEventListener("resize",this);var i=this._wrapperRotation*(Math.PI/180);c(this._previewWrapper,{fromRotation:[0,0,i],rotation:[0,0,i],fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,fromScale:[this._wrapperScale-.02,this._wrapperScale-.02],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.3,springDeceleration:.85,delay:450,complete:function(){}}),this._cropper.dirty?c(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:850,complete:function(){P(this),e()}}):c(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:1e3,complete:function(){P(this)}}),c(this._btnGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,delay:function(e){return 1e3+100*e},easing:"spring",springConstant:.3,springDeceleration:.85,complete:function(){P(this)}}),c(this._utilsGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.85,delay:1250,complete:function(){P(this)}})}},{key:"hide",value:function(){var e=arguments.length>0&&arguments[0]!==t?arguments[0]:function(){};document.removeEventListener("keydown",this),window.removeEventListener("resize",this),c(this._utilsGroup.childNodes,{fromOpacity:1,opacity:0,duration:250}),c(this._btnGroup.childNodes,{fromOpacity:1,opacity:0,delay:200,duration:350}),c([this._stage,this._previewWrapper],{fromPosition:[0,0,0],position:[0,-250,0],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,delay:250,allDone:function(){e()}})}},{key:"destroy",value:function(){var e=this;ie(this._btnGroup.children).forEach((function(t){t.removeEventListener("click",e)})),i.forEach((function(t){e._cropper.element.removeEventListener(t,e)})),this._cropper.destroy(),this._element.parentNode&&ne(this._element)}},{key:"showRotateButton",set:function(e){e?this._element.classList.remove("slim-rotation-disabled"):this._element.classList.add("slim-rotation-disabled")}},{key:"element",get:function(){return this._element}},{key:"ratio",get:function(){return"input"===this._ratio?this._input.height/this._input.width:this._ratio}},{key:"offset",get:function(){return this._element.getBoundingClientRect()}},{key:"original",get:function(){return this._input}},{key:"scalar",get:function(){return this._previewSize.width/this._input.width}}],[{key:"options",value:function(){return{buttonCancelClassName:null,buttonConfirmClassName:null,buttonCancelLabel:"Cancel",buttonConfirmLabel:"Confirm",buttonCancelTitle:null,buttonConfirmTitle:null,buttonRotateTitle:"Rotate",buttonRotateClassName:null,minSize:{width:0,height:0}}}}]),n}();return n.Buttons=["cancel","confirm"],n}(),ce=function(){var i=["dragenter","dragover","dragleave","drop"];return function(){function n(){var i=arguments.length>0&&arguments[0]!==t?arguments[0]:document.createElement("div");e(this,n),this._element=i,this._accept=[],this._allowURLs=!1,this._dragPath=null,this._init()}return d(n,[{key:"isValidDataTransfer",value:function(e){return e.files&&e.files.length?this.areValidDataTransferFiles(e.files):e.items&&e.items.length?this.areValidDataTransferItems(e.items):null}},{key:"areValidDataTransferFiles",value:function(e){return!this._accept.length||!e||-1!==this._accept.indexOf(e[0].type)}},{key:"areValidDataTransferItems",value:function(e){return!this._accept.length||!e||(this._allowURLs&&"string"===e[0].kind||e[0].type&&0===e[0].type.indexOf("application")?null:-1!==this._accept.indexOf(e[0].type))}},{key:"reset",value:function(){this._element.files=null}},{key:"_init",value:function(){var e=this;this._element.className="slim-file-hopper",i.forEach((function(t){e._element.addEventListener(t,e)}))}},{key:"handleEvent",value:function(e){switch(e.type){case"dragenter":case"dragover":this._onDragOver(e);break;case"dragleave":this._onDragLeave(e);break;case"drop":this._onDrop(e)}}},{key:"_onDrop",value:function(e){e.preventDefault();var t=null;if(this._allowURLs){var i=void 0,n=void 0;try{i=e.dataTransfer.getData("url"),n=e.dataTransfer.getData("text/html")}catch(e){}if(n&&n.length){var o=n.match(/src\s*=\s*"(.+?)"/);o&&(t=o[1])}else i&&i.length&&(t=i)}if(t)this._element.files=[{remote:t}];else{if(!this.isValidDataTransfer(e.dataTransfer))return this._element.dispatchEvent(new CustomEvent("file-invalid-drop")),void(this._dragPath=null);this._element.files=e.dataTransfer.files}this._element.dispatchEvent(new CustomEvent("file-drop",{detail:g(e)})),this._element.dispatchEvent(new CustomEvent("change")),this._dragPath=null}},{key:"_onDragOver",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var t=this.isValidDataTransfer(e.dataTransfer);return null===t||t?(this._dragPath||(this._dragPath=[]),this._dragPath.push(g(e)),void this._element.dispatchEvent(new CustomEvent("file-over",{detail:{x:I(this._dragPath).x,y:I(this._dragPath).y}}))):(e.dataTransfer.dropEffect="none",void this._element.dispatchEvent(new CustomEvent("file-invalid")))}},{key:"_onDragLeave",value:function(e){this._element.dispatchEvent(new CustomEvent("file-out",{detail:g(e)})),this._dragPath=null}},{key:"destroy",value:function(){var e=this;i.forEach((function(t){e._element.removeEventListener(t,e)})),ne(this._element),this._element=null,this._dragPath=null,this._accept=null}},{key:"element",get:function(){return this._element}},{key:"dragPath",get:function(){return this._dragPath}},{key:"enabled",get:function(){return""===this._element.style.display},set:function(e){this._element.style.display=e?"":"none"}},{key:"allowURLs",set:function(e){this._allowURLs=e}},{key:"accept",set:function(e){this._accept=e},get:function(){return this._accept}}]),n}()}(),ue=function(){function i(){e(this,i),this._element=null,this._inner=null,this._init()}return d(i,[{key:"_init",value:function(){this._element=k("div","slim-popover"),this._element.setAttribute("data-state","off"),document.body.appendChild(this._element)}},{key:"show",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==t?arguments[0]:function(){};this._element.setAttribute("data-state","on"),c(this._element,{fromOpacity:0,opacity:1,duration:350,complete:function(){P(e._element),i()}})}},{key:"hide",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==t?arguments[0]:function(){};c(this._element,{fromOpacity:1,opacity:0,duration:500,complete:function(){P(e._element),e._element.setAttribute("data-state","off"),i()}})}},{key:"destroy",value:function(){this._element.parentNode&&(this._element.parentNode.removeChild(this._element),this._element=null,this._inner=null)}},{key:"inner",set:function(e){this._inner=e,this._element.firstChild&&this._element.removeChild(this._element.firstChild),this._element.appendChild(this._inner)}},{key:"className",set:function(e){this._element.className="slim-popover"+(null===e?"":" "+e)}}]),i}(),de=function(e,t){return e.split(t).map((function(e){return parseInt(e,10)}))},he=function(e){return"DIV"===e.nodeName||"SPAN"===e.nodeName},pe="auto",fe="initial",me="manual",ge=["x","y","width","height"],ve=["file-invalid-drop","file-invalid","file-drop","file-over","file-out","click"],be=["cancel","confirm"],ye=["remove","edit","download","upload"],we=null,_e=0,Ce='\n<div class="slim-loader">\n\t<svg>\n\t\t<path class="slim-loader-background" fill="none" stroke-width="3" />\n\t\t<path class="slim-loader-foreground" fill="none" stroke-width="3" />\n\t</svg>\n</div>\n',xe='\n<div class="slim-upload-status"></div>\n',Se=function(e){var t=e.split(",");return{width:parseInt(t[0],10),height:parseInt(t[1],10)}},ke=function(){function i(n){var o=arguments.length>1&&arguments[1]!==t?arguments[1]:{};e(this,i),we||(we=new ue),this._uid=_e++,this._options=v(i.options(),o),this._options.forceSize&&("string"==typeof this._options.forceSize&&(this._options.forceSize=Se(this._options.forceSize)),this._options.ratio=this._options.forceSize.width+":"+this._options.forceSize.height,this._options.size=J(this._options.forceSize)),"string"==typeof this._options.size&&(this._options.size=Se(this._options.size)),"string"==typeof this._options.minSize&&(this._options.minSize=Se(this._options.minSize)),this._originalElement=n,this._originalElementInner=n.innerHTML,this._originalElementAttributes=m(n),he(n)?this._element=n:(this._element=oe(n),this._element.className=n.className,n.className="",this._element.setAttribute("data-ratio",this._options.ratio)),this._element.classList.add("slim"),this._element.setAttribute("data-state","init"),this._state=[],this._timers=[],this._input=null,this._inputReference=null,this._output=null,this._ratio=null,this._isRequired=!1,this._imageHopper=null,this._imageEditor=null,this._progressEnabled=!0,this._data={},this._resetData(),this._drip=null,this._hasInitialImage=!1,this._initialCrop=this._options.crop,this._initialRotation=this._options.rotation&&this._options.rotation%90==0?this._options.rotation:null,this._isBeingDestroyed=!1,i.supported?this._init():this._fallback()}return d(i,[{key:"setRotation",value:function(e,t){if("number"==typeof e||e%90==0){this._data.actions.rotation=e;var i=this._data.actions.rotation%180!=0;if(this._data.input.image){var n=i?this._data.input.image.height:this._data.input.image.width,o=i?this._data.input.image.width:this._data.input.image.height;this._data.actions.crop=V(n,o,this._ratio),this._data.actions.crop.type=pe}this._data.input.image&&t&&this._manualTransform(t)}}},{key:"setSize",value:function(e,t){"string"==typeof e&&(e=Se(e)),e&&e.width&&e.height&&(this._options.size=J(e),this._data.actions.size=J(e),this._data.input.image&&t&&this._manualTransform(t))}},{key:"setRatio",value:function(e,t){var i=this;if(e&&"string"==typeof e&&(this._options.ratio=e,this._isFixedRatio())){var n=de(this._options.ratio,":");this._ratio=n[1]/n[0],this._data.input.image&&t?this._cropAuto((function(e){i._scaleDropArea(i._ratio),t&&t(e)})):(this._data.input.image&&(this._data.actions.crop=V(this._data.input.image.width,this._data.input.image.height,this._ratio),this._data.actions.crop.type=pe),this._scaleDropArea(this._ratio),t&&t(null))}}},{key:"isAttachedTo",value:function(e){return this._element===e||this._originalElement===e}},{key:"isDetached",value:function(){return null===this._element.parentNode}},{key:"load",value:function(e){var i=arguments.length>1&&arguments[1]!==t?arguments[1]:{},n=arguments[2];"function"==typeof i?n=i:(this._options.crop=i.crop,this._options.rotation=i.rotation,this._initialRotation=i.rotation&&i.rotation%90==0?i.rotation:null,this._initialCrop=this._options.crop),this._load(e,n)}},{key:"upload",value:function(e){this._doUpload(e)}},{key:"download",value:function(){this._doDownload()}},{key:"remove",value:function(){return this._doRemove()}},{key:"destroy",value:function(){this._doDestroy()}},{key:"edit",value:function(){this._doEdit()}},{key:"crop",value:function(e,t){this._crop(e.x,e.y,e.width,e.height,t)}},{key:"containsImage",value:function(){return null!==this._data.input.name}},{key:"_canInstantEdit",value:function(){return this._options.instantEdit&&!this._isInitialising}},{key:"_getFileInput",value:function(){return this._element.querySelector("input[type=file]")}},{key:"_getInitialImage",value:function(){return this._element.querySelector("img")}},{key:"_getInputElement",value:function(){return this._getFileInput()||this._getInitialImage()}},{key:"_getRatioSpacerElement",value:function(){return this._element.children[0]}},{key:"_isImageOnly",value:function(){return"INPUT"!==this._input.nodeName}},{key:"_isFixedRatio",value:function(){return-1!==this._options.ratio.indexOf(":")}},{key:"_isAutoCrop",value:function(){return this._data.actions.crop.type===pe}},{key:"_toggleButton",value:function(e,t){!function(e,t,i){var n=i.querySelector(e);n&&(n.style.display=t?"":"none")}('.slim-btn[data-action="'+e+'"]',t,this._element)}},{key:"_clearState",value:function(){this._state=[],this._updateState()}},{key:"_removeState",value:function(e){this._state=this._state.filter((function(t){return t!==e})),this._updateState()}},{key:"_addState",value:function(e){R(e,this._state)||(this._state.push(e),this._updateState())}},{key:"_updateState",value:function(){this._element&&this._element.setAttribute("data-state",this._state.join(","))}},{key:"_resetData",value:function(){this._data={server:null,meta:J(this._options.meta),input:{field:this._inputReference,name:null,type:null,width:0,height:0,file:null},output:{image:null,width:0,height:0},actions:{rotation:null,crop:null,size:null}},this._output&&(this._output.value=""),function(e){if(e&&""!==e.value){try{e.value=""}catch(e){}if(e.value){var t=document.createElement("form"),i=e.parentNode,n=e.nextSibling;t.appendChild(e),t.reset(),n?i.insertBefore(e,n):i.appendChild(e)}}}(this._getFileInput())}},{key:"_init",value:function(){var e=this;if(this._isInitialising=!0,this._addState("empty"),R("input",this._options.post)&&(this._inputReference="slim_input_"+this._uid),this._input=this._getInputElement(),this._input||(this._input=k("input"),this._input.type="file",this._element.appendChild(this._input)),this._isRequired=!0===this._input.required,this._output=this._element.querySelector("input[type=hidden]"),this._output){var t=null;try{t=JSON.parse(this._output.value)}catch(e){}if(t){var i=new Image;i.src=t.output.image,i.setAttribute("data-filename",t.output.name),this._element.insertBefore(i,this._element.firstChild)}}else this._output=k("input"),this._output.type="hidden",this._output.name=this._input.name||this._options.defaultInputName,this._element.appendChild(this._output);this._input.removeAttribute("name");var n=k("div","slim-area"),o=this._getInitialImage(),s=(o||{}).src,a=o?o.getAttribute("data-filename"):null;s?this._hasInitialImage=!0:(this._initialCrop=null,this._initialRotation=null);var r='\n\t\t<div class="slim-result">\n\t\t\t<img class="in" style="opacity:0" '+(s?'src="'+s+'"':"")+'><img><img style="opacity:0">\n\t\t</div>';if(this._isImageOnly())n.innerHTML="\n\t\t\t\t"+Ce+"\n\t\t\t\t"+xe+"\n\t\t\t\t"+r+'\n\t\t\t\t<div class="slim-status"><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t";else{R("input",this._options.post)&&(this._data.input.field=this._inputReference,this._options.service||(this._input.name=this._inputReference));var l=void 0;this._input.hasAttribute("accept")&&"image/*"!==this._input.getAttribute("accept")?l=this._input.accept.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})):(l=function(){var e=[],t=void 0,i=void 0;for(t in x)x.hasOwnProperty(t)&&(i=x[t],-1==e.indexOf(i)&&e.push(i));return e}(),this._input.setAttribute("accept",l.join(","))),this._imageHopper=new ce,this._imageHopper.accept=l,this._imageHopper.allowURLs="string"==typeof this._options.fetcher,this._element.appendChild(this._imageHopper.element),ve.forEach((function(t){e._imageHopper.element.addEventListener(t,e)})),n.innerHTML="\n\t\t\t\t"+Ce+"\n\t\t\t\t"+xe+'\n\t\t\t\t<div class="slim-drip"><span><span></span></span></div>\n\t\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+'</div><div class="slim-label-loading">'+(this._options.labelLoading||"")+"</div></div>\n\t\t\t\t"+r+"\n\t\t\t",this._input.addEventListener("change",this)}if(this._element.appendChild(n),this._btnGroup=k("div","slim-btn-group"),this._btnGroup.style.display="none",this._element.appendChild(this._btnGroup),ye.filter((function(t){return e._isButtonAllowed(t)})).forEach((function(t){var i=A(t),n=e._options["button"+i+"Label"],o=e._options["button"+i+"Title"]||n,s=e._options["button"+i+"ClassName"],a=k("button","slim-btn slim-btn-"+t+(s?" "+s:""));a.innerHTML=n,a.title=o,a.type="button",a.addEventListener("click",e),a.setAttribute("data-action",t),e._btnGroup.appendChild(a)})),this._isFixedRatio()){var c=de(this._options.ratio,":");this._ratio=c[1]/c[0],this._scaleDropArea(this._ratio)}this._updateProgress(.5),s?this._load(s,(function(){e._onInit()}),{name:a}):this._onInit()}},{key:"_onInit",value:function(){var e=this;this._isInitialising=!1;var t=function(){var t=setTimeout((function(){e._options.didInit.apply(e,[e.data])}),0);e._timers.push(t)};this._options.saveInitialImage&&this.containsImage()?this._options.service||this._save((function(){t()}),!1):(this._options.service&&this.containsImage()&&this._toggleButton("upload",!1),t())}},{key:"_updateProgress",value:function(e){if(e=Math.min(.99999,e),this._element&&this._progressEnabled){var t=this._element.querySelector(".slim-loader");if(t){var i=t.offsetWidth,n=t.querySelectorAll("path"),o=parseInt(n[0].getAttribute("stroke-width"),10);n[0].setAttribute("d",ae(.5*i,.5*i,.5*i-o,.9999)),n[1].setAttribute("d",ae(.5*i,.5*i,.5*i-o,e))}}}},{key:"_startProgress",value:function(e){var t=this;if(this._element){this._progressEnabled=!1;var i=this._element.querySelector(".slim-loader");if(i){var n=i.children[0];this._stopProgressLoop((function(){i.removeAttribute("style"),n.removeAttribute("style"),t._progressEnabled=!0,t._updateProgress(0),t._progressEnabled=!1,c(n,{fromOpacity:0,opacity:1,duration:250,complete:function(){t._progressEnabled=!0,e&&e()}})}))}}}},{key:"_stopProgress",value:function(){var e=this;if(this._element){var t=this._element.querySelector(".slim-loader");if(t){var i=t.children[0];this._updateProgress(1),c(i,{fromOpacity:1,opacity:0,duration:250,complete:function(){t.removeAttribute("style"),i.removeAttribute("style"),e._updateProgress(.5),e._progressEnabled=!1}})}}}},{key:"_startProgressLoop",value:function(){if(this._element){var e=this._element.querySelector(".slim-loader");if(e){var t=e.children[0];e.removeAttribute("style"),t.removeAttribute("style"),this._updateProgress(.5);c(e,"stop"),c(e,{rotation:[0,0,-2*Math.PI*1e3],easing:"linear",duration:1e6}),c(t,{fromOpacity:0,opacity:1,duration:250})}}}},{key:"_stopProgressLoop",value:function(e){if(this._element){var t=this._element.querySelector(".slim-loader");if(t){var i=t.children[0];c(i,{fromOpacity:parseFloat(i.style.opacity),opacity:0,duration:250,complete:function(){c(t,"stop"),t.removeAttribute("style"),i.removeAttribute("style"),e&&e()}})}}}},{key:"_isButtonAllowed",value:function(e){return"edit"===e?this._options.edit:"download"===e?this._options.download:"upload"===e?!!this._options.service&&!this._options.push:"remove"!==e||!this._isImageOnly()}},{key:"_fallback",value:function(){var e=k("div","slim-area");e.innerHTML='\n\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+"</div></div>\n\t\t",this._element.appendChild(e),this._throwError(this._options.statusNoSupport)}},{key:"handleEvent",value:function(e){switch(e.type){case"click":this._onClick(e);break;case"change":this._onChange(e);break;case"cancel":this._onCancel(e);break;case"confirm":this._onConfirm(e);break;case"file-over":this._onFileOver(e);break;case"file-out":this._onFileOut(e);break;case"file-drop":this._onDropFile(e);break;case"file-invalid":this._onInvalidFile(e);break;case"file-invalid-drop":this._onInvalidFileDrop(e)}}},{key:"_getIntro",value:function(){return this._element.querySelector(".slim-result .in")}},{key:"_getOutro",value:function(){return this._element.querySelector(".slim-result .out")}},{key:"_getInOut",value:function(){return this._element.querySelectorAll(".slim-result img")}},{key:"_getDrip",value:function(){return this._drip||(this._drip=this._element.querySelector(".slim-drip > span")),this._drip}},{key:"_throwError",value:function(e){this._addState("error"),this._element.querySelector(".slim-label").style.display="none";var t=this._element.querySelector(".slim-error");t||(t=k("div","slim-error"),this._element.querySelector(".slim-status").appendChild(t)),t.innerHTML=e}},{key:"_removeError",value:function(){this._removeState("error"),this._element.querySelector(".slim-label").style.display="";var e=this._element.querySelector(".slim-error");e&&e.parentNode.removeChild(e)}},{key:"_openFileDialog",value:function(){this._removeError(),this._input.click()}},{key:"_onClick",value:function(e){var t=this,i=e.target.classList,n=e.target;if(i.contains("slim-file-hopper"))this._openFileDialog();else switch(n.getAttribute("data-action")){case"remove":this._options.willRemove.apply(this,[this.data,function(){t._doRemove()}]);break;case"edit":this._doEdit();break;case"download":this._doDownload();break;case"upload":this._doUpload()}}},{key:"_onInvalidFileDrop",value:function(){this._onInvalidFile(),this._removeState("file-over");var e=this._getDrip();c(e.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){P(e.firstChild)}})}},{key:"_onInvalidFile",value:function(){var e=this._imageHopper.accept.map(z),t=this._options.statusFileType.replace("$0",e.join(", "));this._throwError(t)}},{key:"_onImageTooSmall",value:function(){var e=this._options.statusImageTooSmall.replace("$0",this._options.minSize.width+"  "+this._options.minSize.height);this._throwError(e)}},{key:"_onOverWeightFile",value:function(){var e=this._options.statusFileSize.replace("$0",this._options.maxFileSize);this._throwError(e)}},{key:"_onRemoteURLProblem",value:function(e){this._throwError(e)}},{key:"_onFileOver",value:function(e){this._addState("file-over"),this._removeError();var t=this._getDrip(),i=c.createMatrix();i.translate(e.detail.x,e.detail.y,0),c.setElementTransform(t,i),1==this._imageHopper.dragPath.length&&(t.style.opacity=1,c(t.firstChild,{fromOpacity:0,opacity:.5,fromScale:[0,0],scale:[.5,.5],duration:150}))}},{key:"_onFileOut",value:function(e){this._removeState("file-over"),this._removeState("file-invalid"),this._removeError();var t=this._getDrip(),i=c.createMatrix();i.translate(e.detail.x,e.detail.y,0),c.setElementTransform(t,i),c(t.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){P(t.firstChild)}})}},{key:"_onDropFile",value:function(e){var t=this;this._removeState("file-over");var i=this._getDrip(),n=c.createMatrix();n.translate(e.detail.x,e.detail.y,0),c.setElementTransform(i,n);var o=this._imageHopper.dragPath.length,s=this._imageHopper.dragPath[o-Math.min(10,o)],a=e.detail.x-s.x,r=e.detail.y-s.y;c(i,{fromPosition:[e.detail.x,e.detail.y,0],position:[e.detail.x+a,e.detail.y+r,0],duration:200}),c(i.firstChild,{fromScale:[.5,.5],scale:[2,2],fromOpacity:1,opacity:0,duration:200,complete:function(){P(i.firstChild),t._load(e.target.files[0])}})}},{key:"_onChange",value:function(e){e.target.files.length&&this._load(e.target.files[0])}},{key:"_load",value:function(e,t,i){var n=this;if(!this._isBeingDestroyed){if(this.containsImage())return clearTimeout(this._replaceTimeout),void this._doRemove((function(){n._replaceTimeout=setTimeout((function(){n._load(e,t,i)}),100)}));this._removeState("empty"),this._addState("busy"),this._startProgressLoop(),this._imageHopper&&(this._imageHopper.enabled=!1),clearTimeout(this._loadTimeout);var o=function(){n._imageHopper&&(n._imageHopper.enabled=!0),n._removeState("loading"),n._removeState("busy"),n._addState("empty"),n._stopProgressLoop()};if("string"==typeof e)return void(function(e){return/^data:image/.test(e)}(e)?this._load(U(e),t,i):(clearTimeout(n._loadTimeout),n._loadTimeout=setTimeout((function(){n._isBeingDestroyed||(n._addState("loading"),c(n._element.querySelector(".slim-label-loading"),{fromOpacity:0,opacity:1,duration:250}))}),500),H(e,(function(e){n._load(e,t,i)}))));if(void 0!==e.remote&&this._options.fetcher)return void function(e,t,i,n){e=e+(-1!==e.indexOf("?")?"&":"?")+"url="+t;var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="json",o.onload=function(){return"failure"===this.response.status?void i(this.response.message):void H(this.response.body,n)},o.send()}(this._options.fetcher,e.remote,(function(e){o(),n._onRemoteURLProblem("<p>"+e+"</p>"),t&&t.apply(n,["remote-url-problem"])}),(function(e){n._load(e,t,i)}));var s=e;if(this._imageHopper&&-1===this._imageHopper.accept.indexOf(s.type))return o(),this._onInvalidFile(),void(t&&t.apply(this,["file-invalid"]));if(s.size&&this._options.maxFileSize&&function(e){return e/1e6}(s.size)>this._options.maxFileSize)return o(),this._onOverWeightFile(),void(t&&t.apply(this,["file-too-big"]));this._imageEditor&&this._imageEditor.dirty(),this._data.input.name=i&&i.name?i.name:function(e){return void 0===e.name?N(new Date)+"."+z(j(e)):e.name}(s),this._data.input.type=j(s),this._data.input.size=s.size,this._data.input.file=s,W(s,this._options.internalCanvasSize,(function(e,i){var o=function(){n._imageHopper&&(n._imageHopper.enabled=!0),n._removeState("loading"),n._removeState("busy"),n._addState("empty"),n._stopProgressLoop(),n._resetData()};if(!e)return o(),void(t&&t.apply(n,["file-not-found"]));if(!function(e,t){return parseInt(e.width,10)>=t.width&&parseInt(e.height,10)>=t.height}(e,n._options.minSize))return o(),n._onImageTooSmall(),void(t&&t.apply(n,["image-too-small"]));var a=n._options.didLoad.apply(n,[s,e,i]);if(!0!==a)return o(),!1!==a&&n._throwError(a),void(t&&t.apply(n,[a]));n._removeState("loading");n._loadCanvas(e,(function(e){n._addState("preview"),function(e){n._imageHopper&&n._options.dropReplace&&(n._imageHopper.enabled=!0);var t=n._getIntro(),i={fromScale:[1.25,1.25],scale:[1,1],fromOpacity:0,opacity:1,complete:function(){P(t),t.style.opacity=1,e()}};n.isDetached()?i.duration=1:(i.easing="spring",i.springConstant=.3,i.springDeceleration=.7),n._canInstantEdit()&&(i.delay=500,i.duration=1,n._doEdit()),c(t,i)}((function(){n._canInstantEdit()||e||n._showButtons(),e||(n._stopProgressLoop(),n._removeState("busy")),t&&t.apply(n,[null,n.data])}))}),(function(){n._canInstantEdit()||n._showButtons(),n._removeState("busy")}))}))}}},{key:"_loadCanvas",value:function(e,t,i){var n=this;if(!this._isBeingDestroyed){this._data.input.image=e,this._data.input.width=e.width,this._data.input.height=e.height,this._initialRotation&&(this._data.actions.rotation=this._initialRotation,this._initialRotation=null);var o=this._data.actions.rotation%180!=0;this._isFixedRatio()||(this._initialCrop?this._ratio=this._initialCrop.height/this._initialCrop.width:this._ratio=o?e.width/e.height:e.height/e.width,this._scaleDropArea(this._ratio)),this._initialCrop?(this._data.actions.crop=J(this._initialCrop),this._data.actions.crop.type=fe,this._initialCrop=null):(this._data.actions.crop=V(o?e.height:e.width,o?e.width:e.height,this._ratio),this._data.actions.crop.type=pe),this._options.size&&(this._data.actions.size={width:this._options.size.width,height:this._options.size.height}),this._applyTransforms(e,(function(e){var o=n._getIntro(),s=o.offsetWidth/e.width,a=!1;n._options.service&&n._options.push&&(n._hasInitialImage||n._canInstantEdit()||(a=!0,n._stopProgressLoop((function(){n._startProgress((function(){n._updateProgress(.1)}))})))),n._canInstantEdit()||n._save((function(){n._isBeingDestroyed||a&&(n._stopProgress(),i())}),a),o.src="",o.src=K(e,s).toDataURL(),o.onload=function(){o.onload=null,n._isBeingDestroyed||t&&t(a)}}))}}},{key:"_applyTransforms",value:function(e,t){var i=this,n=J(this._data.actions);n.filters={sharpen:this._options.filterSharpen/100},n.minSize=this._options.minSize,G(e,n,(function(e){var n=e;(i._options.forceSize||i._options.size&&1==function(e,t){var i=Math.abs(e.width-t.width),n=Math.abs(e.height-t.height);return Math.max(i,n)}(i._options.size,e))&&((n=k("canvas")).width=i._options.size.width,n.height=i._options.size.height,n.getContext("2d").drawImage(e,0,0,i._options.size.width,i._options.size.height));if(i._options.size&&i._options.minSize.width===i._options.size.width&&i._options.minSize.height===i._options.size.height&&(n.width<i._options.minSize.width||n.height<i._options.minSize.height)){var o=Math.max(n.width,i._options.minSize.width),s=Math.max(n.height,i._options.minSize.height);(n=k("canvas")).width=o,n.height=s,n.getContext("2d").drawImage(e,0,0,o,s)}i._data.output.width=n.width,i._data.output.height=n.height,i._data.output.image=n,i._onTransformCanvas((function(e){i._data=e,i._options.didTransform.apply(i,[i.data]),t(i._data.output.image)}))}))}},{key:"_onTransformCanvas",value:function(e){this._options.willTransform.apply(this,[this.data,e])}},{key:"_appendEditor",value:function(){var e=this;this._imageEditor||(this._imageEditor=new le(k("div"),{minSize:this._options.minSize,buttonConfirmClassName:this._options.buttonConfirmClassName,buttonCancelClassName:this._options.buttonCancelClassName,buttonRotateClassName:this._options.buttonRotateClassName,buttonConfirmLabel:this._options.buttonConfirmLabel,buttonCancelLabel:this._options.buttonCancelLabel,buttonRotateLabel:this._options.buttonRotateLabel,buttonConfirmTitle:this._options.buttonConfirmTitle,buttonCancelTitle:this._options.buttonCancelTitle,buttonRotateTitle:this._options.buttonRotateTitle}),be.forEach((function(t){e._imageEditor.element.addEventListener(t,e)})))}},{key:"_scaleDropArea",value:function(e){var t=this._getRatioSpacerElement();t&&this._element&&(t.style.marginBottom=100*e+"%",this._element.setAttribute("data-ratio","1:"+e))}},{key:"_onCancel",value:function(e){this._removeState("editor"),this._options.didCancel.apply(this),this._showButtons(),this._hideEditor(),this._options.instantEdit&&!this._hasInitialImage&&this._isAutoCrop()&&this._doRemove()}},{key:"_onConfirm",value:function(e){var t=this,i=this._options.service&&this._options.push;i?this._startProgress((function(){t._updateProgress(.1)})):this._startProgressLoop(),this._removeState("editor"),this._addState("busy"),this._output.value="",this._data.actions.rotation=e.detail.rotation,this._data.actions.crop=e.detail.crop,this._data.actions.crop.type=me,this._applyTransforms(this._data.input.image,(function(e){t._options.didConfirm.apply(t,[t.data]);var n=t._getInOut(),o="out"===n[0].className?n[0]:n[1],s=o===n[0]?n[1]:n[0];o.className="in",o.style.opacity="0",o.style.zIndex="2",s.className="out",s.style.zIndex="1",o.src="",o.src=K(e,o.offsetWidth/e.width).toDataURL(),o.onload=function(){o.onload=null,"free"===t._options.ratio&&(t._ratio=o.naturalHeight/o.naturalWidth,t._scaleDropArea(t._ratio)),t._hideEditor();var e=setTimeout((function(){t._showPreview(o,(function(){t._save((function(e,n,o){t._toggleButton("upload",!0),i?t._stopProgress():t._stopProgressLoop(),t._removeState("busy"),t._showButtons()}),i)}))}),250);t._timers.push(e)}}))}},{key:"_cropAuto",value:function(){var e=arguments.length>0&&arguments[0]!==t?arguments[0]:function(e){},i=this._data.actions.rotation%180!=0,n=V(i?this._data.input.image.width:this._data.input.image.height,i?this._data.input.image.height:this._data.input.image.width,this._ratio);this._crop(n.x,n.y,n.width,n.height,e,pe)}},{key:"_crop",value:function(e,i,n,o){var s=arguments.length>4&&arguments[4]!==t?arguments[4]:function(e){},a=arguments.length>5&&arguments[5]!==t?arguments[5]:me;this._output.value="",this._data.actions.crop={x:e,y:i,width:n,height:o},this._data.actions.crop.type=a,this._manualTransform(s)}},{key:"_manualTransform",value:function(e){var t=this;this._startProgressLoop(),this._addState("busy"),this._applyTransforms(this._data.input.image,(function(i){var n=t._getInOut(),o="out"===n[0].className?n[0]:n[1],s=o===n[0]?n[1]:n[0];o.className="in",o.style.opacity="1",o.style.zIndex="2",s.className="out",s.style.zIndex="0",o.src="",o.src=K(i,o.offsetWidth/i.width).toDataURL(),o.onload=function(){o.onload=null,"free"===t._options.ratio&&(t._ratio=o.naturalHeight/o.naturalWidth,t._scaleDropArea(t._ratio));var i=t._options.service&&t._options.push,n=function(){t._save((function(n,o,s){i||t._stopProgressLoop(),t._removeState("busy"),e.apply(t,[t.data])}),i)};i?t._startProgress(n):n()}}))}},{key:"_save",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==t?arguments[0]:function(){},n=!(arguments.length>1&&arguments[1]!==t)||arguments[1];if(!this._isBeingDestroyed){var o=this.dataBase64;this._options.service||this._isInitialising&&!this._isImageOnly()||this._options.willSave.apply(this,[o,function(t){e._store(t),e._options.didSave.apply(e,[t])}]),this._isBeingDestroyed||(this._options.service&&n&&this._options.willSave.apply(this,[o,function(t){e._addState("upload"),e._imageHopper&&e._options.dropReplace&&(e._imageHopper.enabled=!1),e._upload(t,(function(n,o){e._imageHopper&&e._options.dropReplace&&(e._imageHopper.enabled=!0),n||e._storeServerResponse(o),e._options.didUpload.apply(e,[n,t,o]),e._removeState("upload"),i(n,t,o)}))}]),this._options.service&&n||i())}}},{key:"_storeServerResponse",value:function(e){this._isRequired&&(this._input.required=!1),this._data.server=e,this._output.value="object"===(void 0===e?"undefined":h(e))?JSON.stringify(this._data.server):e}},{key:"_store",value:function(e){this._isRequired&&(this._input.required=!1),this._output.value=JSON.stringify(e)}},{key:"_upload",value:function(e,t){var i=this,n=new FormData;if(null!==this._data.output.image&&!1===this._options.uploadBase64){var o=U(e.output.image,e.output.name),s="slim_output_"+this._uid;e.output.image=null,e.output.field=s,n.append(s,o,e.output.name)}n.append(this._output.name,JSON.stringify(e)),R("input",this._options.post)&&n.append(this._inputReference,this._data.input.file,this._data.input.file.name);var a=this._element.querySelector(".slim-upload-status"),r=this._options.willRequest,l=function(e,t){i._updateProgress(Math.max(.1,e/t))},c=function(e){var n=setTimeout((function(){if(!i._isBeingDestroyed){a.innerHTML=i._options.statusUploadSuccess,a.setAttribute("data-state","success"),a.style.opacity=1;var e=setTimeout((function(){a.style.opacity=0}),2e3);i._timers.push(e)}}),250);i._timers.push(n),t(null,e)},u=function(e){var n;n="file-too-big"===e?i._options.statusContentLength:i._options.didReceiveServerError.apply(i,[e,i._options.statusUnknownResponse]);var o=setTimeout((function(){a.innerHTML=n,a.setAttribute("data-state","error"),a.style.opacity=1}),250);i._timers.push(o),t(e)};"string"==typeof this._options.service?function(e,t,i,n,o,s){var a=new XMLHttpRequest;n&&a.upload.addEventListener("progress",(function(e){n(e.loaded,e.total)})),a.open("POST",e,!0),i&&i(a),a.onreadystatechange=function(){if(4===a.readyState&&a.status>=200&&a.status<300){var e=a.responseText;if(!e.length)return void o();if(-1!==e.indexOf("Content-Length"))return void s("file-too-big");var t=void 0;try{t=JSON.parse(a.responseText)}catch(e){}if("object"===(void 0===t?"undefined":h(t))&&"failure"===t.status)return void s(t.message);o(t||e)}else if(4===a.readyState){var i=void 0;try{i=JSON.parse(a.responseText)}catch(e){}if("object"===(void 0===i?"undefined":h(i))&&"failure"===i.status)return void s(i.message);s("fail")}},a.send(t)}(this._options.service,n,r,l,c,u):"function"==typeof this._options.service&&this._options.service.apply(this,[n,l,c,u])}},{key:"_showEditor",value:function(){we.className=this._options.popoverClassName,we.show(),this._imageEditor.show()}},{key:"_hideEditor",value:function(){this._imageEditor.hide();var e=setTimeout((function(){we.hide()}),250);this._timers.push(e)}},{key:"_showPreview",value:function(e,t){c(e,{fromPosition:[0,50,0],position:[0,0,0],fromScale:[1.5,1.5],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.7,complete:function(){P(e),t&&t()}})}},{key:"_hideResult",value:function(e){var t=this._getIntro();t&&c(t,{fromScale:[1,1],scale:[.5,.5],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,complete:function(){P(t),e&&e()}})}},{key:"_showButtons",value:function(e){if(this._btnGroup){this._btnGroup.style.display="";var t={fromScale:[.5,.5],scale:[1,1],fromPosition:[0,10,0],position:[0,0,0],fromOpacity:0,opacity:1,complete:function(){P(this)},allDone:function(){e&&e()}};this.isDetached()?t.duration=1:(t.delay=function(e){return 250+50*e},t.easing="spring",t.springConstant=.3,t.springDeceleration=.85),c(this._btnGroup.childNodes,t)}}},{key:"_hideButtons",value:function(e){var t=this;if(this._btnGroup){var i={fromScale:[1,1],scale:[.85,.85],fromOpacity:1,opacity:0,allDone:function(){t._btnGroup.style.display="none",e&&e()}};this.isDetached()?i.duration=1:(i.easing="spring",i.springConstant=.3,i.springDeceleration=.75),c(this._btnGroup.childNodes,i)}}},{key:"_hideStatus",value:function(){this._element.querySelector(".slim-upload-status").style.opacity=0}},{key:"_doEdit",value:function(){var e=this;this._data.input.image&&(this._addState("editor"),this._imageEditor||this._appendEditor(),this._imageEditor.showRotateButton=this._options.rotateButton,we.inner=this._imageEditor.element,this._imageEditor.open(Y(this._data.input.image),"free"===this._options.ratio?null:this._ratio,this._data.actions.crop,this._data.actions.rotation,(function(){e._showEditor(),e._hideButtons(),e._hideStatus()})))}},{key:"_doRemove",value:function(e){var t=this;if(!this._isImageOnly()){this._clearState(),this._addState("empty"),this._hasInitialImage=!1,this._imageHopper&&(this._imageHopper.enabled=!0),this._isRequired&&(this._input.required=!0);var i=this._getOutro();i&&(i.style.opacity="0");var n=this.data;this._resetData();var o=setTimeout((function(){t._isBeingDestroyed||(t._hideButtons((function(){t._toggleButton("upload",!0)})),t._hideStatus(),t._hideResult(),t._options.didRemove.apply(t,[n]),e&&e())}),this.isDetached()?0:250);return this._timers.push(o),n}}},{key:"_doUpload",value:function(e){var t=this;this._data.input.image&&(this._addState("upload"),this._startProgress(),this._hideButtons((function(){t._toggleButton("upload",!1),t._save((function(i,n,o){t._removeState("upload"),t._stopProgress(),e&&e.apply(t,[i,n,o]),i&&t._toggleButton("upload",!0),t._showButtons()}))})))}},{key:"_doDownload",value:function(){this._data.output.image&&function(e,i,n){var o=e.output.image,s=n?q(e.input.name)+"."+n:e.input.name,a=x[n]||e.input.type;"image/png"===a&&(s=q(e.input.name)+".png"),o.toBlob((function(e){if("msSaveBlob"in window.navigator)window.navigator.msSaveBlob(e,s);else{var t=(window.URL||window.webkitURL).createObjectURL(e),i=k("a");i.style.display="none",i.download=s,i.href=t,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),(window.URL||window.webkitURL).revokeObjectURL(t)}),0)}}),a,"number"==typeof i?i/100:t)}(this._data,this._options.jpegCompression,this._options.forceType)}},{key:"_doDestroy",value:function(){function e(e,t){return 0!==t.filter((function(t){return e.name===t.name&&e.value===t.value})).length}var t=this;this._isBeingDestroyed=!0,this._timers.forEach((function(e){clearTimeout(e)})),this._timers=[],c(this._element,"detach"),this._imageHopper&&(ve.forEach((function(e){t._imageHopper.element.removeEventListener(e,t)})),this._imageHopper.destroy(),this._imageHopper=null),this._imageEditor&&(be.forEach((function(e){t._imageEditor.element.removeEventListener(e,t)})),this._imageEditor.destroy(),this._imageEditor=null),ie(this._btnGroup.children).forEach((function(e){e.removeEventListener("click",t)})),this._input.removeEventListener("change",this),this._element!==this._originalElement&&this._element.parentNode&&this._element.parentNode.replaceChild(this._originalElement,this._element),this._originalElement.innerHTML=this._originalElementInner;var i=m(this._originalElement);i.forEach((function(i){e(i,t._originalElementAttributes)||t._originalElement.removeAttribute(i.name)})),this._originalElementAttributes.forEach((function(n){e(n,i)||t._originalElement.setAttribute(n.name,n.value)})),_e=Math.max(0,_e-1),we&&0===_e&&(we.destroy(),we=null),this._originalElement=null,this._element=null,this._input=null,this._output=null,this._btnGroup=null,this._options=null}},{key:"dataBase64",get:function(){return function(e){var i=arguments.length>1&&arguments[1]!==t?arguments[1]:[],n=arguments[2],o=arguments[3],s=arguments[4],a={server:J(e.server),meta:J(e.meta),input:{name:e.input.name,type:e.input.type,size:e.input.size,width:e.input.width,height:e.input.height,field:e.input.field}};return R("input",i)&&!s&&(a.input.image=ee(e.input.image,e.input.type)),R("output",i)&&(a.output={name:o?q(e.input.name)+"."+o:e.input.name,type:x[o]||e.input.type,width:e.output.width,height:e.output.height},a.output.image=ee(e.output.image,a.output.type,n),a.output.type=te(a.output.image),"image/png"===a.output.type&&(a.output.name=q(a.input.name)+".png")),R("actions",i)&&(a.actions=J(e.actions)),a}(this._data,this._options.post,this._options.jpegCompression,this._options.forceType,null!==this._options.service)}},{key:"data",get:function(){return function(e){var t=J(e);return t.input.file=Z(e.input.file),t.output.image=Y(e.output.image),t}(this._data)}},{key:"element",get:function(){return this._element}},{key:"service",set:function(e){this._options.service=e}},{key:"size",set:function(e){this.setSize(e,null)}},{key:"rotation",set:function(e){this.setRotation(e,null)}},{key:"ratio",set:function(e){this.setRatio(e,null)}}],[{key:"options",value:function(){var e={edit:!0,instantEdit:!1,uploadBase64:!1,meta:{},ratio:"free",size:null,rotation:null,crop:null,post:["output","actions"],service:null,filterSharpen:0,push:!1,defaultInputName:"slim[]",minSize:{width:0,height:0},maxFileSize:null,jpegCompression:null,download:!1,saveInitialImage:!1,forceType:!1,forceSize:null,dropReplace:!0,fetcher:null,internalCanvasSize:{width:4096,height:4096},rotateButton:!0,popoverClassName:null,label:"<p>Drop your image here</p>",labelLoading:"<p>Loading image...</p>",statusFileType:"<p>Invalid file type, expects: $0.</p>",statusFileSize:"<p>File is too big, maximum file size: $0 MB.</p>",statusNoSupport:"<p>Your browser does not support image cropping.</p>",statusImageTooSmall:"<p>Image is too small, minimum size is: $0 pixels.</p>",statusContentLength:'<span class="slim-upload-status-icon"></span> The file is probably too big',statusUnknownResponse:'<span class="slim-upload-status-icon"></span> An unknown error occurred',statusUploadSuccess:'<span class="slim-upload-status-icon"></span> Saved',didInit:function(e){},didLoad:function(e,t,i){return!0},didSave:function(e){},didUpload:function(e,t,i){},didReceiveServerError:function(e,t){return t},didRemove:function(e){},didTransform:function(e){},didConfirm:function(e){},didCancel:function(){},willTransform:function(e,t){t(e)},willSave:function(e,t){t(e)},willRemove:function(e,t){t()},willRequest:function(e){}};return ye.concat(le.Buttons).concat("rotate").forEach((function(t){var i=A(t);e["button"+i+"ClassName"]=null,e["button"+i+"Label"]=i,e["button"+i+"Title"]=i})),e}}]),i}();return function(){function e(e){var t=window,i=e.split(".");return i.forEach((function(e,n){t[i[n]]&&(t=t[i[n]])})),t!==window?t:null}var t=[],i=function(e){return e},n=function(e){return"true"===e},o=function(e){return!e||"true"===e},s=function(e){return function(e){return e?"<p>"+e+"</p>":null}(e)},a=function(t){return t?e(t):null},r=function(e){if(!e)return null;var t=de(e,",");return{width:t[0],height:t[1]}},l=function(e){return e?parseInt(e,10):null},c={download:n,edit:o,instantEdit:n,minSize:r,size:r,forceSize:r,internalCanvasSize:r,service:function(t){if(void 0===t)return null;var i=e(t);return i||t},fetcher:function(e){return void 0===e?null:e},push:n,rotation:function(e){return void 0===e?null:parseInt(e,10)},crop:function(e){if(!e)return null;var t={};return e.split(",").map((function(e){return parseInt(e,10)})).forEach((function(e,i){t[ge[i]]=e})),t},post:function(e){return e?e.split(",").map((function(e){return e.trim()})):null},defaultInputName:i,ratio:function(e){return e||null},maxFileSize:function(e){return e?parseFloat(e):null},filterSharpen:l,jpegCompression:l,uploadBase64:n,forceType:i,dropReplace:o,saveInitialImage:n,rotateButton:o,label:s,labelLoading:s,popoverClassName:i};["FileSize","FileType","NoSupport","ImageTooSmall"].forEach((function(e){c["status"+e]=s})),["ContentLength","UnknownResponse","UploadSuccess"].forEach((function(e){c["status"+e]=i})),["Init","Load","Save","Upload","Remove","Transform","ReceiveServerError","Confirm","Cancel"].forEach((function(e){c["did"+e]=a})),["Transform","Save","Remove","Request"].forEach((function(e){c["will"+e]=a}));var u=["ClassName","Label","Title"];ye.concat(le.Buttons).concat("rotate").forEach((function(e){var t=A(e);u.forEach((function(e){c["button"+t+e]=i}))})),ke.supported=!("[object OperaMini]"===Object.prototype.toString.call(window.operamini)||void 0===window.addEventListener||void 0===window.FileReader||void 0===window.URL||void 0===window.URL.createObjectURL),ke.parse=function(e){var t,i,n,o=[];for(n=(t=e.querySelectorAll(".slim:not([data-state])")).length;n--;)i=t[n],o.push(ke.create(i,ke.getOptionsFromAttributes(i)));return o},ke.getOptionsFromAttributes=function(e){var t=p(e),i={meta:{}};for(var n in t){var o=c[n],s=t[n];o?(s=null===(s=o(s))?J(ke.options()[n]):s,i[n]=s):0===n.indexOf("meta")&&(i.meta[D(n.substr(4))]=s)}return i},ke.find=function(e){var i=t.filter((function(t){return t.isAttachedTo(e)}));return i?i[0]:null},ke.create=function(e,i){if(!ke.find(e)){i||(i=ke.getOptionsFromAttributes(e));var n=new ke(e,i);return t.push(n),n}},ke.destroy=function(e){var i=function(e){for(var i=0,n=t.length;i<n;i++)if(t[i].isAttachedTo(e))return i;return-1}(e);return!(i<0||(t[i].destroy(),t.splice(i,1),0))}}(),ke}(),e.Slim.supported)"loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i);else{var n=e.getElementsByClassName("slim"),o=0,s=n.length;for(o=0;o<s;o++)n[o].className=""}}(window),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(i){var o,s=e.isFunction(this)?e(t):e(this),a=s.selector||"",r=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return s.each((function(){var s,h,p,f,m,g,v=e.isPlainObject(i)?e.extend(!0,{},e.fn.api.settings,i):e.extend({},e.fn.api.settings),b=v.namespace,y=v.metadata,w=v.selector,_=v.error,C=v.className,x="."+b,S="module-"+b,k=e(this),T=k.closest(w.form),E=v.stateContext?e(v.stateContext):k,$=this,D=E[0],A=k.data(S);g={initialize:function(){u||g.bind.events(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),A=g,k.data(S,A)},destroy:function(){g.verbose("Destroying previous module for",$),k.removeData(S).off(x)},bind:{events:function(){var e=g.get.event();e?(g.verbose("Attaching API events to element",e),k.on(e+x,g.event.trigger)):"now"==v.on&&(g.debug("Querying API endpoint immediately"),g.query())}},decode:{json:function(e){if(e!==n&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var i;if(t.Storage!==n)return i=sessionStorage.getItem(e),g.debug("Using cached response",e,i),i=g.decode.json(i);g.error(_.noStorage)}},write:{cachedResponse:function(i,o){o&&""===o?g.debug("Response empty, not caching",o):t.Storage!==n?(e.isPlainObject(o)&&(o=JSON.stringify(o)),sessionStorage.setItem(i,o),g.verbose("Storing cached response for url",i,o)):g.error(_.noStorage)}},query:function(){if(g.is.disabled())g.debug("Element is disabled API request aborted");else{if(g.is.loading()){if(!v.interruptRequests)return void g.debug("Cancelling request, previous request is still pending");g.debug("Interrupting previous request"),g.abort()}if(v.defaultData&&e.extend(!0,v.urlData,g.get.defaultData()),v.serializeForm&&(v.data=g.add.formData(v.data)),!1===(h=g.get.settings()))return g.cancelled=!0,void g.error(_.beforeSend);if(g.cancelled=!1,(p=g.get.templatedURL())||g.is.mocked()){if((p=g.add.urlData(p))||g.is.mocked()){if(h.url=v.base+p,s=e.extend(!0,{},v,{type:v.method||v.type,data:f,url:v.base+p,beforeSend:v.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),g.debug("Querying URL",s.url),g.verbose("Using AJAX settings",s),"local"===v.cache&&g.read.cachedResponse(p))return g.debug("Response returned from local cache"),g.request=g.create.request(),void g.request.resolveWith(D,[g.read.cachedResponse(p)]);v.throttle?v.throttleFirstRequest||g.timer?(g.debug("Throttling request",v.throttle),clearTimeout(g.timer),g.timer=setTimeout((function(){g.timer&&delete g.timer,g.debug("Sending throttled request",f,s.method),g.send.request()}),v.throttle)):(g.debug("Sending request",f,s.method),g.send.request(),g.timer=setTimeout((function(){}),v.throttle)):(g.debug("Sending request",f,s.method),g.send.request())}}else g.error(_.missingURL)}},should:{removeError:function(){return!0===v.hideError||"auto"===v.hideError&&!g.is.form()}},is:{disabled:function(){return k.filter(w.disabled).length>0},expectingJSON:function(){return"json"===v.dataType||"jsonp"===v.dataType},form:function(){return k.is("form")||E.is("form")},mocked:function(){return v.mockResponse||v.mockResponseAsync||v.response||v.responseAsync},input:function(){return k.is("input")},loading:function(){return!!g.request&&"pending"==g.request.state()},abortedRequest:function(e){return e&&e.readyState!==n&&0===e.readyState?(g.verbose("XHR request determined to be aborted"),!0):(g.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return g.is.expectingJSON()&&e.isFunction(v.successTest)?(g.debug("Checking JSON returned success",v.successTest,t),v.successTest(t)?(g.debug("Response passed success test",t),!0):(g.debug("Response failed success test",t),!1)):(g.verbose("Response is not JSON, skipping validation",v.successTest,t),!0)}},was:{cancelled:function(){return g.cancelled||!1},succesful:function(){return g.request&&"resolved"==g.request.state()},failure:function(){return g.request&&"rejected"==g.request.state()},complete:function(){return g.request&&("resolved"==g.request.state()||"rejected"==g.request.state())}},add:{urlData:function(t,i){var o,s;return t&&(o=t.match(v.regExp.required),s=t.match(v.regExp.optional),i=i||v.urlData,o&&(g.debug("Looking for required URL variables",o),e.each(o,(function(o,s){var a=-1!==s.indexOf("$")?s.substr(2,s.length-3):s.substr(1,s.length-2),r=e.isPlainObject(i)&&i[a]!==n?i[a]:k.data(a)!==n?k.data(a):E.data(a)!==n?E.data(a):i[a];if(r===n)return g.error(_.requiredParameter,a,t),t=!1,!1;g.verbose("Found required variable",a,r),r=v.encodeParameters?g.get.urlEncodedValue(r):r,t=t.replace(s,r)}))),s&&(g.debug("Looking for optional URL variables",o),e.each(s,(function(o,s){var a=-1!==s.indexOf("$")?s.substr(3,s.length-4):s.substr(2,s.length-3),r=e.isPlainObject(i)&&i[a]!==n?i[a]:k.data(a)!==n?k.data(a):E.data(a)!==n?E.data(a):i[a];r!==n?(g.verbose("Optional variable Found",a,r),t=t.replace(s,r)):(g.verbose("Optional variable not found",a),t=-1!==t.indexOf("/"+s)?t.replace("/"+s,""):t.replace(s,""))})))),t},formData:function(t){var i=e.fn.serializeObject!==n,o=i?T.serializeObject():T.serialize();return t=t||v.data,e.isPlainObject(t)?i?(g.debug("Extending existing data with form data",t,o),t=e.extend(!0,{},t,o)):(g.error(_.missingSerialize),g.debug("Cant extend data. Replacing data with form data",t,o),t=o):(g.debug("Adding form data",o),t=o),t}},send:{request:function(){g.set.loading(),g.request=g.create.request(),g.is.mocked()?g.mockedXHR=g.create.mockedXHR():g.xhr=g.create.xhr(),v.onRequest.call(D,g.request,g.xhr)}},event:{trigger:function(e){g.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,i,n){var o=this,s=(new Date).getTime()-m,a=v.loadingDuration-s,r=!!e.isFunction(v.onResponse)&&(g.is.expectingJSON()?v.onResponse.call(o,e.extend(!0,{},t)):v.onResponse.call(o,t));a=a>0?a:0,r&&(g.debug("Modified API response in onResponse callback",v.onResponse,r,t),t=r),a>0&&g.debug("Response completed early delaying state change by",a),setTimeout((function(){g.is.validResponse(t)?g.request.resolveWith(o,[t,n]):g.request.rejectWith(o,[n,"invalid"])}),a)},fail:function(e,t,i){var n=this,o=(new Date).getTime()-m,s=v.loadingDuration-o;(s=s>0?s:0)>0&&g.debug("Response completed early delaying state change by",s),setTimeout((function(){g.is.abortedRequest(e)?g.request.rejectWith(n,[e,"aborted",i]):g.request.rejectWith(n,[e,"error",t,i])}),s)}},request:{done:function(e,t){g.debug("Successful API Response",e),"local"===v.cache&&p&&(g.write.cachedResponse(p,e),g.debug("Saving server response locally",g.cache)),v.onSuccess.call(D,e,k,t)},complete:function(e,t){var i,n;g.was.succesful()?(n=e,i=t):(i=e,n=g.get.responseFromXHR(i)),g.remove.loading(),v.onComplete.call(D,n,k,i)},fail:function(e,t,i){var o=g.get.responseFromXHR(e),a=g.get.errorFromRequest(o,t,i);if("aborted"==t)return g.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,i),v.onAbort.call(D,t,k,e),!0;"invalid"==t?g.debug("JSON did not pass success test. A server-side error has most likely occurred",o):"error"==t&&e!==n&&(g.debug("XHR produced a server error",t,i),200!=e.status&&i!==n&&""!==i&&g.error(_.statusMessage+i,s.url),v.onError.call(D,a,k,e)),v.errorDuration&&"aborted"!==t&&(g.debug("Adding error state"),g.set.error(),g.should.removeError()&&setTimeout(g.remove.error,v.errorDuration)),g.debug("API Request failed",a,e),v.onFailure.call(D,o,k,e)}}},create:{request:function(){return e.Deferred().always(g.event.request.complete).done(g.event.request.done).fail(g.event.request.fail)},mockedXHR:function(){var t,i,n,o=v.mockResponse||v.response,s=v.mockResponseAsync||v.responseAsync;return n=e.Deferred().always(g.event.xhr.complete).done(g.event.xhr.done).fail(g.event.xhr.fail),o?(e.isFunction(o)?(g.debug("Using specified synchronous callback",o),i=o.call(D,h)):(g.debug("Using settings specified response",o),i=o),n.resolveWith(D,[i,false,{responseText:i}])):e.isFunction(s)&&(t=function(e){g.debug("Async callback returned response",e),e?n.resolveWith(D,[e,false,{responseText:e}]):n.rejectWith(D,[{responseText:e},false,false])},g.debug("Using specified async response callback",s),s.call(D,h,t)),n},xhr:function(){var t;return t=e.ajax(s).always(g.event.xhr.always).done(g.event.xhr.done).fail(g.event.xhr.fail),g.verbose("Created server request",t,s),t}},set:{error:function(){g.verbose("Adding error state to element",E),E.addClass(C.error)},loading:function(){g.verbose("Adding loading state to element",E),E.addClass(C.loading),m=(new Date).getTime()}},remove:{error:function(){g.verbose("Removing error state from element",E),E.removeClass(C.error)},loading:function(){g.verbose("Removing loading state from element",E),E.removeClass(C.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(g.is.expectingJSON()?g.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,i,o){return e.isPlainObject(t)&&t.error!==n?t.error:v.error[i]!==n?v.error[i]:o},request:function(){return g.request||!1},xhr:function(){return g.xhr||!1},settings:function(){var t;return(t=v.beforeSend.call(D,v))&&(t.success!==n&&(g.debug("Legacy success callback detected",t),g.error(_.legacyParameters,t.success),t.onSuccess=t.success),t.failure!==n&&(g.debug("Legacy failure callback detected",t),g.error(_.legacyParameters,t.failure),t.onFailure=t.failure),t.complete!==n&&(g.debug("Legacy complete callback detected",t),g.error(_.legacyParameters,t.complete),t.onComplete=t.complete)),t===n&&g.error(_.noReturnedValue),!1===t?t:t!==n?e.extend(!0,{},t):e.extend(!0,{},v)},urlEncodedValue:function(e){var i=t.decodeURIComponent(e),n=t.encodeURIComponent(e);return i!==e?(g.debug("URL value is already encoded, avoiding double encoding",e),e):(g.verbose("Encoding value using encodeURIComponent",e,n),n)},defaultData:function(){var t={};return e.isWindow($)||(g.is.input()?t.value=k.val():g.is.form()||(t.text=k.text())),t},event:function(){return e.isWindow($)||"now"==v.on?(g.debug("API called without element, no events attached"),!1):"auto"==v.on?k.is("input")?$.oninput!==n?"input":$.onpropertychange!==n?"propertychange":"keyup":k.is("form")?"submit":"click":v.on},templatedURL:function(e){if(e=e||k.data(y.action)||v.action||!1,p=k.data(y.url)||v.url||!1)return g.debug("Using specified url",p),p;if(e){if(g.debug("Looking up url for action",e,v.api),v.api[e]===n&&!g.is.mocked())return void g.error(_.missingAction,v.action,v.api);p=v.api[e]}else g.is.form()&&(p=k.attr("action")||E.attr("action")||!1,g.debug("No url or action specified, defaulting to form action",p));return p}},abort:function(){var e=g.get.xhr();e&&"resolved"!==e.state()&&(g.debug("Cancelling API request"),e.abort())},reset:function(){g.remove.error(),g.remove.loading()},setting:function(t,i){if(g.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,v,t);else{if(i===n)return v[t];e.isPlainObject(v[t])?e.extend(!0,v[t],i):v[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(i===n)return g[t];g[t]=i}},debug:function(){!v.silent&&v.debug&&(v.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,v.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),g.verbose.apply(console,arguments)))},error:function(){v.silent||(g.error=Function.prototype.bind.call(console.error,console,v.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,i;v.performance&&(i=(t=(new Date).getTime())-(r||t),r=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=v.name+":",i=0;r=!1,clearTimeout(g.performance.timer),e.each(l,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(t,i,s){var a,r,l,c=A;return i=i||d,s=$||s,"string"==typeof t&&c!==n&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,(function(i,o){var s=i!=a?o+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[s])&&i!=a)c=c[s];else{if(c[s]!==n)return r=c[s],!1;if(!e.isPlainObject(c[o])||i==a)return c[o]!==n?(r=c[o],!1):(g.error(_.method,t),!1);c=c[o]}}))),e.isFunction(r)?l=r.apply(s,i):r!==n&&(l=r),e.isArray(o)?o.push(l):o!==n?o=[o,l]:l!==n&&(o=l),r}},u?(A===n&&g.initialize(),g.invoke(c)):(A!==n&&A.invoke("destroy"),g.initialize())})),o!==n?o:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(n){var o,s=e(this),a=s.selector||"",r=(new Date).getTime(),l=[],c=arguments[0],u="string"==typeof c,d=[].slice.call(arguments,1);return e(this).each((function(){var h,p=e.isPlainObject(n)?e.extend(!0,{},e.fn.search.settings,n):e.extend({},e.fn.search.settings),f=p.className,m=p.metadata,g=p.regExp,v=p.fields,b=p.selector,y=p.error,w=p.namespace,_="."+w,C=w+"-module",x=e(this),S=x.find(b.prompt),k=x.find(b.searchButton),T=x.find(b.results),E=x.find(b.result),$=(x.find(b.category),this),D=x.data(C),A=!1,I=!1;h={initialize:function(){h.verbose("Initializing module"),h.determine.searchFields(),h.bind.events(),h.set.type(),h.create.results(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),D=h,x.data(C,h)},destroy:function(){h.verbose("Destroying instance"),x.off(_).removeData(C)},refresh:function(){h.debug("Refreshing selector cache"),S=x.find(b.prompt),k=x.find(b.searchButton),x.find(b.category),T=x.find(b.results),E=x.find(b.result)},refreshResults:function(){T=x.find(b.results),E=x.find(b.result)},bind:{events:function(){h.verbose("Binding events to search"),p.automatic&&(x.on(h.get.inputEvent()+_,b.prompt,h.event.input),S.attr("autocomplete","off")),x.on("focus"+_,b.prompt,h.event.focus).on("blur"+_,b.prompt,h.event.blur).on("keydown"+_,b.prompt,h.handleKeyboard).on("click"+_,b.searchButton,h.query).on("mousedown"+_,b.results,h.event.result.mousedown).on("mouseup"+_,b.results,h.event.result.mouseup).on("click"+_,b.result,h.event.result.click)}},determine:{searchFields:function(){n&&void 0!==n.searchFields&&(p.searchFields=n.searchFields)}},event:{input:function(){p.searchDelay?(clearTimeout(h.timer),h.timer=setTimeout((function(){h.is.focused()&&h.query()}),p.searchDelay)):h.query()},focus:function(){h.set.focus(),p.searchOnFocus&&h.has.minimumCharacters()&&h.query((function(){h.can.show()&&h.showResults()}))},blur:function(e){var t=i.activeElement===this,n=function(){h.cancel.query(),h.remove.focus(),h.timer=setTimeout(h.hideResults,p.hideDelay)};t||(I=!1,h.resultsClicked?(h.debug("Determining if user action caused search to close"),x.one("click.close"+_,b.results,(function(e){h.is.inMessage(e)||A?S.focus():(A=!1,h.is.animating()||h.is.hidden()||n())}))):(h.debug("Input blurred without user action, closing results"),n()))},result:{mousedown:function(){h.resultsClicked=!0},mouseup:function(){h.resultsClicked=!1},click:function(i){h.debug("Search result selected");var n=e(this),o=n.find(b.title).eq(0),s=n.is("a[href]")?n:n.find("a[href]").eq(0),a=s.attr("href")||!1,r=s.attr("target")||!1,l=(o.html(),o.length>0&&o.text()),c=h.get.results(),u=n.data(m.result)||h.get.result(l,c);if(e.isFunction(p.onSelect)&&!1===p.onSelect.call($,u,c))return h.debug("Custom onSelect callback cancelled default select action"),void(A=!0);h.hideResults(),l&&h.set.value(l),a&&(h.verbose("Opening search link found in result",s),"_blank"==r||i.ctrlKey?t.open(a):t.location.href=a)}}},handleKeyboard:function(e){var t,i=x.find(b.result),n=x.find(b.category),o=i.filter("."+f.active),s=i.index(o),a=i.length,r=o.length>0,l=e.which,c=13,u=38,d=40;if(l==27&&(h.verbose("Escape key pressed, blurring search field"),h.hideResults(),I=!0),h.is.visible())if(l==c){if(h.verbose("Enter key pressed, selecting active result"),i.filter("."+f.active).length>0)return h.event.result.click.call(i.filter("."+f.active),e),e.preventDefault(),!1}else l==u&&r?(h.verbose("Up key pressed, changing active result"),t=s-1<0?s:s-1,n.removeClass(f.active),i.removeClass(f.active).eq(t).addClass(f.active).closest(n).addClass(f.active),e.preventDefault()):l==d&&(h.verbose("Down key pressed, changing active result"),t=s+1>=a?s:s+1,n.removeClass(f.active),i.removeClass(f.active).eq(t).addClass(f.active).closest(n).addClass(f.active),e.preventDefault());else l==c&&(h.verbose("Enter key pressed, executing query"),h.query(),h.set.buttonPressed(),S.one("keyup",h.remove.buttonFocus))},setup:{api:function(t,i){var n={debug:p.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){h.parse.response.call($,e,t),i()},onFailure:function(){h.displayMessage(y.serverError),i()},onAbort:function(e){},onError:h.error};e.extend(!0,n,p.apiSettings),h.verbose("Setting up API request",n),x.api(n)}},can:{useAPI:function(){return void 0!==e.fn.api},show:function(){return h.is.focused()&&!h.is.visible()&&!h.is.empty()},transition:function(){return p.transition&&void 0!==e.fn.transition&&x.transition("is supported")}},is:{animating:function(){return T.hasClass(f.animating)},hidden:function(){return T.hasClass(f.hidden)},inMessage:function(t){if(t.target){var n=e(t.target);return e.contains(i.documentElement,t.target)&&n.closest(b.message).length>0}},empty:function(){return""===T.html()},visible:function(){return T.filter(":visible").length>0},focused:function(){return S.filter(":focus").length>0}},get:{inputEvent:function(){var e=S[0];return void 0!==e&&void 0!==e.oninput?"input":void 0!==e&&void 0!==e.onpropertychange?"propertychange":"keyup"},value:function(){return S.val()},results:function(){return x.data(m.results)},result:function(t,i){var n=["title","id"],o=!1;return t=void 0!==t?t:h.get.value(),i=void 0!==i?i:h.get.results(),"category"===p.type?(h.debug("Finding result that matches",t),e.each(i,(function(i,s){if(e.isArray(s.results)&&(o=h.search.object(t,s.results,n)[0]))return!1}))):(h.debug("Finding result in results object",t),o=h.search.object(t,i,n)[0]),o||!1}},select:{firstResult:function(){h.verbose("Selecting first result"),E.first().addClass(f.active)}},set:{focus:function(){x.addClass(f.focus)},loading:function(){x.addClass(f.loading)},value:function(e){h.verbose("Setting search input value",e),S.val(e)},type:function(e){e=e||p.type,"category"==p.type&&x.addClass(p.type)},buttonPressed:function(){k.addClass(f.pressed)}},remove:{loading:function(){x.removeClass(f.loading)},focus:function(){x.removeClass(f.focus)},buttonPressed:function(){k.removeClass(f.pressed)}},query:function(t){t=e.isFunction(t)?t:function(){};var i=h.get.value(),n=h.read.cache(i);t=t||function(){},h.has.minimumCharacters()?(n?(h.debug("Reading result from cache",i),h.save.results(n.results),h.addResults(n.html),h.inject.id(n.results),t()):(h.debug("Querying for",i),e.isPlainObject(p.source)||e.isArray(p.source)?(h.search.local(i),t()):h.can.useAPI()?h.search.remote(i,t):(h.error(y.source),t())),p.onSearchQuery.call($,i)):h.hideResults()},search:{local:function(e){var t,i=h.search.object(e,p.content);h.set.loading(),h.save.results(i),h.debug("Returned local search results",i),t=h.generateResults({results:i}),h.remove.loading(),h.addResults(t),h.inject.id(i),h.write.cache(e,{html:t,results:i})},remote:function(t,i){i=e.isFunction(i)?i:function(){},x.api("is loading")&&x.api("abort"),h.setup.api(t,i),x.api("query")},object:function(t,i,n){var o=[],s=[],a=t.toString().replace(g.escape,"\\$&"),r=new RegExp(g.beginsWith+a,"i"),l=function(t,i){var n=-1==e.inArray(i,o),a=-1==e.inArray(i,s);n&&a&&t.push(i)};return i=i||p.source,n=void 0!==n?n:p.searchFields,e.isArray(n)||(n=[n]),void 0===i||!1===i?(h.error(y.source),[]):(e.each(n,(function(n,a){e.each(i,(function(e,i){"string"==typeof i[a]&&(-1!==i[a].search(r)?l(o,i):p.searchFullText&&h.fuzzySearch(t,i[a])&&l(s,i))}))})),e.merge(o,s))}},fuzzySearch:function(e,t){var i=t.length,n=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),n>i)return!1;if(n===i)return e===t;e:for(var o=0,s=0;o<n;o++){for(var a=e.charCodeAt(o);s<i;)if(t.charCodeAt(s++)===a)continue e;return!1}return!0},parse:{response:function(e,t){var i=h.generateResults(e);h.verbose("Parsing server response",e),void 0!==e&&void 0!==t&&void 0!==e[v.results]&&(h.addResults(i),h.inject.id(e[v.results]),h.write.cache(t,{html:i,results:e[v.results]}),h.save.results(e[v.results]))}},cancel:{query:function(){h.can.useAPI()&&x.api("abort")}},has:{minimumCharacters:function(){return h.get.value().length>=p.minCharacters},results:function(){return 0!==T.length&&""!=T.html()}},clear:{cache:function(e){var t=x.data(m.cache);e?e&&t&&t[e]&&(h.debug("Removing value from cache",e),delete t[e],x.data(m.cache,t)):(h.debug("Clearing cache",e),x.removeData(m.cache))}},read:{cache:function(e){var t=x.data(m.cache);return!!p.cache&&(h.verbose("Checking cache for generated html for query",e),"object"==_typeof(t)&&void 0!==t[e]&&t[e])}},create:{id:function(e,t){var i,n=e+1;return void 0!==t?(i=String.fromCharCode(97+t)+n,h.verbose("Creating category result id",i)):(i=n,h.verbose("Creating result id",i)),i},results:function(){0===T.length&&(T=e("<div />").addClass(f.results).appendTo(x))}},inject:{result:function(e,t,i){h.verbose("Injecting result into results");var n=void 0!==i?T.children().eq(i).children(b.result).eq(t):T.children(b.result).eq(t);h.verbose("Injecting results metadata",n),n.data(m.result,e)},id:function(t){h.debug("Injecting unique ids into results");var i=0,n=0;return"category"===p.type?e.each(t,(function(t,o){n=0,e.each(o.results,(function(e,t){var s=o.results[e];void 0===s.id&&(s.id=h.create.id(n,i)),h.inject.result(s,n,i),n++})),i++})):e.each(t,(function(e,i){var o=t[e];void 0===o.id&&(o.id=h.create.id(n)),h.inject.result(o,n),n++})),t}},save:{results:function(e){h.verbose("Saving current search results to metadata",e),x.data(m.results,e)}},write:{cache:function(e,t){var i=void 0!==x.data(m.cache)?x.data(m.cache):{};p.cache&&(h.verbose("Writing generated html to cache",e,t),i[e]=t,x.data(m.cache,i))}},addResults:function(t){if(e.isFunction(p.onResultsAdd)&&!1===p.onResultsAdd.call(T,t))return h.debug("onResultsAdd callback cancelled default action"),!1;t?(T.html(t),h.refreshResults(),p.selectFirstResult&&h.select.firstResult(),h.showResults()):h.hideResults((function(){T.empty()}))},showResults:function(t){t=e.isFunction(t)?t:function(){},I||!h.is.visible()&&h.has.results()&&(h.can.transition()?(h.debug("Showing results with css animations"),T.transition({animation:p.transition+" in",debug:p.debug,verbose:p.verbose,duration:p.duration,onComplete:function(){t()},queue:!0})):(h.debug("Showing results with javascript"),T.stop().fadeIn(p.duration,p.easing)),p.onResultsOpen.call(T))},hideResults:function(t){t=e.isFunction(t)?t:function(){},h.is.visible()&&(h.can.transition()?(h.debug("Hiding results with css animations"),T.transition({animation:p.transition+" out",debug:p.debug,verbose:p.verbose,duration:p.duration,onComplete:function(){t()},queue:!0})):(h.debug("Hiding results with javascript"),T.stop().fadeOut(p.duration,p.easing)),p.onResultsClose.call(T))},generateResults:function(t){h.debug("Generating html from response",t);var i=p.templates[p.type],n=e.isPlainObject(t[v.results])&&!e.isEmptyObject(t[v.results]),o=e.isArray(t[v.results])&&t[v.results].length>0,s="";return n||o?(p.maxResults>0&&(n?"standard"==p.type&&h.error(y.maxResults):t[v.results]=t[v.results].slice(0,p.maxResults)),e.isFunction(i)?s=i(t,v):h.error(y.noTemplate,!1)):p.showNoResults&&(s=h.displayMessage(y.noResults,"empty")),p.onResults.call($,t),s},displayMessage:function(e,t){return t=t||"standard",h.debug("Displaying message",e,t),h.addResults(p.templates.message(e,t)),p.templates.message(e,t)},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(void 0===i)return h[t];h[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,p.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),h.verbose.apply(console,arguments)))},error:function(){p.silent||(h.error=Function.prototype.bind.call(console.error,console,p.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,i;p.performance&&(i=(t=(new Date).getTime())-(r||t),r=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:$,"Execution Time":i})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=p.name+":",i=0;r=!1,clearTimeout(h.performance.timer),e.each(l,(function(e,t){i+=t["Execution Time"]})),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),s.length>1&&(t+=" ("+s.length+")"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,(function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")})),console.groupEnd()),l=[]}},invoke:function(t,i,n){var s,a,r,l=D;return i=i||d,n=$||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,(function(i,n){var o=i!=s?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[o])&&i!=s)l=l[o];else{if(void 0!==l[o])return a=l[o],!1;if(!e.isPlainObject(l[n])||i==s)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}}))),e.isFunction(a)?r=a.apply(n,i):void 0!==a&&(r=a),e.isArray(o)?o.push(r):void 0!==o?o=[o,r]:void 0!==r&&(o=r),a}},u?(void 0===D&&h.initialize(),h.invoke(c)):(void 0!==D&&D.invoke("destroy"),h.initialize())})),void 0!==o?o:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,(function(e){return t[e]})):e},message:function(e,t){var i="";return void 0!==e&&void 0!==t&&(i+='<div class="message '+t+'">',i+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",i+="</div>"),i},category:function(t,i){var n="";return e.fn.search.settings.templates.escape,void 0!==t[i.categoryResults]&&(e.each(t[i.categoryResults],(function(t,o){void 0!==o[i.results]&&o.results.length>0&&(n+='<div class="category">',void 0!==o[i.categoryName]&&(n+='<div class="name">'+o[i.categoryName]+"</div>"),e.each(o.results,(function(e,t){t[i.url]?n+='<a class="result" href="'+t[i.url]+'">':n+='<a class="result">',void 0!==t[i.image]&&(n+='<div class="image"> <img src="'+t[i.image]+'"></div>'),n+='<div class="content">',void 0!==t[i.price]&&(n+='<div class="price">'+t[i.price]+"</div>"),void 0!==t[i.title]&&(n+='<div class="title">'+t[i.title]+"</div>"),void 0!==t[i.description]&&(n+='<div class="description">'+t[i.description]+"</div>"),n+="</div>",n+="</a>"})),n+="</div>")})),t[i.action]&&(n+='<a href="'+t[i.action][i.actionURL]+'" class="action">'+t[i.action][i.actionText]+"</a>"),n)},standard:function(t,i){var n="";return void 0!==t[i.results]&&(e.each(t[i.results],(function(e,t){t[i.url]?n+='<a class="result" href="'+t[i.url]+'">':n+='<a class="result">',void 0!==t[i.image]&&(n+='<div class="image"> <img src="'+t[i.image]+'"></div>'),n+='<div class="content">',void 0!==t[i.price]&&(n+='<div class="price">'+t[i.price]+"</div>"),void 0!==t[i.title]&&(n+='<div class="title">'+t[i.title]+"</div>"),void 0!==t[i.description]&&(n+='<div class="description">'+t[i.description]+"</div>"),n+="</div>",n+="</a>"})),t[i.action]&&(n+='<a href="'+t[i.action][i.actionURL]+'" class="action">'+t[i.action][i.actionText]+"</a>"),n)}}}}(jQuery,window,document);var reload_after_login=!0;function showLoading(){!0!==$(".pace-demo").data("ignore")&&$(".pace-demo").removeClass("hidden")}function avoidShowLoading(){$(".pace-demo").data("ignore",!0)}function hideLoading(){$(".pace-demo").addClass("hidden").data("ignore",!1)}function str_replace(e,t,i,n){var o,s=0,a=0,r="",l="",c=0,u=[].concat(e),d=[].concat(t),h=i,p="[object Array]"===Object.prototype.toString.call(d),f="[object Array]"===Object.prototype.toString.call(h);for(h=[].concat(h),n&&(this.window[n]=0),s=0,o=h.length;s<o;s++)if(""!==h[s])for(a=0,c=u.length;a<c;a++)r=h[s]+"",l=p?void 0!==d[a]?d[a]:"":d[0],h[s]=r.split(u[a]).join(l),n&&h[s]!==r&&(this.window[n]+=(r.length-h[s].length)/u[a].length);return f?h:h[0]}function arabic_number(e){return null==e||0==Salla.Settings.arabic_numbers?e:(e=str_replace("1","",e=e.toString()),e=str_replace("2","",e),e=str_replace("3","",e),e=str_replace("4","",e),e=str_replace("5","",e),e=str_replace("6","",e),e=str_replace("7","",e),e=str_replace("8","",e),e=str_replace("9","",e),(e=str_replace("0","",e)).toString())}function containerHeight(){var e=$(window).height()-$("body > .navbar").outerHeight()-$("body > .navbar + .navbar").outerHeight()-$("body > .navbar + .navbar-collapse").outerHeight();$(".page-container").attr("style","min-height:"+e+"px")}function subZeroes(e){e=e.toString();var t=Number(e),i=e.toString().split(".");return-1===e.indexOf(".")?e=t.toString():i[1].length>1&&(e=(t=t.toFixed(2)).toString()),e}function whatsapp_number(e,t,i){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)?swal({title:"  ",type:"input",inputValue:e,confirmButtonText:"  ",confirmButtonColor:i,animation:"pop"}):window.location.href=t,!1}function instagram_force_login(e){showLoading(),$("#instagram_frame").attr("src","https://instagram.com/accounts/logout/"),$("#instagram_frame")[0].onload=function(){hideLoading(),window.location.href=e}}function countdownTimerOffer(e,t,i,n,o){var s,a=6e4,r=36e5;function l(e){return e<10?"0"+e:e}void 0===i&&(i=" :remain"),e=new Date(1e3*e+1e3*o),s=setInterval((function(){var o=new Date,c=e-o;if(c<0)return clearInterval(s),void $("#"+t).html(n);var u=Math.floor(c/r),d=Math.floor(c%r/a),h=Math.floor(c%a/1e3),p=l(u)+":"+l(d)+":"+l(h),f=i.replace(":remain",p);$("#"+t).html(f)}),1e3)}function saveKeyword(e,t,i,n){$.ajax({url:baseUrl+"/search-track",type:"Post",data:{_token:_token,keyword:e,product_id:t,result_count:i},success:function(e){console.log(n),n&&(window.location=n)}})}function checkValue(e){return null!==e?e:""}function scrolltoElem(e){$("html, body").animate({scrollTop:e.offset().top},1e3)}function validateInp(e){var t=0;return $.map(e,(function(e,i){var n=e.inpID;if("case 1"===e.case);else 0==$.trim(n.val()).length?(n.closest("div.form-group").addClass("has-error"),t+=1):(n.closest("div.form-group").removeClass("has-error"),t+=0)})),0==t}function parseArabicNumbers(e,t){document.getElementById(e).value=document.getElementById(e).value.toArabicDigits();var i=document.getElementById(e).value.toArabicDigits();return i>=0?0!=i?1==t?(document.getElementById(e).value=Number(i).toString(),document.getElementById(e).value=document.getElementById(e).value.replace(/^0+/,"")):(document.getElementById(e).value=i,document.getElementById(e).value=document.getElementById(e).value):document.getElementById(e).value=i:document.getElementById(e).value="",!0}function fromArabicToEnglishNumbers(e){return e.toArabicDigits()}$(".ajax").click((function(){!1===$(this).data("show-loading")&&avoidShowLoading()})),$.jGrowl.defaults.closerTemplate="<div> </div>",$.jGrowl.defaults.click=function(e,t,i){$(this).trigger("jGrowl.close")},$((function(){$(".panel-collapsed").children(".panel-heading").nextAll().hide(),$(".panel-collapsed").find("a[data-action=collapse]").addClass("rotate-270"),$(".panel div[data-action=collapse]").click((function(e){e.preventDefault();var t=$(this).nextAll();$(this).parents(".panel").toggleClass("panel-collapsed"),$(this).find("a[data-action=collapse]").toggleClass("rotate-270"),containerHeight(),t.slideToggle(150)})),$(".panel [data-action=close]").click((function(e){e.preventDefault();var t=$(this).parent().parent().parent().parent().parent();containerHeight(),t.slideUp(150,(function(){$(this).remove()}))})),$(".disableEnterKey").bind("keypress",(function(e){if(13==e.keyCode)return!1})),$(".notification-link , .notification-header-icon").bind("click",(function(){$(this).parent().hasClass("open")||($(".notification-badge").hide(),$("#bell").removeClass("bell-swing"),$.get($(this).data("link")))}))})),$(document).ready((function(){$("#searchbox").keyup((function(e){13===e.keyCode&&(e.preventDefault(),$("#search").submit())}));var e="";$(".ui.search").search({apiSettings:{url:baseUrl+"/search?q={query}&_t="+_token},fields:{results:"results",title:"title",url:"url"},searchFields:["title"],minCharacters:2,cache:!1,searchFullText:!0,easing:!1,onSearchQuery:function(t){e=t},templates:{message:function(e,t){return html="<div>   </div>",html},standard:function(t){var i="";return window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"store::search",keyword:e,ecommerce:{currencyCode:"SAR",detail:{products:t.results.map((function(e){return{id:e.id_encoded,name:e.title,price:e.value_price}}))}}}),$.each(t.results,(function(e,n){i+='<a href ="#" class="seach_container" data-product-title="'+n.title+'" data-product-id="'+n.id+'" data-url="'+n.url+'" data-total-result="'+t.results.length+'" ><div class="media"><div class="media-left"><img src="'+n.image+'" class="img-rounded rounded thumb img-lg" alt=""></div><div class="media-body"><p class="media-heading">'+n.title+'</p><span class="text-success">'+n.price+' </span></div><div class="media-right media-middle"></div></div></a>'})),i}}}),$(document).on("click","a.seach_container",(function(){var e=$(this).attr("data-product-title"),t=$(this).attr("data-product-id"),i=$(this).attr("data-url");saveKeyword(e,t,$(this).attr("data-total-result"),i)})),$(".toggle-search").on("click",(function(){$("#search-bar").toggleClass("hide"),$(this).find("i").toggleClass("icon-search4").toggleClass("icon-cross2"),$(".search-bar").hasClass()||$("#searchbox").focus()}));var t=!1;document.addEventListener("auth",(function(e){e&&e.detail&&0===e.detail.reload&&(reload_after_login=!1),t||(t=!0,window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"auth-required"}),$("body").hasClass("mobile-webview")?t=!1:$.get(baseUrl+"/login").done((function(e){t=!1,$("#div_ajax").html(e),$("#modal_login").modal()})).fail((function(e,i,n){t=!1})))})),$("[data-login-link]").on("click",(function(e){e.preventDefault(),document.dispatchEvent(new Event("auth"))})),$(".allowAlphabat").keypress((function(e){var t=new RegExp("^[a-zA-Z\\-\\s]+$"),i=String.fromCharCode(e.charCode?e.charCode:e.which);return!!t.test(i)||(e.preventDefault(),!1)})),$(".count-down-timer").each((function(){var e=$(this).attr("id"),t=$(this).data("end-date"),i=$(this).data("txt"),n=$(this).data("end-txt"),o=$(this).data("extra-time");void 0===o&&(o=0),countdownTimerOffer(t,e,i,n,o)})),$(".input_date_picker").calendar({minDate:moment(),className:{prevIcon:"sicon-arrow-left left",nextIcon:"sicon-arrow-right right",table:"ui celled center aligned unstackable table text-ltr"},type:"date",formatter:{date:function(e,t){return e?e.year()+"-"+(e.month()+1)+"-"+e.date():""}},text:{days:["","","","","","",""],months:["","","","","","","","","","","",""]}}),$(".input_date_time_picker").calendar({minDate:moment(),className:{prevIcon:"sicon-arrow-left left",nextIcon:"sicon-arrow-right right",table:"ui celled center aligned unstackable table text-ltr"},formatter:{date:function(e,t){return e?e.year()+"-"+(e.month()+1)+"-"+e.date():""}},text:{days:["","","","","","",""],months:["","","","","","","","","","","",""]}}),$("#birth_date_picker").calendar({maxDate:moment(),initialDate:moment(),className:{prevIcon:"sicon-arrow-left left",nextIcon:"sicon-arrow-right right",table:"ui celled center aligned unstackable table text-ltr"},type:"date",formatter:{date:function(e,t){return e?e.year()+"-"+(e.month()+1)+"-"+e.date():""}},text:{days:["","","","","","",""],months:["","","","","","","","","","","",""]}}),$(".input_time_picker").calendar({type:"time",className:{prevIcon:"sicon-arrow-left left",nextIcon:"sicon-arrow-right right",table:"ui celled center aligned unstackable table text-ltr"}}),$(".input_datetime_picker").each((function(){var e=$(this),t=e[0].hasAttribute("data-order-time")?JSON.parse(e.attr("data-order-time")):{},i=e[0].hasAttribute("data-timezone")?e.attr("data-timezone"):"+0300",n=[],o=e[0].hasAttribute("data-from-date-time");function s(e){return moment.weekdays()[e].toLowerCase()}function a(e){return!$.isEmptyObject(t)&&t.hasOwnProperty(e)&&t[e][0]}function r(e){var i=t[e][0].split("-");return{minHours:parseInt(i[0].split(":")[0]),maxHours:parseInt(i[1].split(":")[0]),minMinutes:parseInt(i[0].split(":")[1]),maxMinutes:parseInt(i[1].split(":")[1])}}$.isEmptyObject(t)||moment.weekdays().forEach((function(e,i){t.hasOwnProperty(e.toLowerCase())||n.push(i)})),e.calendar({minDate:o?moment(e.attr("data-from-date-time")).utcOffset(i):moment().utcOffset(i),maxDate:o?moment(e.attr("data-to-date-time")).utcOffset(i):null,className:{prevIcon:"sicon-arrow-left left",nextIcon:"sicon-arrow-right right",table:"ui celled center aligned unstackable table text-ltr"},formatter:{date:function(e,t){return e?e.year()+"-"+(e.month()+1)+"-"+e.date():""}},text:{days:["","","","","","",""],months:["","","","","","","","","","","",""]},disabledDaysOfWeek:n,setInputValueOnMode:"minute",allowArrowsOnlyOnDays:!0,enabledHours:function(e){var t=s(e.day());if(!a(t))return!0;var n=r(t),o=moment().utcOffset(i);return!(moment().utcOffset(i).isSame(e,"day")&&o.hours()>e.hours())&&(n.minHours<=e.hours()&&n.maxHours>=e.hours())},enabledMinutes:function(e){var t=s(e.day());if(!a(t))return!0;var n=moment().utcOffset(i);if(moment().utcOffset(i).isSame(e,"day")&&n.hours()===e.hours()&&n.minutes()>e.minutes())return!1;var o=r(t);return!(o.minHours===e.hours()&&o.minMinutes>e.minutes())&&!(o.maxHours===e.hours()&&o.maxMinutes<e.minutes())}})})),$(".allowEnglishOnly").keypress((function(e){var t=e.which;return 32==t||(48<=t&&t<=57||(65<=t&&t<=90||97<=t&&t<=122))}))})),$(".UploadForm").on("change",(function(){var e=$(this);e.on("submit",(function(t){t.preventDefault(),e.find(".image-loading").removeClass("hide");var i=e.find("input:file").attr("id"),n=document.querySelector("#"+i).files[0],o=new FormData;o.append(i,n),o.append("_token",$(".UploadForm [name^='_token']").val()),o.append("id",$(".UploadForm [name^='id']").val()),$.ajax({type:"POST",url:e.attr("action"),data:o,cache:!1,contentType:!1,processData:!1,success:function(t){e.find(".image-loading").addClass("hide"),e.find(".img-holder-ajax").removeClass("hide").find("img").attr("src",t.filePath)},error:function(t){e.find(".image-loading").addClass("hide"),$("#publish").prop("disabled",!0)}})})),e.submit()})),String.prototype.replaceArray=function(e,t){for(var i,n=this,o=0;o<e.length;o++)i=new RegExp(e[o],"g"),n=n.replace(i,t[o]);return n},String.prototype.toArabicDigits=function(){return this.replaceArray(["","","","","","","","","",""," ","-","/","|","~"],["0","1","2","3","4","5","6","7","8","9","","","","",""])},$(document).ready((function(){var e=$("body.salla-default .categories-nav");if($(".categories-nav ul li a.active").length?$(".categories-nav ul").scrollTo($(".categories-nav ul li a.active"),0,{offset:-180}):$("head").append("<style>.categories-nav::after{background: none}</style>"),$(".categories-nav").length>0){var t=$(".categories-nav ul li:last").offset();void 0!==t&&t.left<=0&&$("head").append("<style>.categories-nav::before{background:-webkit-linear-gradient(left, #eee, rgba(238, 238, 238, 0)); background:linear-gradient(to right, #eee, rgba(238, 238, 238, 0))}</style>")}if(e.find(".has-children").length){var i=function(){$(".categories-nav--mobile").removeClass("active"),$("body").removeClass("nav-open")},n=$(".main-menu"),o=e.find("#offers").length?$("li#offers").clone().html():"";e.before('<nav class="categories-nav categories-nav--fake"><ul> <li>'.concat(o,"</li> ").concat('<li id="mobile_nav_toggle" class="sub-nav__menu"><button class="btn"><i class="sicon-menu mr-5"></i>  </button></li>',"</ul></nav>")),e.addClass("categories-nav--mobile"),n.find("li.has-children").each((function(){var e=$(this),t=e.find("> a").attr("href"),i=e.find("> ul");e.find("> a").removeAttr("href"),i.prepend('<li class="link-holder"><a href="'.concat(t,'">').concat(" ","</a></li>")),e.on("click",(function(e){e.stopPropagation(),$(this).toggleClass("active").find(".has-children.active").removeClass("active"),$(this).siblings().removeClass("active").find("ul").slideUp(150),$(this).hasClass("active")?$(this).children("ul:first").slideDown(150):$(this).find("ul").slideUp(150)}))})),$("#mobile_nav_toggle .btn").on("click",(function(e){e.preventDefault(),$(".categories-nav--mobile").toggleClass("active"),$("body").addClass("nav-open")})),$(document).mouseup((function(e){n.is(e.target)||0!==n.has(e.target).length||i()})),$(window).resize((function(){$(this).width()>992&&$("body").hasClass("nav-open")&&i()})).resize()}}));
